var Cn=Object.defineProperty,In=Object.defineProperties;var kn=Object.getOwnPropertyDescriptors;var hi=Object.getOwnPropertySymbols;var On=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable;var vi=(i,f,c)=>f in i?Cn(i,f,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[f]=c,ee=(i,f)=>{for(var c in f||(f={}))On.call(f,c)&&vi(i,c,f[c]);if(hi)for(var c of hi(f))qn.call(f,c)&&vi(i,c,f[c]);return i},we=(i,f)=>In(i,kn(f));import{c as Ae,a as O,h as _,i as wt,r as G,w as te,o as Me,g as Ee,l as St,u as Mi,b as Vi,s as $e,d as Wt,p as He,n as qe,e as Ye,f as jt,j as dt,k as pt,m as $i,T as Dn,q as An,t as Pn,v as Be,x as ht,y as yt,z as Fi,A as Tt,B as Ti,H as pi,C as zn,D as Kt,E as En,F as Mn,G as Vn,I as $n,J as it,K as Fn,L as Tn,M as Fe,N as Bn,O as Ln,P as Rn,Q as Ot,R as Bi,S as Li,U as _n,V as Hn,W as Nn,X as Wn,Y as st,Z as jn,_ as Kn,$ as Qn,a0 as Un,a1 as Jn,a2 as Pe,a3 as Te,a4 as pe,a5 as ve,a6 as Qt,a7 as nt,a8 as qt,a9 as yi,aa as mi,ab as vt,ac as ut,ad as Xn}from"./index.9f0a436e.js";import{h as et,a as Yn,Q as at,b as Ri,c as Bt,R as Gn,g as Dt,d as _i,e as Zn}from"./QBtn.3b8074d6.js";import{Q as Lt,u as Ut,a as Hi,b as Ni,c as Wi,d as Jt,e as Xt,f as ji,r as gi,g as er,h as Yt,i as Gt,j as Ki,k as Zt,l as ei,m as Qi,n as Rt,o as tr,p as ir,q as bi,s as nr,t as wi,v as _t,w as rr,x as Ui,y as Si,z as xi,A as ct,I as ar,B as lr,C as or,D as sr,E as At,F as Pt,G as zt,H as Et,J as ur}from"./IndexPage.34561c08.js";var cr=Ae({name:"QToolbarTitle",props:{shrink:Boolean},setup(i,{slots:f}){const c=O(()=>"q-toolbar__title ellipsis"+(i.shrink===!0?" col-shrink":""));return()=>_("div",{class:c.value},et(f.default))}}),fr=Ae({name:"QToolbar",props:{inset:Boolean},setup(i,{slots:f}){const c=O(()=>"q-toolbar row no-wrap items-center"+(i.inset===!0?" q-toolbar--inset":""));return()=>_("div",{class:c.value},et(f.default))}}),dr=Ae({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(i,{slots:f,emit:c}){const{proxy:{$q:m}}=Ee(),o=wt(St,()=>{console.error("QHeader needs to be child of QLayout")}),s=G(parseInt(i.heightHint,10)),d=G(!0),u=O(()=>i.reveal===!0||o.view.value.indexOf("H")>-1||m.platform.is.ios&&o.isContainer.value===!0),b=O(()=>{if(i.modelValue!==!0)return 0;if(u.value===!0)return d.value===!0?s.value:0;const B=s.value-o.scroll.value.position;return B>0?B:0}),h=O(()=>i.modelValue!==!0||u.value===!0&&d.value!==!0),w=O(()=>i.modelValue===!0&&h.value===!0&&i.reveal===!0),D=O(()=>"q-header q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-top"+(i.bordered===!0?" q-header--bordered":"")+(h.value===!0?" q-header--hidden":"")+(i.modelValue!==!0?" q-layout--prevent-focus":"")),q=O(()=>{const B=o.rows.value.top,Q={};return B[0]==="l"&&o.left.space===!0&&(Q[m.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),B[2]==="r"&&o.right.space===!0&&(Q[m.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),Q});function g(B,Q){o.update("header",B,Q)}function F(B,Q){B.value!==Q&&(B.value=Q)}function N({height:B}){F(s,B),g("size",B)}function A(B){w.value===!0&&F(d,!0),c("focusin",B)}te(()=>i.modelValue,B=>{g("space",B),F(d,!0),o.animate()}),te(b,B=>{g("offset",B)}),te(()=>i.reveal,B=>{B===!1&&F(d,i.modelValue)}),te(d,B=>{o.animate(),c("reveal",B)}),te(o.scroll,B=>{i.reveal===!0&&F(d,B.direction==="up"||B.position<=i.revealOffset||B.position-B.inflectionPoint<100)});const se={};return o.instances.header=se,i.modelValue===!0&&g("size",s.value),g("space",i.modelValue),g("offset",b.value),Me(()=>{o.instances.header===se&&(o.instances.header=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const B=Yn(f.default,[]);return i.elevated===!0&&B.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),B.push(_(Lt,{debounce:0,onResize:N})),_("header",{class:D.value,style:q.value,onFocusin:A},B)}}}),hr=Ae({name:"QAvatar",props:we(ee({},Mi),{fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean}),setup(i,{slots:f}){const c=Vi(i),m=O(()=>"q-avatar"+(i.color?` bg-${i.color}`:"")+(i.textColor?` text-${i.textColor} q-chip--colored`:"")+(i.square===!0?" q-avatar--square":i.rounded===!0?" rounded-borders":"")),o=O(()=>i.fontSize?{fontSize:i.fontSize}:null);return()=>{const s=i.icon!==void 0?[_(at,{name:i.icon})]:void 0;return _("div",{class:m.value,style:c.value},[_("div",{class:"q-avatar__content row flex-center overflow-hidden",style:o.value},Ri(f.default,s))])}}}),vr=Ae({name:"QField",inheritAttrs:!1,props:Ut,emits:Hi,setup(){return Ni(Wi())}});const pr={xs:8,sm:10,md:14,lg:20,xl:24};var Ji=Ae({name:"QChip",props:we(ee(ee({},Jt),Mi),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(i,{slots:f,emit:c}){const{proxy:{$q:m}}=Ee(),o=Xt(i,m),s=Vi(i,pr),d=O(()=>i.selected===!0||i.icon!==void 0),u=O(()=>i.selected===!0?i.iconSelected||m.iconSet.chip.selected:i.icon),b=O(()=>i.iconRemove||m.iconSet.chip.remove),h=O(()=>i.disable===!1&&(i.clickable===!0||i.selected!==null)),w=O(()=>{const A=i.outline===!0&&i.color||i.textColor;return"q-chip row inline no-wrap items-center"+(i.outline===!1&&i.color!==void 0?` bg-${i.color}`:"")+(A?` text-${A} q-chip--colored`:"")+(i.disable===!0?" disabled":"")+(i.dense===!0?" q-chip--dense":"")+(i.outline===!0?" q-chip--outline":"")+(i.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(i.square===!0?" q-chip--square":"")+(o.value===!0?" q-chip--dark q-dark":"")}),D=O(()=>i.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:i.tabindex||0});function q(A){A.keyCode===13&&g(A)}function g(A){i.disable||(c("update:selected",!i.selected),c("click",A))}function F(A){(A.keyCode===void 0||A.keyCode===13)&&($e(A),i.disable===!1&&(c("update:modelValue",!1),c("remove")))}function N(){const A=[];h.value===!0&&A.push(_("div",{class:"q-focus-helper"})),d.value===!0&&A.push(_(at,{class:"q-chip__icon q-chip__icon--left",name:u.value}));const se=i.label!==void 0?[_("div",{class:"ellipsis"},[i.label])]:void 0;return A.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ri(f.default,se))),i.iconRight&&A.push(_(at,{class:"q-chip__icon q-chip__icon--right",name:i.iconRight})),i.removable===!0&&A.push(_(at,we(ee({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:b.value},D.value),{onClick:F,onKeyup:F}))),A}return()=>{if(i.modelValue===!1)return;const A={class:w.value,style:s.value};return h.value===!0&&Object.assign(A,D.value,{onClick:g,onKeyup:q}),Bt("div",A,N(),"ripple",i.ripple!==!1&&i.disable!==!0,()=>[[Gn,i.ripple]])}}});const yr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function mr({showing:i,avoidEmit:f,configureAnchorEl:c}){const{props:m,proxy:o,emit:s}=Ee(),d=G(null);let u;function b(g){return d.value===null?!1:g===void 0||g.touches===void 0||g.touches.length<=1}const h={};c===void 0&&(Object.assign(h,{hide(g){o.hide(g)},toggle(g){o.toggle(g),g.qAnchorHandled=!0},toggleKey(g){Wt(g,13)===!0&&h.toggle(g)},contextClick(g){o.hide(g),He(g),qe(()=>{o.show(g),g.qAnchorHandled=!0})},prevent:He,mobileTouch(g){if(h.mobileCleanup(g),b(g)!==!0)return;o.hide(g),d.value.classList.add("non-selectable");const F=g.target;Ye(h,"anchor",[[F,"touchmove","mobileCleanup","passive"],[F,"touchend","mobileCleanup","passive"],[F,"touchcancel","mobileCleanup","passive"],[d.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{o.show(g),g.qAnchorHandled=!0},300)},mobileCleanup(g){d.value.classList.remove("non-selectable"),clearTimeout(u),i.value===!0&&g!==void 0&&ji()}}),c=function(g=m.contextMenu){if(m.noParentEvent===!0||d.value===null)return;let F;g===!0?o.$q.platform.is.mobile===!0?F=[[d.value,"touchstart","mobileTouch","passive"]]:F=[[d.value,"mousedown","hide","passive"],[d.value,"contextmenu","contextClick","notPassive"]]:F=[[d.value,"click","toggle","passive"],[d.value,"keyup","toggleKey","passive"]],Ye(h,"anchor",F)});function w(){dt(h,"anchor")}function D(g){for(d.value=g;d.value.classList.contains("q-anchor--skip");)d.value=d.value.parentNode;c()}function q(){if(m.target===!1||m.target==="")d.value=null;else if(m.target===!0)D(o.$el.parentNode);else{let g=m.target;if(typeof m.target=="string")try{g=document.querySelector(m.target)}catch{g=void 0}g!=null?(d.value=g.$el||g,c()):(d.value=null,console.error(`Anchor: target "${m.target}" not found`))}}return te(()=>m.contextMenu,g=>{d.value!==null&&(w(),c(g))}),te(()=>m.target,()=>{d.value!==null&&w(),q()}),te(()=>m.noParentEvent,g=>{d.value!==null&&(g===!0?w():c())}),jt(()=>{q(),f!==!0&&m.modelValue===!0&&d.value===null&&s("update:modelValue",!1)}),Me(()=>{clearTimeout(u),w()}),{anchorEl:d,canShow:b,anchorEvents:h}}function gr(i,f){const c=G(null);let m;function o(u,b){const h=`${b!==void 0?"add":"remove"}EventListener`,w=b!==void 0?b:m;u!==window&&u[h]("scroll",w,pt.passive),window[h]("scroll",w,pt.passive),m=b}function s(){c.value!==null&&(o(c.value),c.value=null)}const d=te(()=>i.noParentEvent,()=>{c.value!==null&&(s(),f())});return Me(d),{localScrollTarget:c,unconfigureScrollTarget:s,changeScrollEvent:o}}const lt=[];function br(i,f){do{if(i.$options.name==="QMenu"){if(i.hide(f),i.$props.separateClosePopup===!0)return Dt(i)}else if(i.__qPortalInnerRef!==void 0){const c=Dt(i);return c!==void 0&&c.$options.name==="QPopupProxy"?(i.hide(f),c):i}i=Dt(i)}while(i!=null)}function wr(i){for(i=i.parent;i!=null;){if(i.type.name==="QGlobalDialog")return!0;if(i.type.name==="QDialog"||i.type.name==="QMenu")return!1;i=i.parent}return!1}function Xi(i,f,c,m){const o=G(!1),s=G(!1);let d=null;const u={},b=m===!0&&wr(i);function h(D){if(D===!0){gi(u),s.value=!0;return}s.value=!1,o.value===!1&&(b===!1&&d===null&&(d=An()),o.value=!0,lt.push(i.proxy),er(u))}function w(D){if(s.value=!1,D!==!0)return;gi(u),o.value=!1;const q=lt.indexOf(i.proxy);q>-1&&lt.splice(q,1),d!==null&&(Pn(d),d=null)}return $i(()=>{w(!0)}),Object.assign(i.proxy,{__qPortalInnerRef:f}),{showPortal:h,hidePortal:w,portalIsActive:o,portalIsAccessible:s,renderPortal:()=>b===!0?c():o.value===!0?[_(Dn,{to:d},c())]:void 0}}const Yi={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Sr(i,f){const c=G(f.value);return te(f,m=>{qe(()=>{c.value=m})}),{transition:O(()=>"q-transition--"+(c.value===!0?i.transitionHide:i.transitionShow)),transitionStyle:O(()=>`--q-transition-duration: ${i.transitionDuration}ms`)}}const Ne=[];let Ze;function xr(i){Ze=i.keyCode===27}function Cr(){Ze===!0&&(Ze=!1)}function Ir(i){Ze===!0&&(Ze=!1,Wt(i,27)===!0&&Ne[Ne.length-1](i))}function Gi(i){window[i]("keydown",xr),window[i]("blur",Cr),window[i]("keyup",Ir),Ze=!1}function Zi(i){Be.is.desktop===!0&&(Ne.push(i),Ne.length===1&&Gi("addEventListener"))}function mt(i){const f=Ne.indexOf(i);f>-1&&(Ne.splice(f,1),Ne.length===0&&Gi("removeEventListener"))}const We=[];function en(i){We[We.length-1](i)}function tn(i){Be.is.desktop===!0&&(We.push(i),We.length===1&&document.body.addEventListener("focusin",en))}function Ht(i){const f=We.indexOf(i);f>-1&&(We.splice(f,1),We.length===0&&document.body.removeEventListener("focusin",en))}let nn;const{notPassiveCapture:gt}=pt,je=[];function bt(i){clearTimeout(nn);const f=i.target;if(f===void 0||f.nodeType===8||f.classList.contains("no-pointer-events")===!0)return;let c=lt.length-1;for(;c>=0;){const m=lt[c].$;if(m.type.name!=="QDialog")break;if(m.props.seamless!==!0)return;c--}for(let m=je.length-1;m>=0;m--){const o=je[m];if((o.anchorEl.value===null||o.anchorEl.value.contains(f)===!1)&&(f===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(f)===!1))i.qClickOutside=!0,o.onClickOutside(i);else return}}function kr(i){je.push(i),je.length===1&&(document.addEventListener("mousedown",bt,gt),document.addEventListener("touchstart",bt,gt))}function Ci(i){const f=je.findIndex(c=>c===i);f>-1&&(je.splice(f,1),je.length===0&&(clearTimeout(nn),document.removeEventListener("mousedown",bt,gt),document.removeEventListener("touchstart",bt,gt)))}let Ii,ki;function Oi(i){const f=i.split(" ");return f.length!==2?!1:["top","center","bottom"].includes(f[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(f[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Or(i){return i?!(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number"):!0}const Nt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(i=>{Nt[`${i}#ltr`]=i,Nt[`${i}#rtl`]=i});function qi(i,f){const c=i.split(" ");return{vertical:c[0],horizontal:Nt[`${c[1]}#${f===!0?"rtl":"ltr"}`]}}function qr(i,f){let{top:c,left:m,right:o,bottom:s,width:d,height:u}=i.getBoundingClientRect();return f!==void 0&&(c-=f[1],m-=f[0],s+=f[1],o+=f[0],d+=f[0],u+=f[1]),{top:c,left:m,right:o,bottom:s,width:d,height:u,middle:m+(o-m)/2,center:c+(s-c)/2}}function Dr(i){return{top:0,center:i.offsetHeight/2,bottom:i.offsetHeight,left:0,middle:i.offsetWidth/2,right:i.offsetWidth}}function Ar(i){if(Be.is.ios===!0&&window.visualViewport!==void 0){const u=document.body.style,{offsetLeft:b,offsetTop:h}=window.visualViewport;b!==Ii&&(u.setProperty("--q-pe-left",b+"px"),Ii=b),h!==ki&&(u.setProperty("--q-pe-top",h+"px"),ki=h)}let f;const{scrollLeft:c,scrollTop:m}=i.el;if(i.absoluteOffset===void 0)f=qr(i.anchorEl,i.cover===!0?[0,0]:i.offset);else{const{top:u,left:b}=i.anchorEl.getBoundingClientRect(),h=u+i.absoluteOffset.top,w=b+i.absoluteOffset.left;f={top:h,left:w,width:1,height:1,right:w+1,center:h,middle:w,bottom:h+1}}let o={maxHeight:i.maxHeight,maxWidth:i.maxWidth,visibility:"visible"};(i.fit===!0||i.cover===!0)&&(o.minWidth=f.width+"px",i.cover===!0&&(o.minHeight=f.height+"px")),Object.assign(i.el.style,o);const s=Dr(i.el),d={top:f[i.anchorOrigin.vertical]-s[i.selfOrigin.vertical],left:f[i.anchorOrigin.horizontal]-s[i.selfOrigin.horizontal]};Pr(d,f,s,i.anchorOrigin,i.selfOrigin),o={top:d.top+"px",left:d.left+"px"},d.maxHeight!==void 0&&(o.maxHeight=d.maxHeight+"px",f.height>d.maxHeight&&(o.minHeight=o.maxHeight)),d.maxWidth!==void 0&&(o.maxWidth=d.maxWidth+"px",f.width>d.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(i.el.style,o),i.el.scrollTop!==m&&(i.el.scrollTop=m),i.el.scrollLeft!==c&&(i.el.scrollLeft=c)}function Pr(i,f,c,m,o){const s=c.bottom,d=c.right,u=ht(),b=window.innerHeight-u,h=document.body.clientWidth;if(i.top<0||i.top+s>b)if(o.vertical==="center")i.top=f[m.vertical]>b/2?Math.max(0,b-s):0,i.maxHeight=Math.min(s,b);else if(f[m.vertical]>b/2){const w=Math.min(b,m.vertical==="center"?f.center:m.vertical===o.vertical?f.bottom:f.top);i.maxHeight=Math.min(s,w),i.top=Math.max(0,w-s)}else i.top=Math.max(0,m.vertical==="center"?f.center:m.vertical===o.vertical?f.top:f.bottom),i.maxHeight=Math.min(s,b-i.top);if(i.left<0||i.left+d>h)if(i.maxWidth=Math.min(d,h),o.horizontal==="middle")i.left=f[m.horizontal]>h/2?Math.max(0,h-d):0;else if(f[m.horizontal]>h/2){const w=Math.min(h,m.horizontal==="middle"?f.middle:m.horizontal===o.horizontal?f.right:f.left);i.maxWidth=Math.min(d,w),i.left=Math.max(0,w-i.maxWidth)}else i.left=Math.max(0,m.horizontal==="middle"?f.middle:m.horizontal===o.horizontal?f.left:f.right),i.maxWidth=Math.min(d,h-i.left)}var zr=Ae({name:"QMenu",inheritAttrs:!1,props:we(ee(ee(ee(ee({},yr),Yt),Jt),Yi),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Oi},self:{type:String,validator:Oi},offset:{type:Array,validator:Or},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...Gt,"click","escape-key"],setup(i,{slots:f,emit:c,attrs:m}){let o=null,s,d,u;const b=Ee(),{proxy:h}=b,{$q:w}=h,D=G(null),q=G(!1),g=O(()=>i.persistent!==!0&&i.noRouteDismiss!==!0),F=Xt(i,w),{registerTick:N,removeTick:A}=Ki(),{registerTimeout:se,removeTimeout:B}=Zt(),{transition:Q,transitionStyle:H}=Sr(i,q),{localScrollTarget:j,changeScrollEvent:ne,unconfigureScrollTarget:z}=gr(i,ie),{anchorEl:ae,canShow:le}=mr({showing:q}),{hide:ce}=ei({showing:q,canShow:le,handleShow:x,handleHide:P,hideOnRouteChange:g,processOnMount:!0}),{showPortal:de,hidePortal:W,renderPortal:Se}=Xi(b,D,t),U={anchorEl:ae,innerRef:D,onClickOutside(n){if(i.persistent!==!0&&q.value===!0)return ce(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&$e(n),!0}},k=O(()=>qi(i.anchor||(i.cover===!0?"center middle":"bottom start"),w.lang.rtl)),ge=O(()=>i.cover===!0?k.value:qi(i.self||"top start",w.lang.rtl)),ke=O(()=>(i.square===!0?" q-menu--square":"")+(F.value===!0?" q-menu--dark q-dark":"")),xe=O(()=>i.autoClose===!0?{onClick:ue}:{}),Ce=O(()=>q.value===!0&&i.persistent!==!0);te(Ce,n=>{n===!0?(Zi(J),kr(U)):(mt(J),Ci(U))});function ye(){Qi(()=>{let n=D.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function x(n){if(A(),B(),o=i.noRefocus===!1?document.activeElement:null,tn(K),de(),ie(),s=void 0,n!==void 0&&(i.touchPosition||i.contextMenu)){const r=yt(n);if(r.left!==void 0){const{top:a,left:l}=ae.value.getBoundingClientRect();s={left:r.left-l,top:r.top-a}}}d===void 0&&(d=te(()=>w.screen.width+"|"+w.screen.height+"|"+i.self+"|"+i.anchor+"|"+w.lang.rtl,e)),i.noFocus!==!0&&document.activeElement.blur(),N(()=>{e(),i.noFocus!==!0&&ye()}),se(()=>{w.platform.is.ios===!0&&(u=i.autoClose,D.value.click()),e(),de(!0),c("show",n)},i.transitionDuration)}function P(n){A(),B(),W(),X(!0),o!==null&&(n===void 0||n.qClickOutside!==!0)&&(o.focus(),o=null),se(()=>{W(!0),c("hide",n)},i.transitionDuration)}function X(n){s=void 0,d!==void 0&&(d(),d=void 0),(n===!0||q.value===!0)&&(Ht(K),z(),Ci(U),mt(J)),n!==!0&&(o=null)}function ie(){(ae.value!==null||i.scrollTarget!==void 0)&&(j.value=Fi(ae.value,i.scrollTarget),ne(j.value,e))}function ue(n){u!==!0?(br(h,n),c("click",n)):u=!1}function K(n){Ce.value===!0&&i.noFocus!==!0&&Ti(D.value,n.target)!==!0&&ye()}function J(n){c("escape-key"),ce(n)}function e(){const n=D.value;n===null||ae.value===null||Ar({el:n,offset:i.offset,anchorEl:ae.value,anchorOrigin:k.value,selfOrigin:ge.value,absoluteOffset:s,fit:i.fit,cover:i.cover,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function t(){return _(Tt,{name:Q.value,appear:!0},()=>q.value===!0?_("div",ee(we(ee({},m),{ref:D,tabindex:-1,class:["q-menu q-position-engine scroll"+ke.value,m.class],style:[m.style,H.value]}),xe.value),et(f.default)):null)}return Me(X),Object.assign(h,{focus:ye,updatePosition:e}),Se}});function rn(i,f,c){let m;function o(){m!==void 0&&(pi.remove(m),m=void 0)}return Me(()=>{i.value===!0&&o()}),{removeFromHistory:o,addToHistory(){m={condition:()=>c.value===!0,handler:f},pi.add(m)}}}function an(){let i;return{preventBodyScroll(f){f!==i&&(i!==void 0||f===!0)&&(i=f,zn(f))}}}let ft=0;const Er={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Di={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Mr=Ae({name:"QDialog",inheritAttrs:!1,props:we(ee(ee({},Yt),Yi),{transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:i=>i==="standard"||["top","bottom","left","right"].includes(i)}}),emits:[...Gt,"shake","click","escape-key"],setup(i,{slots:f,emit:c,attrs:m}){const o=Ee(),s=G(null),d=G(!1),u=G(!1),b=G(!1);let h,w=null,D,q;const g=O(()=>i.persistent!==!0&&i.noRouteDismiss!==!0&&i.seamless!==!0),{preventBodyScroll:F}=an(),{registerTimeout:N,removeTimeout:A}=Zt(),{registerTick:se,removeTick:B}=Ki(),{showPortal:Q,hidePortal:H,portalIsAccessible:j,renderPortal:ne}=Xi(o,s,e,!0),{hide:z}=ei({showing:d,hideOnRouteChange:g,handleShow:xe,handleHide:Ce,processOnMount:!0}),{addToHistory:ae,removeFromHistory:le}=rn(d,z,g),ce=O(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${i.maximized===!0?"maximized":"minimized"} q-dialog__inner--${i.position} ${Er[i.position]}`+(b.value===!0?" q-dialog__inner--animating":"")+(i.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(i.fullHeight===!0?" q-dialog__inner--fullheight":"")+(i.square===!0?" q-dialog__inner--square":"")),de=O(()=>"q-transition--"+(i.transitionShow===void 0?Di[i.position][0]:i.transitionShow)),W=O(()=>"q-transition--"+(i.transitionHide===void 0?Di[i.position][1]:i.transitionHide)),Se=O(()=>u.value===!0?W.value:de.value),U=O(()=>`--q-transition-duration: ${i.transitionDuration}ms`),k=O(()=>d.value===!0&&i.seamless!==!0),ge=O(()=>i.autoClose===!0?{onClick:ue}:{}),ke=O(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${k.value===!0?"modal":"seamless"}`,m.class]);te(d,t=>{qe(()=>{u.value=t})}),te(()=>i.maximized,t=>{d.value===!0&&ie(t)}),te(k,t=>{F(t),t===!0?(tn(J),Zi(P)):(Ht(J),mt(P))});function xe(t){A(),B(),ae(),w=i.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,ie(i.maximized),Q(),b.value=!0,i.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),se(ye)),N(()=>{if(o.proxy.$q.platform.is.ios===!0){if(i.seamless!==!0&&document.activeElement){const{top:n,bottom:r}=document.activeElement.getBoundingClientRect(),{innerHeight:a}=window,l=window.visualViewport!==void 0?window.visualViewport.height:a;n>0&&r>l/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-l,r>=a?1/0:Math.ceil(document.scrollingElement.scrollTop+r-l/2))),document.activeElement.scrollIntoView()}q=!0,s.value.click(),q=!1}Q(!0),b.value=!1,c("show",t)},i.transitionDuration)}function Ce(t){A(),B(),le(),X(!0),b.value=!0,H(),w!==null&&(w.focus(),w=null),N(()=>{H(!0),b.value=!1,c("hide",t)},i.transitionDuration)}function ye(t){Qi(()=>{let n=s.value;n===null||n.contains(document.activeElement)===!0||(n=n.querySelector(t||"[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function x(){ye(),c("shake");const t=s.value;t!==null&&(t.classList.remove("q-animate--scale"),t.classList.add("q-animate--scale"),clearTimeout(h),h=setTimeout(()=>{s.value!==null&&(t.classList.remove("q-animate--scale"),ye())},170))}function P(){i.seamless!==!0&&(i.persistent===!0||i.noEscDismiss===!0?i.maximized!==!0&&i.noShake!==!0&&x():(c("escape-key"),z()))}function X(t){clearTimeout(h),(t===!0||d.value===!0)&&(ie(!1),i.seamless!==!0&&(F(!1),Ht(J),mt(P))),t!==!0&&(w=null)}function ie(t){t===!0?D!==!0&&(ft<1&&document.body.classList.add("q-body--dialog"),ft++,D=!0):D===!0&&(ft<2&&document.body.classList.remove("q-body--dialog"),ft--,D=!1)}function ue(t){q!==!0&&(z(t),c("click",t))}function K(t){i.persistent!==!0&&i.noBackdropDismiss!==!0?z(t):i.noShake!==!0&&x()}function J(t){j.value===!0&&Ti(s.value,t.target)!==!0&&ye('[tabindex]:not([tabindex="-1"])')}Object.assign(o.proxy,{focus:ye,shake:x,__updateRefocusTarget(t){w=t||null}}),Me(X);function e(){return _("div",we(ee({},m),{class:ke.value}),[_(Tt,{name:"q-transition--fade",appear:!0},()=>k.value===!0?_("div",{class:"q-dialog__backdrop fixed-full",style:U.value,"aria-hidden":"true",onMousedown:K}):null),_(Tt,{name:Se.value,appear:!0},()=>d.value===!0?_("div",ee({ref:s,class:ce.value,style:U.value,tabindex:-1},ge.value),et(f.default)):null)])}return ne}});const ze=1e3,Vr=["start","center","end","start-force","center-force","end-force"],ln=Array.prototype.filter,$r=window.getComputedStyle(document.body).overflowAnchor===void 0?Kt:function(i,f){requestAnimationFrame(()=>{if(i===null)return;const c=i.children||[];ln.call(c,o=>o.dataset&&o.dataset.qVsAnchor!==void 0).forEach(o=>{delete o.dataset.qVsAnchor});const m=c[f];m&&m.dataset&&(m.dataset.qVsAnchor="")})};function Ge(i,f){return i+f}function Mt(i,f,c,m,o,s,d,u){const b=i===window?document.scrollingElement||document.documentElement:i,h=o===!0?"offsetWidth":"offsetHeight",w={scrollStart:0,scrollViewSize:-d-u,scrollMaxSize:0,offsetStart:-d,offsetEnd:-u};if(o===!0?(i===window?(w.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,w.scrollViewSize+=document.documentElement.clientWidth):(w.scrollStart=b.scrollLeft,w.scrollViewSize+=b.clientWidth),w.scrollMaxSize=b.scrollWidth,s===!0&&(w.scrollStart=(Rt===!0?w.scrollMaxSize-w.scrollViewSize:0)-w.scrollStart)):(i===window?(w.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,w.scrollViewSize+=document.documentElement.clientHeight):(w.scrollStart=b.scrollTop,w.scrollViewSize+=b.clientHeight),w.scrollMaxSize=b.scrollHeight),c!==null)for(let D=c.previousElementSibling;D!==null;D=D.previousElementSibling)D.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetStart+=D[h]);if(m!==null)for(let D=m.nextElementSibling;D!==null;D=D.nextElementSibling)D.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetEnd+=D[h]);if(f!==i){const D=b.getBoundingClientRect(),q=f.getBoundingClientRect();o===!0?(w.offsetStart+=q.left-D.left,w.offsetEnd-=q.width):(w.offsetStart+=q.top-D.top,w.offsetEnd-=q.height),i!==window&&(w.offsetStart+=w.scrollStart),w.offsetEnd+=w.scrollMaxSize-w.offsetStart}return w}function Ai(i,f,c,m){f==="end"&&(f=(i===window?document.body:i)[c===!0?"scrollWidth":"scrollHeight"]),i===window?c===!0?(m===!0&&(f=(Rt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-f),window.scrollTo(f,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f):c===!0?(m===!0&&(f=(Rt===!0?i.scrollWidth-i.offsetWidth:0)-f),i.scrollLeft=f):i.scrollTop=f}function rt(i,f,c,m){if(c>=m)return 0;const o=f.length,s=Math.floor(c/ze),d=Math.floor((m-1)/ze)+1;let u=i.slice(s,d).reduce(Ge,0);return c%ze!==0&&(u-=f.slice(s*ze,c).reduce(Ge,0)),m%ze!==0&&m!==o&&(u-=f.slice(m,d*ze).reduce(Ge,0)),u}const Fr={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Tr=ee({virtualScrollHorizontal:Boolean,onVirtualScroll:Function},Fr);function Br({virtualScrollLength:i,getVirtualScrollTarget:f,getVirtualScrollEl:c,virtualScrollItemSizeComputed:m}){const o=Ee(),{props:s,emit:d,proxy:u}=o,{$q:b}=u;let h,w,D,q=[],g;const F=G(0),N=G(0),A=G({}),se=G(null),B=G(null),Q=G(null),H=G({from:0,to:0}),j=O(()=>s.tableColspan!==void 0?s.tableColspan:100);m===void 0&&(m=O(()=>s.virtualScrollItemSize));const ne=O(()=>m.value+";"+s.virtualScrollHorizontal),z=O(()=>ne.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);te(z,()=>{ge()}),te(ne,ae);function ae(){k(w,!0)}function le(x){k(x===void 0?w:x)}function ce(x,P){const X=f();if(X==null||X.nodeType===8)return;const ie=Mt(X,c(),se.value,B.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);D!==ie.scrollViewSize&&ge(ie.scrollViewSize),W(X,ie,Math.min(i.value-1,Math.max(0,parseInt(x,10)||0)),0,Vr.indexOf(P)>-1?P:w>-1&&x>w?"end":"start")}function de(){const x=f();if(x==null||x.nodeType===8)return;const P=Mt(x,c(),se.value,B.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),X=i.value-1,ie=P.scrollMaxSize-P.offsetStart-P.offsetEnd-N.value;if(h===P.scrollStart)return;if(P.scrollMaxSize<=0){W(x,P,0,0);return}D!==P.scrollViewSize&&ge(P.scrollViewSize),Se(H.value.from);const ue=Math.floor(P.scrollMaxSize-Math.max(P.scrollViewSize,P.offsetEnd)-Math.min(g[X],P.scrollViewSize/2));if(ue>0&&Math.ceil(P.scrollStart)>=ue){W(x,P,X,P.scrollMaxSize-P.offsetEnd-q.reduce(Ge,0));return}let K=0,J=P.scrollStart-P.offsetStart,e=J;if(J<=ie&&J+P.scrollViewSize>=F.value)J-=F.value,K=H.value.from,e=J;else for(let t=0;J>=q[t]&&K<X;t++)J-=q[t],K+=ze;for(;J>0&&K<X;)J-=g[K],J>-P.scrollViewSize?(K++,e=J):e=g[K]+J;W(x,P,K,e)}function W(x,P,X,ie,ue){const K=typeof ue=="string"&&ue.indexOf("-force")>-1,J=K===!0?ue.replace("-force",""):ue,e=J!==void 0?J:"start";let t=Math.max(0,X-A.value[e]),n=t+A.value.total;n>i.value&&(n=i.value,t=Math.max(0,n-A.value.total)),h=P.scrollStart;const r=t!==H.value.from||n!==H.value.to;if(r===!1&&J===void 0){xe(X);return}const{activeElement:a}=document,l=Q.value;r===!0&&l!==null&&l!==a&&l.contains(a)===!0&&(l.addEventListener("focusout",U),setTimeout(()=>{l!==null&&l.removeEventListener("focusout",U)})),$r(l,X-t);const v=J!==void 0?g.slice(t,X).reduce(Ge,0):0;if(r===!0){const y=n>=H.value.from&&t<=H.value.to?H.value.to:n;H.value={from:t,to:y},F.value=rt(q,g,0,t),N.value=rt(q,g,n,i.value),requestAnimationFrame(()=>{H.value.to!==n&&h===P.scrollStart&&(H.value={from:H.value.from,to:n},N.value=rt(q,g,n,i.value))})}requestAnimationFrame(()=>{if(h!==P.scrollStart)return;r===!0&&Se(t);const y=g.slice(t,X).reduce(Ge,0),I=y+P.offsetStart+F.value,C=I+g[X];let E=I+ie;if(J!==void 0){const $=y-v,M=P.scrollStart+$;E=K!==!0&&M<I&&C<M+P.scrollViewSize?M:J==="end"?C-P.scrollViewSize:I-(J==="start"?0:Math.round((P.scrollViewSize-g[X])/2))}h=E,Ai(x,E,s.virtualScrollHorizontal,b.lang.rtl),xe(X)})}function Se(x){const P=Q.value;if(P){const X=ln.call(P.children,t=>t.classList&&t.classList.contains("q-virtual-scroll--skip")===!1),ie=X.length,ue=s.virtualScrollHorizontal===!0?t=>t.getBoundingClientRect().width:t=>t.offsetHeight;let K=x,J,e;for(let t=0;t<ie;){for(J=ue(X[t]),t++;t<ie&&X[t].classList.contains("q-virtual-scroll--with-prev")===!0;)J+=ue(X[t]),t++;e=J-g[K],e!==0&&(g[K]+=e,q[Math.floor(K/ze)]+=e),K++}}}function U(){Q.value!==null&&Q.value!==void 0&&Q.value.focus()}function k(x,P){const X=1*m.value;(P===!0||Array.isArray(g)===!1)&&(g=[]);const ie=g.length;g.length=i.value;for(let K=i.value-1;K>=ie;K--)g[K]=X;const ue=Math.floor((i.value-1)/ze);q=[];for(let K=0;K<=ue;K++){let J=0;const e=Math.min((K+1)*ze,i.value);for(let t=K*ze;t<e;t++)J+=g[t];q.push(J)}w=-1,h=void 0,F.value=rt(q,g,0,H.value.from),N.value=rt(q,g,H.value.to,i.value),x>=0?(Se(H.value.from),qe(()=>{ce(x)})):Ce()}function ge(x){if(x===void 0&&typeof window!="undefined"){const J=f();J!=null&&J.nodeType!==8&&(x=Mt(J,c(),se.value,B.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}D=x;const P=parseFloat(s.virtualScrollSliceRatioBefore)||0,X=parseFloat(s.virtualScrollSliceRatioAfter)||0,ie=1+P+X,ue=x===void 0||x<=0?1:Math.ceil(x/m.value),K=Math.max(1,ue,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/ie));A.value={total:Math.ceil(K*ie),start:Math.ceil(K*P),center:Math.ceil(K*(.5+P)),end:Math.ceil(K*(1+P)),view:ue}}function ke(x,P){const X=s.virtualScrollHorizontal===!0?"width":"height",ie={["--q-virtual-scroll-item-"+X]:m.value+"px"};return[x==="tbody"?_(x,{class:"q-virtual-scroll__padding",key:"before",ref:se},[_("tr",[_("td",{style:ee({[X]:`${F.value}px`},ie),colspan:j.value})])]):_(x,{class:"q-virtual-scroll__padding",key:"before",ref:se,style:ee({[X]:`${F.value}px`},ie)}),_(x,{class:"q-virtual-scroll__content",key:"content",ref:Q,tabindex:-1},P.flat()),x==="tbody"?_(x,{class:"q-virtual-scroll__padding",key:"after",ref:B},[_("tr",[_("td",{style:ee({[X]:`${N.value}px`},ie),colspan:j.value})])]):_(x,{class:"q-virtual-scroll__padding",key:"after",ref:B,style:ee({[X]:`${N.value}px`},ie)})]}function xe(x){w!==x&&(s.onVirtualScroll!==void 0&&d("virtual-scroll",{index:x,from:H.value.from,to:H.value.to-1,direction:x<w?"decrease":"increase",ref:u}),w=x)}ge();const Ce=En(de,b.platform.is.ios===!0?120:35);Mn(()=>{ge()});let ye=!1;return Vn(()=>{ye=!0}),$n(()=>{if(ye!==!0)return;const x=f();h!==void 0&&x!==void 0&&x!==null&&x.nodeType!==8?Ai(x,h,s.virtualScrollHorizontal,b.lang.rtl):ce(w)}),Me(()=>{Ce.cancel()}),Object.assign(u,{scrollTo:ce,reset:ae,refresh:le}),{virtualScrollSliceRange:H,virtualScrollSliceSizeComputed:A,setVirtualScrollSize:ge,onVirtualScrollEvt:Ce,localResetVirtualScroll:k,padVirtualScroll:ke,scrollTo:ce,reset:ae,refresh:le}}const Pi=i=>["add","add-unique","toggle"].includes(i),Lr=".*+?^${}()|[]\\",Rr=Object.keys(Ut);var Vt=Ae({name:"QSelect",inheritAttrs:!1,props:we(ee(ee(ee({},Tr),tr),Ut),{modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Pi},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:i=>["default","menu","dialog"].includes(i),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function}),emits:[...Hi,"add","remove","input-value","keyup","keypress","keydown","filter-abort"],setup(i,{slots:f,emit:c}){const{proxy:m}=Ee(),{$q:o}=m,s=G(!1),d=G(!1),u=G(-1),b=G(""),h=G(!1),w=G(!1);let D,q,g,F,N,A,se,B,Q;const H=G(null),j=G(null),ne=G(null),z=G(null),ae=G(null),le=ir(i),ce=nr(si),de=O(()=>Array.isArray(i.options)?i.options.length:0),W=O(()=>i.virtualScrollItemSize===void 0?i.optionsDense===!0?24:48:i.virtualScrollItemSize),{virtualScrollSliceRange:Se,virtualScrollSliceSizeComputed:U,localResetVirtualScroll:k,padVirtualScroll:ge,onVirtualScrollEvt:ke,reset:xe,scrollTo:Ce,setVirtualScrollSize:ye}=Br({virtualScrollLength:de,getVirtualScrollTarget:cn,getVirtualScrollEl:li,virtualScrollItemSizeComputed:W}),x=Wi(),P=O(()=>{const p=i.mapOptions===!0&&i.multiple!==!0,L=i.modelValue!==void 0&&(i.modelValue!==null||p===!0)?i.multiple===!0&&Array.isArray(i.modelValue)?i.modelValue:[i.modelValue]:[];if(i.mapOptions===!0&&Array.isArray(i.options)===!0){const T=i.mapOptions===!0&&q!==void 0?q:[],Z=L.map(fe=>un(fe,T));return i.modelValue===null&&p===!0?Z.filter(fe=>fe!==null):Z}return L}),X=O(()=>{const p={};return Rr.forEach(L=>{const T=i[L];T!==void 0&&(p[L]=T)}),p}),ie=O(()=>i.optionsDark===null?x.isDark.value:i.optionsDark),ue=O(()=>bi(P.value)),K=O(()=>{let p="q-field__input q-placeholder col";return i.hideSelected===!0||P.value.length===0?[p,i.inputClass]:(p+=" q-field__input--padding",i.inputClass===void 0?p:[p,i.inputClass])}),J=O(()=>(i.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(i.popupContentClass?" "+i.popupContentClass:"")),e=O(()=>de.value===0),t=O(()=>P.value.map(p=>V.value(p)).join(", ")),n=O(()=>i.optionsHtml===!0?()=>!0:p=>p!=null&&p.html===!0),r=O(()=>i.displayValueHtml===!0||i.displayValue===void 0&&(i.optionsHtml===!0||P.value.some(n.value))),a=O(()=>x.focused.value===!0?i.tabindex:-1),l=O(()=>({tabindex:i.tabindex,role:"combobox","aria-label":i.label,"aria-autocomplete":i.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-owns":`${x.targetUid.value}_lb`,"aria-controls":`${x.targetUid.value}_lb`})),v=O(()=>{const p={id:`${x.targetUid.value}_lb`,role:"listbox","aria-multiselectable":i.multiple===!0?"true":"false"};return u.value>=0&&(p["aria-activedescendant"]=`${x.targetUid.value}_${u.value}`),p}),y=O(()=>P.value.map((p,L)=>({index:L,opt:p,html:n.value(p),selected:!0,removeAtIndex:De,toggleOption:Oe,tabindex:a.value}))),I=O(()=>{if(de.value===0)return[];const{from:p,to:L}=Se.value;return i.options.slice(p,L).map((T,Z)=>{const fe=S.value(T)===!0,oe=p+Z,me={clickable:!0,active:!1,activeClass:$.value,manualFocus:!0,focused:!1,disable:fe,tabindex:-1,dense:i.optionsDense,dark:ie.value,role:"option",id:`${x.targetUid.value}_${oe}`,onClick:()=>{Oe(T)}};return fe!==!0&&(Ct(T)===!0&&(me.active=!0),u.value===oe&&(me.focused=!0),me["aria-selected"]=me.active===!0?"true":"false",o.platform.is.desktop===!0&&(me.onMousemove=()=>{s.value===!0&&be(oe)})),{index:oe,opt:T,html:n.value(T),label:V.value(T),selected:me.active,focused:me.focused,toggleOption:Oe,setOptionIndex:be,itemProps:me}})}),C=O(()=>i.dropdownIcon!==void 0?i.dropdownIcon:o.iconSet.arrow.dropdown),E=O(()=>i.optionsCover===!1&&i.outlined!==!0&&i.standout!==!0&&i.borderless!==!0&&i.rounded!==!0),$=O(()=>i.optionsSelectedClass!==void 0?i.optionsSelectedClass:i.color!==void 0?`text-${i.color}`:""),M=O(()=>xt(i.optionValue,"value")),V=O(()=>xt(i.optionLabel,"label")),S=O(()=>xt(i.optionDisable,"disable")),R=O(()=>P.value.map(p=>M.value(p))),re=O(()=>{const p={onInput:si,onChange:ce,onKeydown:ai,onKeyup:ni,onKeypress:ri,onFocus:ti,onClick(L){g===!0&&Fe(L)}};return p.onCompositionstart=p.onCompositionupdate=p.onCompositionend=ce,p});te(P,p=>{q=p,i.useInput===!0&&i.fillInput===!0&&i.multiple!==!0&&x.innerLoading.value!==!0&&(d.value!==!0&&s.value!==!0||ue.value!==!0)&&(F!==!0&&Je(),(d.value===!0||s.value===!0)&&Ke(""))},{immediate:!0}),te(()=>i.fillInput,Je),te(s,It),te(de,xn);function he(p){return i.emitValue===!0?M.value(p):p}function Y(p){if(p>-1&&p<P.value.length)if(i.multiple===!0){const L=i.modelValue.slice();c("remove",{index:p,value:L.splice(p,1)[0]}),c("update:modelValue",L)}else c("update:modelValue",null)}function De(p){Y(p),x.focus()}function Le(p,L){const T=he(p);if(i.multiple!==!0){i.fillInput===!0&&tt(V.value(p),!0,!0),c("update:modelValue",T);return}if(P.value.length===0){c("add",{index:0,value:T}),c("update:modelValue",i.multiple===!0?[T]:T);return}if(L===!0&&Ct(p)===!0||i.maxValues!==void 0&&i.modelValue.length>=i.maxValues)return;const Z=i.modelValue.slice();c("add",{index:Z.length,value:T}),Z.push(T),c("update:modelValue",Z)}function Oe(p,L){if(x.editable.value!==!0||p===void 0||S.value(p)===!0)return;const T=M.value(p);if(i.multiple!==!0){L!==!0&&(tt(i.fillInput===!0?V.value(p):"",!0,!0),Re()),j.value!==null&&j.value.focus(),(P.value.length===0||it(M.value(P.value[0]),T)!==!0)&&c("update:modelValue",i.emitValue===!0?T:p);return}if((g!==!0||h.value===!0)&&x.focus(),ti(),P.value.length===0){const oe=i.emitValue===!0?T:p;c("add",{index:0,value:oe}),c("update:modelValue",i.multiple===!0?[oe]:oe);return}const Z=i.modelValue.slice(),fe=R.value.findIndex(oe=>it(oe,T));if(fe>-1)c("remove",{index:fe,value:Z.splice(fe,1)[0]});else{if(i.maxValues!==void 0&&Z.length>=i.maxValues)return;const oe=i.emitValue===!0?T:p;c("add",{index:Z.length,value:oe}),Z.push(oe)}c("update:modelValue",Z)}function be(p){if(o.platform.is.desktop!==!0)return;const L=p>-1&&p<de.value?p:-1;u.value!==L&&(u.value=L)}function Ve(p=1,L){if(s.value===!0){let T=u.value;do T=wi(T+p,-1,de.value-1);while(T!==-1&&T!==u.value&&S.value(i.options[T])===!0);u.value!==T&&(be(T),Ce(T),L!==!0&&i.useInput===!0&&i.fillInput===!0&&ot(T>=0?V.value(i.options[T]):A))}}function un(p,L){const T=Z=>it(M.value(Z),p);return i.options.find(T)||L.find(T)||p}function xt(p,L){const T=p!==void 0?p:L;return typeof T=="function"?T:Z=>Z!==null&&typeof Z=="object"&&T in Z?Z[T]:Z}function Ct(p){const L=M.value(p);return R.value.find(T=>it(T,L))!==void 0}function ti(p){i.useInput===!0&&j.value!==null&&(p===void 0||j.value===p.target&&p.target.value===t.value)&&j.value.select()}function ii(p){Wt(p,27)===!0&&s.value===!0&&(Fe(p),Re(),Je()),c("keyup",p)}function ni(p){const{value:L}=p.target;if(p.keyCode!==void 0){ii(p);return}if(p.target.value="",clearTimeout(D),Je(),typeof L=="string"&&L.length>0){const T=L.toLocaleLowerCase(),Z=oe=>{const me=i.options.find(Ie=>oe.value(Ie).toLocaleLowerCase()===T);return me===void 0?!1:(P.value.indexOf(me)===-1?Oe(me):Re(),!0)},fe=oe=>{Z(M)!==!0&&(Z(V)===!0||oe===!0||Ke(L,!0,()=>fe(!0)))};fe()}else x.clearValue(p)}function ri(p){c("keypress",p)}function ai(p){if(c("keydown",p),Bn(p)===!0)return;const L=b.value.length>0&&(i.newValueMode!==void 0||i.onNewValue!==void 0),T=p.shiftKey!==!0&&i.multiple!==!0&&(u.value>-1||L===!0);if(p.keyCode===27){He(p);return}if(p.keyCode===9&&T===!1){Qe();return}if(p.target===void 0||p.target.id!==x.targetUid.value)return;if(p.keyCode===40&&x.innerLoading.value!==!0&&s.value===!1){$e(p),Ue();return}if(p.keyCode===8&&i.hideSelected!==!0&&b.value.length===0){i.multiple===!0&&Array.isArray(i.modelValue)===!0?Y(i.modelValue.length-1):i.multiple!==!0&&i.modelValue!==null&&c("update:modelValue",null);return}(p.keyCode===35||p.keyCode===36)&&(typeof b.value!="string"||b.value.length===0)&&($e(p),u.value=-1,Ve(p.keyCode===36?1:-1,i.multiple)),(p.keyCode===33||p.keyCode===34)&&U.value!==void 0&&($e(p),u.value=Math.max(-1,Math.min(de.value,u.value+(p.keyCode===33?-1:1)*U.value.view)),Ve(p.keyCode===33?1:-1,i.multiple)),(p.keyCode===38||p.keyCode===40)&&($e(p),Ve(p.keyCode===38?-1:1,i.multiple));const Z=de.value;if((B===void 0||Q<Date.now())&&(B=""),Z>0&&i.useInput!==!0&&p.key!==void 0&&p.key.length===1&&p.altKey===p.ctrlKey&&(p.keyCode!==32||B.length>0)){s.value!==!0&&Ue(p);const fe=p.key.toLocaleLowerCase(),oe=B.length===1&&B[0]===fe;Q=Date.now()+1500,oe===!1&&($e(p),B+=fe);const me=new RegExp("^"+B.split("").map(kt=>Lr.indexOf(kt)>-1?"\\"+kt:kt).join(".*"),"i");let Ie=u.value;if(oe===!0||Ie<0||me.test(V.value(i.options[Ie]))!==!0)do Ie=wi(Ie+1,-1,Z-1);while(Ie!==u.value&&(S.value(i.options[Ie])===!0||me.test(V.value(i.options[Ie]))!==!0));u.value!==Ie&&qe(()=>{be(Ie),Ce(Ie),Ie>=0&&i.useInput===!0&&i.fillInput===!0&&ot(V.value(i.options[Ie]))});return}if(!(p.keyCode!==13&&(p.keyCode!==32||i.useInput===!0||B!=="")&&(p.keyCode!==9||T===!1))){if(p.keyCode!==9&&$e(p),u.value>-1&&u.value<Z){Oe(i.options[u.value]);return}if(L===!0){const fe=(oe,me)=>{if(me){if(Pi(me)!==!0)return}else me=i.newValueMode;if(oe==null)return;tt("",i.multiple!==!0,!0),(me==="toggle"?Oe:Le)(oe,me==="add-unique"),i.multiple!==!0&&(j.value!==null&&j.value.focus(),Re())};if(i.onNewValue!==void 0?c("new-value",b.value,fe):fe(b.value),i.multiple!==!0)return}s.value===!0?Qe():x.innerLoading.value!==!0&&Ue()}}function li(){return g===!0?ae.value:ne.value!==null&&ne.value.__qPortalInnerRef.value!==null?ne.value.__qPortalInnerRef.value:void 0}function cn(){return li()}function fn(){return i.hideSelected===!0?[]:f["selected-item"]!==void 0?y.value.map(p=>f["selected-item"](p)).slice():f.selected!==void 0?[].concat(f.selected()):i.useChips===!0?y.value.map((p,L)=>_(Ji,{key:"option-"+L,removable:x.editable.value===!0&&S.value(p.opt)!==!0,dense:!0,textColor:i.color,tabindex:a.value,onRemove(){p.removeAtIndex(L)}},()=>_("span",{class:"ellipsis",[p.html===!0?"innerHTML":"textContent"]:V.value(p.opt)}))):[_("span",{[r.value===!0?"innerHTML":"textContent"]:i.displayValue!==void 0?i.displayValue:t.value})]}function oi(){if(e.value===!0)return f["no-option"]!==void 0?f["no-option"]({inputValue:b.value}):void 0;const p=f.option!==void 0?f.option:T=>_(Ui,ee({key:T.index},T.itemProps),()=>_(_t,()=>_(rr,()=>_("span",{[T.html===!0?"innerHTML":"textContent"]:T.label}))));let L=ge("div",I.value.map(p));return f["before-options"]!==void 0&&(L=f["before-options"]().concat(L)),_i(f["after-options"],L)}function dn(p,L){const T=L===!0?ee(ee({},l.value),x.splitAttrs.attributes.value):void 0,Z=ee(we(ee({ref:L===!0?j:void 0,key:"i_t",class:K.value,style:i.inputStyle,value:b.value!==void 0?b.value:"",type:"search"},T),{id:L===!0?x.targetUid.value:void 0,maxlength:i.maxlength,autocomplete:i.autocomplete,"data-autofocus":p!==!0&&i.autofocus===!0||void 0,disabled:i.disable===!0,readonly:i.readonly===!0}),re.value);return p!==!0&&g===!0&&(Array.isArray(Z.class)===!0?Z.class=[...Z.class,"no-pointer-events"]:Z.class+=" no-pointer-events"),_("input",Z)}function si(p){clearTimeout(D),!(p&&p.target&&p.target.composing===!0)&&(ot(p.target.value||""),F=!0,A=b.value,x.focused.value!==!0&&(g!==!0||h.value===!0)&&x.focus(),i.onFilter!==void 0&&(D=setTimeout(()=>{Ke(b.value)},i.inputDebounce)))}function ot(p){b.value!==p&&(b.value=p,c("input-value",p))}function tt(p,L,T){F=T!==!0,i.useInput===!0&&(ot(p),(L===!0||T!==!0)&&(A=p),L!==!0&&Ke(p))}function Ke(p,L,T){if(i.onFilter===void 0||L!==!0&&x.focused.value!==!0)return;x.innerLoading.value===!0?c("filter-abort"):(x.innerLoading.value=!0,w.value=!0),p!==""&&i.multiple!==!0&&P.value.length>0&&F!==!0&&p===V.value(P.value[0])&&(p="");const Z=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);clearTimeout(N),N=Z,c("filter",p,(fe,oe)=>{(L===!0||x.focused.value===!0)&&N===Z&&(clearTimeout(N),typeof fe=="function"&&fe(),w.value=!1,qe(()=>{x.innerLoading.value=!1,x.editable.value===!0&&(L===!0?s.value===!0&&Re():s.value===!0?It(!0):s.value=!0),typeof oe=="function"&&qe(()=>{oe(m)}),typeof T=="function"&&qe(()=>{T(m)})}))},()=>{x.focused.value===!0&&N===Z&&(clearTimeout(N),x.innerLoading.value=!1,w.value=!1),s.value===!0&&(s.value=!1)})}function hn(){return _(zr,we(ee({ref:ne,class:J.value,style:i.popupContentStyle,modelValue:s.value,fit:i.menuShrink!==!0,cover:i.optionsCover===!0&&e.value!==!0&&i.useInput!==!0,anchor:i.menuAnchor,self:i.menuSelf,offset:i.menuOffset,dark:ie.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:E.value,transitionShow:i.transitionShow,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,separateClosePopup:!0},v.value),{onScrollPassive:ke,onBeforeShow:ci,onBeforeHide:vn,onShow:pn}),oi)}function vn(p){fi(p),Qe()}function pn(){ye()}function yn(p){Fe(p),j.value!==null&&j.value.focus(),h.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function mn(p){Fe(p),qe(()=>{h.value=!1})}function gn(){const p=[_(vr,we(ee(we(ee({class:`col-auto ${x.fieldClass.value}`},X.value),{for:x.targetUid.value,dark:ie.value,square:!0,loading:w.value,itemAligned:!1,filled:!0,stackLabel:b.value.length>0}),x.splitAttrs.listeners.value),{onFocus:yn,onBlur:mn}),we(ee({},f),{rawControl:()=>x.getControl(!0),before:void 0,after:void 0}))];return s.value===!0&&p.push(_("div",we(ee({ref:ae,class:J.value+" scroll",style:i.popupContentStyle},v.value),{onClick:He,onScrollPassive:ke}),oi())),_(Mr,{ref:z,modelValue:d.value,position:i.useInput===!0?"top":void 0,transitionShow:se,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,onBeforeShow:ci,onBeforeHide:bn,onHide:wn,onShow:Sn},()=>_("div",{class:"q-select__dialog"+(ie.value===!0?" q-select__dialog--dark q-dark":"")+(h.value===!0?" q-select__dialog--focused":"")},p))}function bn(p){fi(p),z.value!==null&&z.value.__updateRefocusTarget(x.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),x.focused.value=!1}function wn(p){Re(),x.focused.value===!1&&c("blur",p),Je()}function Sn(){const p=document.activeElement;(p===null||p.id!==x.targetUid.value)&&j.value!==null&&j.value!==p&&j.value.focus(),ye()}function Qe(){d.value!==!0&&(u.value=-1,s.value===!0&&(s.value=!1),x.focused.value===!1&&(clearTimeout(N),N=void 0,x.innerLoading.value===!0&&(c("filter-abort"),x.innerLoading.value=!1,w.value=!1)))}function Ue(p){x.editable.value===!0&&(g===!0?(x.onControlFocusin(p),d.value=!0,qe(()=>{x.focus()})):x.focus(),i.onFilter!==void 0?Ke(b.value):(e.value!==!0||f["no-option"]!==void 0)&&(s.value=!0))}function Re(){d.value=!1,Qe()}function Je(){i.useInput===!0&&tt(i.multiple!==!0&&i.fillInput===!0&&P.value.length>0&&V.value(P.value[0])||"",!0,!0)}function It(p){let L=-1;if(p===!0){if(P.value.length>0){const T=M.value(P.value[0]);L=i.options.findIndex(Z=>it(M.value(Z),T))}k(L)}be(L)}function xn(){s.value===!0&&x.innerLoading.value===!1&&(xe(),qe(()=>{s.value===!0&&x.innerLoading.value===!1&&It(!0)}))}function ui(){d.value===!1&&ne.value!==null&&ne.value.updatePosition()}function ci(p){p!==void 0&&Fe(p),c("popup-show",p),x.hasPopupOpen=!0,x.onControlFocusin(p)}function fi(p){p!==void 0&&Fe(p),c("popup-hide",p),x.hasPopupOpen=!1,x.onControlFocusout(p)}function di(){g=o.platform.is.mobile!==!0&&i.behavior!=="dialog"?!1:i.behavior!=="menu"&&(i.useInput===!0?f["no-option"]!==void 0||i.onFilter!==void 0||e.value===!1:!0),se=o.platform.is.ios===!0&&g===!0&&i.useInput===!0?"fade":i.transitionShow}return Fn(di),Tn(ui),di(),Me(()=>{clearTimeout(D)}),Object.assign(m,{showPopup:Ue,hidePopup:Re,removeAtIndex:Y,add:Le,toggleOption:Oe,getOptionIndex:()=>u.value,setOptionIndex:be,moveOptionSelection:Ve,filter:Ke,updateMenuPosition:ui,updateInputValue:tt,isOptionSelected:Ct,getEmittingOptionValue:he,isOptionDisabled:(...p)=>S.value.apply(null,p)===!0,getOptionValue:(...p)=>M.value.apply(null,p),getOptionLabel:(...p)=>V.value.apply(null,p)}),Object.assign(x,{innerValue:P,fieldClass:O(()=>`q-select q-field--auto-height q-select--with${i.useInput!==!0?"out":""}-input q-select--with${i.useChips!==!0?"out":""}-chips q-select--${i.multiple===!0?"multiple":"single"}`),inputRef:H,targetRef:j,hasValue:ue,showPopup:Ue,floatingLabel:O(()=>(i.hideSelected===!0?b.value.length>0:ue.value===!0)||bi(i.displayValue)),getControlChild:()=>{if(x.editable.value!==!1&&(d.value===!0||e.value!==!0||f["no-option"]!==void 0))return g===!0?gn():hn();x.hasPopupOpen===!0&&(x.hasPopupOpen=!1)},controlEvents:{onFocusin(p){x.onControlFocusin(p)},onFocusout(p){x.onControlFocusout(p,()=>{Je(),Qe()})},onClick(p){if(He(p),g!==!0&&s.value===!0){Qe(),j.value!==null&&j.value.focus();return}Ue(p)}},getControl:p=>{const L=fn(),T=p===!0||d.value!==!0||g!==!0;if(i.useInput===!0)L.push(dn(p,T));else if(x.editable.value===!0){const fe=T===!0?l.value:void 0;L.push(_("input",we(ee({ref:T===!0?j:void 0,key:"d_t",class:"q-select__focus-target",id:T===!0?x.targetUid.value:void 0,readonly:!0},fe),{onKeydown:ai,onKeyup:ii,onKeypress:ri}))),T===!0&&typeof i.autocomplete=="string"&&i.autocomplete.length>0&&L.push(_("input",{class:"q-select__autocomplete-input",autocomplete:i.autocomplete,onKeyup:ni}))}if(le.value!==void 0&&i.disable!==!0&&R.value.length>0){const fe=R.value.map(oe=>_("option",{value:oe,selected:!0}));L.push(_("select",{class:"hidden",name:le.value,multiple:i.multiple},fe))}const Z=i.useInput===!0||T!==!0?void 0:x.splitAttrs.attributes.value;return _("div",ee({class:"q-field__native row items-center"},Z),L)},getInnerAppend:()=>i.loading!==!0&&w.value!==!0&&i.hideDropdownIcon!==!0?[_(at,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:C.value})]:null}),Ni(x)}});function $t(i,f,c){const m=yt(i);let o,s=m.left-f.event.x,d=m.top-f.event.y,u=Math.abs(s),b=Math.abs(d);const h=f.direction;h.horizontal===!0&&h.vertical!==!0?o=s<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?o=d<0?"up":"down":h.up===!0&&d<0?(o="up",u>b&&(h.left===!0&&s<0?o="left":h.right===!0&&s>0&&(o="right"))):h.down===!0&&d>0?(o="down",u>b&&(h.left===!0&&s<0?o="left":h.right===!0&&s>0&&(o="right"))):h.left===!0&&s<0?(o="left",u<b&&(h.up===!0&&d<0?o="up":h.down===!0&&d>0&&(o="down"))):h.right===!0&&s>0&&(o="right",u<b&&(h.up===!0&&d<0?o="up":h.down===!0&&d>0&&(o="down")));let w=!1;if(o===void 0&&c===!1){if(f.event.isFirst===!0||f.event.lastDir===void 0)return{};o=f.event.lastDir,w=!0,o==="left"||o==="right"?(m.left-=s,u=0,s=0):(m.top-=d,b=0,d=0)}return{synthetic:w,payload:{evt:i,touch:f.event.mouse!==!0,mouse:f.event.mouse===!0,position:m,direction:o,isFirst:f.event.isFirst,isFinal:c===!0,duration:Date.now()-f.event.time,distance:{x:u,y:b},offset:{x:s,y:d},delta:{x:m.left-f.event.lastX,y:m.top-f.event.lastY}}}}let _r=0;var Ft=Ln({name:"touch-pan",beforeMount(i,{value:f,modifiers:c}){if(c.mouse!==!0&&Be.has.touch!==!0)return;function m(s,d){c.mouse===!0&&d===!0?$e(s):(c.stop===!0&&Fe(s),c.prevent===!0&&He(s))}const o={uid:"qvtp_"+_r++,handler:f,modifiers:c,direction:Si(c),noop:Kt,mouseStart(s){xi(s,o)&&Rn(s)&&(Ye(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(s,!0))},touchStart(s){if(xi(s,o)){const d=s.target;Ye(o,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),o.start(s)}},start(s,d){if(Be.is.firefox===!0&&Ot(i,!0),o.lastEvt=s,d===!0||c.stop===!0){if(o.direction.all!==!0&&(d!==!0||o.modifiers.mouseAllDir!==!0)){const h=s.type.indexOf("mouse")>-1?new MouseEvent(s.type,s):new TouchEvent(s.type,s);s.defaultPrevented===!0&&He(h),s.cancelBubble===!0&&Fe(h),Object.assign(h,{qKeyEvent:s.qKeyEvent,qClickOutside:s.qClickOutside,qAnchorHandled:s.qAnchorHandled,qClonedBy:s.qClonedBy===void 0?[o.uid]:s.qClonedBy.concat(o.uid)}),o.initialEvent={target:s.target,event:h}}Fe(s)}const{left:u,top:b}=yt(s);o.event={x:u,y:b,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:b}},move(s){if(o.event===void 0)return;const d=yt(s),u=d.left-o.event.x,b=d.top-o.event.y;if(u===0&&b===0)return;o.lastEvt=s;const h=o.event.mouse===!0,w=()=>{m(s,h),c.preserveCursor!==!0&&(document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ji(),o.styleCleanup=g=>{if(o.styleCleanup=void 0,c.preserveCursor!==!0&&(document.documentElement.style.cursor=""),document.body.classList.remove("non-selectable"),h===!0){const F=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{F(),g()},50):F()}else g!==void 0&&g()}};if(o.event.detected===!0){o.event.isFirst!==!0&&m(s,o.event.mouse);const{payload:g,synthetic:F}=$t(s,o,!1);g!==void 0&&(o.handler(g)===!1?o.end(s):(o.styleCleanup===void 0&&o.event.isFirst===!0&&w(),o.event.lastX=g.position.left,o.event.lastY=g.position.top,o.event.lastDir=F===!0?void 0:g.direction,o.event.isFirst=!1));return}if(o.direction.all===!0||h===!0&&o.modifiers.mouseAllDir===!0){w(),o.event.detected=!0,o.move(s);return}const D=Math.abs(u),q=Math.abs(b);D!==q&&(o.direction.horizontal===!0&&D>q||o.direction.vertical===!0&&D<q||o.direction.up===!0&&D<q&&b<0||o.direction.down===!0&&D<q&&b>0||o.direction.left===!0&&D>q&&u<0||o.direction.right===!0&&D>q&&u>0?(o.event.detected=!0,o.move(s)):o.end(s,!0))},end(s,d){if(o.event!==void 0){if(dt(o,"temp"),Be.is.firefox===!0&&Ot(i,!1),d===!0)o.styleCleanup!==void 0&&o.styleCleanup(),o.event.detected!==!0&&o.initialEvent!==void 0&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(o.event.detected===!0){o.event.isFirst===!0&&o.handler($t(s===void 0?o.lastEvt:s,o).payload);const{payload:u}=$t(s===void 0?o.lastEvt:s,o,!0),b=()=>{o.handler(u)};o.styleCleanup!==void 0?o.styleCleanup(b):b()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};i.__qtouchpan=o,c.mouse===!0&&Ye(o,"main",[[i,"mousedown","mouseStart",`passive${c.mouseCapture===!0?"Capture":""}`]]),Be.has.touch===!0&&Ye(o,"main",[[i,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[i,"touchmove","noop","notPassiveCapture"]])},updated(i,f){const c=i.__qtouchpan;c!==void 0&&(f.oldValue!==f.value&&(typeof value!="function"&&c.end(),c.handler=f.value),c.direction=Si(f.modifiers))},beforeUnmount(i){const f=i.__qtouchpan;f!==void 0&&(f.event!==void 0&&f.end(),dt(f,"main"),dt(f,"temp"),Be.is.firefox===!0&&Ot(i,!1),f.styleCleanup!==void 0&&f.styleCleanup(),delete i.__qtouchpan)}});const zi=150;var Hr=Ae({name:"QDrawer",inheritAttrs:!1,props:we(ee(ee({},Yt),Jt),{side:{type:String,default:"left",validator:i=>["left","right"].includes(i)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:i=>["default","desktop","mobile"].includes(i),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean}),emits:[...Gt,"on-layout","mini-state"],setup(i,{slots:f,emit:c,attrs:m}){const o=Ee(),{proxy:{$q:s}}=o,d=Xt(i,s),{preventBodyScroll:u}=an(),{registerTimeout:b}=Zt(),h=wt(St,()=>{console.error("QDrawer needs to be child of QLayout")});let w,D,q;const g=G(i.behavior==="mobile"||i.behavior!=="desktop"&&h.totalWidth.value<=i.breakpoint),F=O(()=>i.mini===!0&&g.value!==!0),N=O(()=>F.value===!0?i.miniWidth:i.width),A=G(i.showIfAbove===!0&&g.value===!1?!0:i.modelValue===!0),se=O(()=>i.persistent!==!0&&(g.value===!0||Ce.value===!0));function B(S,R){if(ne(),S!==!1&&h.animate(),a(0),g.value===!0){const re=h.instances[k.value];re!==void 0&&re.belowBreakpoint===!0&&re.hide(!1),l(1),h.isContainer.value!==!0&&u(!0)}else l(0),S!==!1&&v(!1);b(()=>{S!==!1&&v(!0),R!==!0&&c("show",S)},zi)}function Q(S,R){z(),S!==!1&&h.animate(),l(0),a(ce.value*N.value),E(),R!==!0&&b(()=>{c("hide",S)},zi)}const{show:H,hide:j}=ei({showing:A,hideOnRouteChange:se,handleShow:B,handleHide:Q}),{addToHistory:ne,removeFromHistory:z}=rn(A,j,se),ae={belowBreakpoint:g,hide:j},le=O(()=>i.side==="right"),ce=O(()=>(s.lang.rtl===!0?-1:1)*(le.value===!0?1:-1)),de=G(0),W=G(!1),Se=G(!1),U=G(N.value*ce.value),k=O(()=>le.value===!0?"left":"right"),ge=O(()=>A.value===!0&&g.value===!1&&i.overlay===!1?i.miniToOverlay===!0?i.miniWidth:N.value:0),ke=O(()=>i.overlay===!0||i.miniToOverlay===!0||h.view.value.indexOf(le.value?"R":"L")>-1||s.platform.is.ios===!0&&h.isContainer.value===!0),xe=O(()=>i.overlay===!1&&A.value===!0&&g.value===!1),Ce=O(()=>i.overlay===!0&&A.value===!0&&g.value===!1),ye=O(()=>"fullscreen q-drawer__backdrop"+(A.value===!1&&W.value===!1?" hidden":"")),x=O(()=>({backgroundColor:`rgba(0,0,0,${de.value*.4})`})),P=O(()=>le.value===!0?h.rows.value.top[2]==="r":h.rows.value.top[0]==="l"),X=O(()=>le.value===!0?h.rows.value.bottom[2]==="r":h.rows.value.bottom[0]==="l"),ie=O(()=>{const S={};return h.header.space===!0&&P.value===!1&&(ke.value===!0?S.top=`${h.header.offset}px`:h.header.space===!0&&(S.top=`${h.header.size}px`)),h.footer.space===!0&&X.value===!1&&(ke.value===!0?S.bottom=`${h.footer.offset}px`:h.footer.space===!0&&(S.bottom=`${h.footer.size}px`)),S}),ue=O(()=>{const S={width:`${N.value}px`,transform:`translateX(${U.value}px)`};return g.value===!0?S:Object.assign(S,ie.value)}),K=O(()=>"q-drawer__content fit "+(h.isContainer.value!==!0?"scroll":"overflow-auto")),J=O(()=>`q-drawer q-drawer--${i.side}`+(Se.value===!0?" q-drawer--mini-animate":"")+(i.bordered===!0?" q-drawer--bordered":"")+(d.value===!0?" q-drawer--dark q-dark":"")+(W.value===!0?" no-transition":A.value===!0?"":" q-layout--prevent-focus")+(g.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${F.value===!0?"mini":"standard"}`+(ke.value===!0||xe.value!==!0?" fixed":"")+(i.overlay===!0||i.miniToOverlay===!0?" q-drawer--on-top":"")+(P.value===!0?" q-drawer--top-padding":""))),e=O(()=>{const S=s.lang.rtl===!0?i.side:k.value;return[[Ft,I,void 0,{[S]:!0,mouse:!0}]]}),t=O(()=>{const S=s.lang.rtl===!0?k.value:i.side;return[[Ft,C,void 0,{[S]:!0,mouse:!0}]]}),n=O(()=>{const S=s.lang.rtl===!0?k.value:i.side;return[[Ft,C,void 0,{[S]:!0,mouse:!0,mouseAllDir:!0}]]});function r(){M(g,i.behavior==="mobile"||i.behavior!=="desktop"&&h.totalWidth.value<=i.breakpoint)}te(g,S=>{S===!0?(w=A.value,A.value===!0&&j(!1)):i.overlay===!1&&i.behavior!=="mobile"&&w!==!1&&(A.value===!0?(a(0),l(0),E()):H(!1))}),te(()=>i.side,(S,R)=>{h.instances[R]===ae&&(h.instances[R]=void 0,h[R].space=!1,h[R].offset=0),h.instances[S]=ae,h[S].size=N.value,h[S].space=xe.value,h[S].offset=ge.value}),te(h.totalWidth,()=>{(h.isContainer.value===!0||document.qScrollPrevented!==!0)&&r()}),te(()=>i.behavior+i.breakpoint,r),te(h.isContainer,S=>{A.value===!0&&u(S!==!0),S===!0&&r()}),te(h.scrollbarWidth,()=>{a(A.value===!0?0:void 0)}),te(ge,S=>{$("offset",S)}),te(xe,S=>{c("on-layout",S),$("space",S)}),te(le,()=>{a()}),te(N,S=>{a(),V(i.miniToOverlay,S)}),te(()=>i.miniToOverlay,S=>{V(S,N.value)}),te(()=>s.lang.rtl,()=>{a()}),te(()=>i.mini,()=>{i.modelValue===!0&&(y(),h.animate())}),te(F,S=>{c("mini-state",S)});function a(S){S===void 0?qe(()=>{S=A.value===!0?0:N.value,a(ce.value*S)}):(h.isContainer.value===!0&&le.value===!0&&(g.value===!0||Math.abs(S)===N.value)&&(S+=ce.value*h.scrollbarWidth.value),U.value=S)}function l(S){de.value=S}function v(S){const R=S===!0?"remove":h.isContainer.value!==!0?"add":"";R!==""&&document.body.classList[R]("q-body--drawer-toggle")}function y(){clearTimeout(D),o.proxy&&o.proxy.$el&&o.proxy.$el.classList.add("q-drawer--mini-animate"),Se.value=!0,D=setTimeout(()=>{Se.value=!1,o&&o.proxy&&o.proxy.$el&&o.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function I(S){if(A.value!==!1)return;const R=N.value,re=ct(S.distance.x,0,R);if(S.isFinal===!0){re>=Math.min(75,R)===!0?H():(h.animate(),l(0),a(ce.value*R)),W.value=!1;return}a((s.lang.rtl===!0?le.value!==!0:le.value)?Math.max(R-re,0):Math.min(0,re-R)),l(ct(re/R,0,1)),S.isFirst===!0&&(W.value=!0)}function C(S){if(A.value!==!0)return;const R=N.value,re=S.direction===i.side,he=(s.lang.rtl===!0?re!==!0:re)?ct(S.distance.x,0,R):0;if(S.isFinal===!0){Math.abs(he)<Math.min(75,R)===!0?(h.animate(),l(1),a(0)):j(),W.value=!1;return}a(ce.value*he),l(ct(1-he/R,0,1)),S.isFirst===!0&&(W.value=!0)}function E(){u(!1),v(!0)}function $(S,R){h.update(i.side,S,R)}function M(S,R){S.value!==R&&(S.value=R)}function V(S,R){$("size",S===!0?i.miniWidth:R)}return h.instances[i.side]=ae,V(i.miniToOverlay,N.value),$("space",xe.value),$("offset",ge.value),i.showIfAbove===!0&&i.modelValue!==!0&&A.value===!0&&i["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!0),jt(()=>{c("on-layout",xe.value),c("mini-state",F.value),w=i.showIfAbove===!0;const S=()=>{(A.value===!0?B:Q)(!1,!0)};if(h.totalWidth.value!==0){qe(S);return}q=te(h.totalWidth,()=>{q(),q=void 0,A.value===!1&&i.showIfAbove===!0&&g.value===!1?H(!1):S()})}),Me(()=>{q!==void 0&&q(),clearTimeout(D),A.value===!0&&E(),h.instances[i.side]===ae&&(h.instances[i.side]=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const S=[];g.value===!0&&(i.noSwipeOpen===!1&&S.push(Bi(_("div",{key:"open",class:`q-drawer__opener fixed-${i.side}`,"aria-hidden":"true"}),e.value)),S.push(Bt("div",{ref:"backdrop",class:ye.value,style:x.value,"aria-hidden":"true",onClick:j},void 0,"backdrop",i.noSwipeBackdrop!==!0&&A.value===!0,()=>n.value)));const R=F.value===!0&&f.mini!==void 0,re=[_("div",we(ee({},m),{key:""+R,class:[K.value,m.class]}),R===!0?f.mini():et(f.default))];return i.elevated===!0&&A.value===!0&&re.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S.push(Bt("aside",{ref:"content",class:J.value,style:ue.value},re,"contentclose",i.noSwipeClose!==!0&&g.value===!0,()=>t.value)),_("div",{class:"q-drawer-container"},S)}}}),Nr=Ae({name:"QPageContainer",setup(i,{slots:f}){const{proxy:{$q:c}}=Ee(),m=wt(St,()=>{console.error("QPageContainer needs to be child of QLayout")});Li(_n,!0);const o=O(()=>{const s={};return m.header.space===!0&&(s.paddingTop=`${m.header.size}px`),m.right.space===!0&&(s[`padding${c.lang.rtl===!0?"Left":"Right"}`]=`${m.right.size}px`),m.footer.space===!0&&(s.paddingBottom=`${m.footer.size}px`),m.left.space===!0&&(s[`padding${c.lang.rtl===!0?"Right":"Left"}`]=`${m.left.size}px`),s});return()=>_("div",{class:"q-page-container",style:o.value},et(f.default))}});const{passive:Ei}=pt,Wr=["both","horizontal","vertical"];var jr=Ae({name:"QScrollObserver",props:{axis:{type:String,validator:i=>Wr.includes(i),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(i,{emit:f}){const c={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let m=null,o,s;te(()=>i.scrollTarget,()=>{b(),u()});function d(){m!==null&&m();const D=Math.max(0,Hn(o)),q=Nn(o),g={top:D-c.position.top,left:q-c.position.left};if(i.axis==="vertical"&&g.top===0||i.axis==="horizontal"&&g.left===0)return;const F=Math.abs(g.top)>=Math.abs(g.left)?g.top<0?"up":"down":g.left<0?"left":"right";c.position={top:D,left:q},c.directionChanged=c.direction!==F,c.delta=g,c.directionChanged===!0&&(c.direction=F,c.inflectionPoint=c.position),f("scroll",ee({},c))}function u(){o=Fi(s,i.scrollTarget),o.addEventListener("scroll",h,Ei),h(!0)}function b(){o!==void 0&&(o.removeEventListener("scroll",h,Ei),o=void 0)}function h(D){if(D===!0||i.debounce===0||i.debounce==="0")d();else if(m===null){const[q,g]=i.debounce?[setTimeout(d,i.debounce),clearTimeout]:[requestAnimationFrame(d),cancelAnimationFrame];m=()=>{g(q),m=null}}}const w=Ee();return jt(()=>{s=w.proxy.$el.parentNode,u()}),Me(()=>{m!==null&&m(),b()}),Object.assign(w.proxy,{trigger:h,getPosition:()=>c}),Kt}}),Kr=Ae({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:i=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(i.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(i,{slots:f,emit:c}){const{proxy:{$q:m}}=Ee(),o=G(null),s=G(m.screen.height),d=G(i.container===!0?0:m.screen.width),u=G({position:0,direction:"down",inflectionPoint:0}),b=G(0),h=G(Wn.value===!0?0:ht()),w=O(()=>"q-layout q-layout--"+(i.container===!0?"containerized":"standard")),D=O(()=>i.container===!1?{minHeight:m.screen.height+"px"}:null),q=O(()=>h.value!==0?{[m.lang.rtl===!0?"left":"right"]:`${h.value}px`}:null),g=O(()=>h.value!==0?{[m.lang.rtl===!0?"right":"left"]:0,[m.lang.rtl===!0?"left":"right"]:`-${h.value}px`,width:`calc(100% + ${h.value}px)`}:null);function F(H){if(i.container===!0||document.qScrollPrevented!==!0){const j={position:H.position.top,direction:H.direction,directionChanged:H.directionChanged,inflectionPoint:H.inflectionPoint.top,delta:H.delta.top};u.value=j,i.onScroll!==void 0&&c("scroll",j)}}function N(H){const{height:j,width:ne}=H;let z=!1;s.value!==j&&(z=!0,s.value=j,i.onScrollHeight!==void 0&&c("scroll-height",j),se()),d.value!==ne&&(z=!0,d.value=ne),z===!0&&i.onResize!==void 0&&c("resize",H)}function A({height:H}){b.value!==H&&(b.value=H,se())}function se(){if(i.container===!0){const H=s.value>b.value?ht():0;h.value!==H&&(h.value=H)}}let B;const Q={instances:{},view:O(()=>i.view),isContainer:O(()=>i.container),rootRef:o,height:s,containerHeight:b,scrollbarWidth:h,totalWidth:O(()=>d.value+h.value),rows:O(()=>{const H=i.view.toLowerCase().split(" ");return{top:H[0].split(""),middle:H[1].split(""),bottom:H[2].split("")}}),header:st({size:0,offset:0,space:!1}),right:st({size:300,offset:0,space:!1}),footer:st({size:0,offset:0,space:!1}),left:st({size:300,offset:0,space:!1}),scroll:u,animate(){B!==void 0?clearTimeout(B):document.body.classList.add("q-body--layout-animate"),B=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),B=void 0},155)},update(H,j,ne){Q[H][j]=ne}};if(Li(St,Q),ht()>0){let ne=function(){H=null,j.classList.remove("hide-scrollbar")},z=function(){if(H===null){if(j.scrollHeight>m.screen.height)return;j.classList.add("hide-scrollbar")}else clearTimeout(H);H=setTimeout(ne,300)},ae=function(le){H!==null&&le==="remove"&&(clearTimeout(H),ne()),window[`${le}EventListener`]("resize",z)},H=null;const j=document.body;te(()=>i.container!==!0?"add":"remove",ae),i.container!==!0&&ae("add"),$i(()=>{ae("remove")})}return()=>{const H=_i(f.default,[_(jr,{onScroll:F}),_(Lt,{onResize:N})]),j=_("div",{class:w.value,style:D.value,ref:i.container===!0?void 0:o,tabindex:-1},H);return i.container===!0?_("div",{class:"q-layout-container overflow-hidden",ref:o},[_(Lt,{onResize:A}),_("div",{class:"absolute-full",style:q.value},[_("div",{class:"scroll",style:g.value},[j])])]):j}}}),_e=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Qr(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var on={exports:{}},sn={exports:{}};(function(i,f){(function(c,m){i.exports=m()})(_e,function(){return function(){function c(o,s){if(this.app="loki",this.options=s||{},typeof o!="undefined"&&(this.app=o),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}c.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},c.prototype.checkAvailability=function(){return!!(typeof indexedDB!="undefined"&&indexedDB)},c.prototype.loadDatabase=function(o,s){var d=this.app,u=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(b){u.catalog=b,u.loadDatabase(o,s)});return}this.catalog.getAppKey(d,o,function(b){if(typeof s=="function"){if(b.id===0){s(null);return}s(b.val)}else console.log(b.val)})},c.prototype.loadKey=c.prototype.loadDatabase,c.prototype.saveDatabase=function(o,s,d){var u=this.app,b=this;function h(w){w&&w.success===!0?d(null):d(new Error("Error saving database")),b.options.closeAfterSave&&b.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(w){b.saveDatabase(o,s,h)});return}this.catalog.setAppKey(u,o,s,h)},c.prototype.saveKey=c.prototype.saveDatabase,c.prototype.deleteDatabase=function(o,s){var d=this.app,u=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(b){u.catalog=b,u.deleteDatabase(o,s)});return}this.catalog.getAppKey(d,o,function(b){var h=b.id;h!==0?u.catalog.deleteAppKey(h,s):typeof s=="function"&&s({success:!0})})},c.prototype.deleteKey=c.prototype.deleteDatabase,c.prototype.deleteDatabasePartitions=function(o){var s=this;this.getDatabaseList(function(d){d.forEach(function(u){u.startsWith(o)&&s.deleteDatabase(u)})})},c.prototype.getDatabaseList=function(o){var s=this.app,d=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(u){d.catalog=u,d.getDatabaseList(o)});return}this.catalog.getAppKeys(s,function(u){for(var b=[],h=0;h<u.length;h++)b.push(u[h].key);typeof o=="function"?o(b):b.forEach(function(w){console.log(w)})})},c.prototype.getKeyList=c.prototype.getDatabaseList,c.prototype.getCatalogSummary=function(o){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(d){s.catalog=d,s.getCatalogSummary(o)});return}this.catalog.getAllKeys(function(d){for(var u=[],b,h,w,D,q,g=0;g<d.length;g++)b=d[g],w=b.app||"",D=b.key||"",q=b.val||"",h=w.length*2+D.length*2+q.length+1,u.push({app:b.app,key:b.key,size:h});typeof o=="function"?o(u):u.forEach(function(F){console.log(F)})})};function m(o){this.db=null,this.initializeLokiCatalog(o)}return m.prototype.initializeLokiCatalog=function(o){var s=indexedDB.open("LokiCatalog",1),d=this;s.onupgradeneeded=function(u){var b=u.target.result;if(b.objectStoreNames.contains("LokiAKV")&&b.deleteObjectStore("LokiAKV"),!b.objectStoreNames.contains("LokiAKV")){var h=b.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});h.createIndex("app","app",{unique:!1}),h.createIndex("key","key",{unique:!1}),h.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(u){d.db=u.target.result,typeof o=="function"&&o(d)},s.onerror=function(u){throw u}},m.prototype.getAppKey=function(o,s,d){var u=this.db.transaction(["LokiAKV"],"readonly"),b=u.objectStore("LokiAKV"),h=b.index("appkey"),w=o+","+s,D=h.get(w);D.onsuccess=function(q){return function(g){var F=g.target.result;(F===null||typeof F=="undefined")&&(F={id:0,success:!1}),typeof q=="function"?q(F):console.log(F)}}(d),D.onerror=function(q){return function(g){if(typeof q=="function")q({id:0,success:!1});else throw g}}(d)},m.prototype.getAppKeyById=function(o,s,d){var u=this.db.transaction(["LokiAKV"],"readonly"),b=u.objectStore("LokiAKV"),h=b.get(o);h.onsuccess=function(w,D){return function(q){typeof D=="function"?D(q.target.result,w):console.log(q.target.result)}}(d,s)},m.prototype.setAppKey=function(o,s,d,u){var b=this.db.transaction(["LokiAKV"],"readwrite"),h=b.objectStore("LokiAKV"),w=h.index("appkey"),D=o+","+s,q=w.get(D);q.onsuccess=function(g){var F=g.target.result;F==null?F={app:o,key:s,appkey:o+","+s,val:d}:F.val=d;var N=h.put(F);N.onerror=function(A){return function(se){typeof A=="function"?A({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(q.error))}}(u),N.onsuccess=function(A){return function(se){typeof A=="function"&&A({success:!0})}}(u)},q.onerror=function(g){return function(F){typeof g=="function"?g({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(q.error))}}(u)},m.prototype.deleteAppKey=function(o,s){var d=this.db.transaction(["LokiAKV"],"readwrite"),u=d.objectStore("LokiAKV"),b=u.delete(o);b.onsuccess=function(h){return function(w){typeof h=="function"&&h({success:!0})}}(s),b.onerror=function(h){return function(w){typeof h=="function"?h({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(b.error))}}(s)},m.prototype.getAppKeys=function(o,s){var d=this.db.transaction(["LokiAKV"],"readonly"),u=d.objectStore("LokiAKV"),b=u.index("app"),h=IDBKeyRange.only(o),w=b.openCursor(h),D=[];w.onsuccess=function(q,g){return function(F){var N=F.target.result;if(N){var A=N.value;q.push(A),N.continue()}else typeof g=="function"?g(q):console.log(q)}}(D,s),w.onerror=function(q){return function(g){typeof q=="function"?q(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(g))}}(s)},m.prototype.getAllKeys=function(o){var s=this.db.transaction(["LokiAKV"],"readonly"),d=s.objectStore("LokiAKV"),u=d.openCursor(),b=[];u.onsuccess=function(h,w){return function(D){var q=D.target.result;if(q){var g=q.value;h.push(g),q.continue()}else typeof w=="function"?w(h):console.log(h)}}(b,o),u.onerror=function(h){return function(w){typeof h=="function"&&h(null)}}(o)},c}()})})(sn);(function(i,f){(function(c,m){i.exports=m()})(_e,function(){return function(){var c=Object.prototype.hasOwnProperty;function m(e){var t,n;if(Array.isArray(e)){for(n=0;n<e.length;n++)m(e[n]);o(e)}else if(e!==null&&typeof e=="object"){for(t in e)e.hasOwnProperty(t)&&m(e[t]);o(e)}}function o(e){Object.isFrozen(e)||Object.freeze(e)}function s(e){return Object.isFrozen(e)?Q(e,"shallow"):e}var d={copyProperties:function(e,t){var n;for(n in e)t[n]=e[n]},resolveTransformObject:function(e,t,n){var r,a;if(typeof n!="number"&&(n=0),++n>=10)return e;for(r in e)typeof e[r]=="string"&&e[r].indexOf("[%lktxp]")===0?(a=e[r].substring(8),t.hasOwnProperty(a)&&(e[r]=t[a])):typeof e[r]=="object"&&(e[r]=d.resolveTransformObject(e[r],t,n));return e},resolveTransformParams:function(e,t){var n,r,a=[];if(typeof t=="undefined")return e;for(n=0;n<e.length;n++)r=Q(e[n],"shallow-recurse-objects"),a.push(d.resolveTransformObject(r,t));return a},getIn:function(e,t,n){if(e!=null){if(!n)return e[t];if(typeof t=="string"&&(t=t.split(".")),!Array.isArray(t))throw new Error("path must be a string or array. Found "+typeof t);for(var r=0,a=t.length;e!=null&&r<a;)e=e[t[r++]];return r&&r==a?e:void 0}}},u={aeq:b,lt:h,gt:w};function b(e,t){var n,r,a,l;if(e===t)return!0;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:a=1;break;case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=e===e?9:0;break}switch(t){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=t===t?9:0;break}if(a!==9||l!==9)return a===l}return n=Number(e),r=Number(t),n===n||r===r?n===r:(n=e.toString(),r=t.toString(),n==r)}function h(e,t,n){var r,a,l,v;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=e===e?9:0;break}switch(t){case void 0:v=1;break;case null:v=1;break;case!1:v=3;break;case!0:v=4;break;case"":v=5;break;default:v=t===t?9:0;break}if(l!==9||v!==9)return l===v?n:l<v}return r=Number(e),a=Number(t),r===r&&a===a?r<a?!0:r>a?!1:n:r===r&&a!==a?!0:a===a&&r!==r?!1:e<t?!0:e>t?!1:e==t?n:(r=e.toString(),a=t.toString(),r<a?!0:r==a?n:!1)}function w(e,t,n){var r,a,l,v;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=e===e?9:0;break}switch(t){case void 0:v=1;break;case null:v=1;break;case!1:v=3;break;case!0:v=4;break;case"":v=5;break;default:v=t===t?9:0;break}if(l!==9||v!==9)return l===v?n:l>v}return r=Number(e),a=Number(t),r===r&&a===a?r>a?!0:r<a?!1:n:r===r&&a!==a?!1:a===a&&r!==r||e>t?!0:e<t?!1:e==t?n:(r=e.toString(),a=t.toString(),r>a?!0:r==a?n:!1)}function D(e,t,n){return u.aeq(e,t)?0:u.lt(e,t,!1)?n?1:-1:u.gt(e,t,!1)?n?-1:1:0}function q(e,t,n){for(var r=0,a,l,v,y,I,C=0,E=e.length;C<E;C++)if(a=e[C],l=a[0],~l.indexOf(".")?(I=l.split("."),v=d.getIn(t,I,!0),y=d.getIn(n,I,!0)):(v=t[l],y=n[l]),r=D(v,y,a[1]),r!==0)return r;return 0}function g(e,t,n,r,a,l){var v=l||0,y=t[v],I=!1,C;if(typeof e=="object"&&y in e&&(C=e[y]),v+1>=t.length)I=n(C,r,a);else if(Array.isArray(C))for(var E=0,$=C.length;E<$&&(I=g(C[E],t,n,r,a,v+1),I!==!0);E+=1);else I=g(C,t,n,r,a,v+1);return I}function F(e){return typeof e=="string"||Array.isArray(e)?function(t){return e.indexOf(t)!==-1}:typeof e=="object"&&e!==null?function(t){return c.call(e,t)}:null}function N(e,t,n){for(var r in t)if(c.call(t,r))return A[r](e,t[r],n);return!1}var A={$eq:function(e,t){return e===t},$aeq:function(e,t){return e==t},$ne:function(e,t){return t!==t?e===e:e!==t},$dteq:function(e,t){return u.aeq(e,t)},$gt:function(e,t){return u.gt(e,t,!1)},$gte:function(e,t){return u.gt(e,t,!0)},$lt:function(e,t){return u.lt(e,t,!1)},$lte:function(e,t){return u.lt(e,t,!0)},$jgt:function(e,t){return e>t},$jgte:function(e,t){return e>=t},$jlt:function(e,t){return e<t},$jlte:function(e,t){return e<=t},$between:function(e,t){return e==null?!1:u.gt(e,t[0],!0)&&u.lt(e,t[1],!0)},$jbetween:function(e,t){return e==null?!1:e>=t[0]&&e<=t[1]},$in:function(e,t){return t.indexOf(e)!==-1},$inSet:function(e,t){return t.has(e)},$nin:function(e,t){return t.indexOf(e)===-1},$keyin:function(e,t){return e in t},$nkeyin:function(e,t){return!(e in t)},$definedin:function(e,t){return t[e]!==void 0},$undefinedin:function(e,t){return t[e]===void 0},$regex:function(e,t){return t.test(e)},$containsString:function(e,t){return typeof e=="string"&&e.indexOf(t)!==-1},$containsNone:function(e,t){return!A.$containsAny(e,t)},$containsAny:function(e,t){var n=F(e);return n!==null?Array.isArray(t)?t.some(n):n(t):!1},$contains:function(e,t){var n=F(e);return n!==null?Array.isArray(t)?t.every(n):n(t):!1},$elemMatch:function(e,t){return Array.isArray(e)?e.some(function(n){return Object.keys(t).every(function(r){var a=t[r];return typeof a=="object"&&a||(a={$eq:a}),r.indexOf(".")!==-1?g(n,r.split("."),N,t[r],n):N(n[r],a,n)})}):!1},$type:function(e,t,n){var r=typeof e;return r==="object"&&(Array.isArray(e)?r="array":e instanceof Date&&(r="date")),typeof t!="object"?r===t:N(r,t,n)},$finite:function(e,t){return t===isFinite(e)},$size:function(e,t,n){return Array.isArray(e)?typeof t!="object"?e.length===t:N(e.length,t,n):!1},$len:function(e,t,n){return typeof e=="string"?typeof t!="object"?e.length===t:N(e.length,t,n):!1},$where:function(e,t){return t(e)===!0},$not:function(e,t,n){return!N(e,t,n)},$and:function(e,t,n){for(var r=0,a=t.length;r<a;r+=1)if(!N(e,t[r],n))return!1;return!0},$or:function(e,t,n){for(var r=0,a=t.length;r<a;r+=1)if(N(e,t[r],n))return!0;return!1},$exists:function(e,t){return t?e!==void 0:e===void 0}},se=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];se.forEach(function(e){var t=A[e];A["$"+e]=function(n,r,a){if(typeof r=="string")return t(n,a[r]);if(typeof r=="function")return t(n,r(a));throw new Error("Invalid argument to $$ matcher")}});var B={$eq:A.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function Q(e,t){if(e==null)return null;var n=t||"parse-stringify",r;switch(n){case"parse-stringify":r=JSON.parse(JSON.stringify(e));break;case"jquery-extend-deep":r=jQuery.extend(!0,{},e);break;case"shallow":r=Object.create(e.constructor.prototype),Object.keys(e).map(function(l){r[l]=e[l]});break;case"shallow-assign":r=Object.create(e.constructor.prototype),Object.assign(r,e);break;case"shallow-recurse-objects":r=Q(e,"shallow");var a=Object.keys(e);a.forEach(function(l){typeof e[l]=="object"&&e[l].constructor.name==="Object"?r[l]=Q(e[l],"shallow-recurse-objects"):Array.isArray(e[l])&&(r[l]=H(e[l],"shallow-recurse-objects"))});break}return r}function H(e,t){if(t=="parse-stringify")return Q(e,t);for(var n=[],r=0,a=e.length;r<a;r++)n[r]=Q(e[r],t);return n}function j(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function ne(){}ne.prototype.events={},ne.prototype.asyncListeners=!1,ne.prototype.on=function(e,t){var n,r=this;return Array.isArray(e)?(e.forEach(function(a){r.on(a,t)}),t):(n=this.events[e],n||(n=this.events[e]=[]),n.push(t),t)},ne.prototype.emit=function(e){var t=this,n;if(e&&this.events[e])this.events[e].length&&(n=Array.prototype.slice.call(arguments,1),this.events[e].forEach(function(r){t.asyncListeners?setTimeout(function(){r.apply(t,n)},1):r.apply(t,n)}));else throw new Error("No event "+e+" defined")},ne.prototype.addListener=ne.prototype.on,ne.prototype.removeListener=function(e,t){var n=this;if(Array.isArray(e)){e.forEach(function(a){n.removeListener(a,t)});return}if(this.events[e]){var r=this.events[e];r.splice(r.indexOf(t),1)}};function z(e,t){this.filename=e||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=t&&t.hasOwnProperty("verbose")?t.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var n=function(){return typeof _e!="undefined"&&(_e.android||_e.NSObject)?"NATIVESCRIPT":typeof window=="undefined"||typeof _e!="undefined"&&_e.window&&typeof process!="undefined"?"NODEJS":typeof document!="undefined"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};t&&t.hasOwnProperty("env")?this.ENV=t.env:this.ENV=n(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(t,!0),this.on("init",this.clearChanges)}z.prototype=new ne,z.prototype.constructor=z,z.prototype.getIndexedAdapter=function(){var e;return typeof Qr=="function"&&(e=sn.exports),e},z.prototype.configureOptions=function(e,t){var n={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},r={fs:ce,localStorage:de,memory:ae};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof e!="undefined"){if(this.options=e,this.options.hasOwnProperty("persistenceMethod")&&typeof r[e.persistenceMethod]=="function"&&(this.persistenceMethod=e.persistenceMethod,this.persistenceAdapter=new r[e.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=e.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),e.autoload&&t){var a=this;setTimeout(function(){a.loadDatabase(e,e.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(e,e.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=n[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new r[this.persistenceMethod]))},z.prototype.copy=function(e){var t=new z(this.filename,{env:"NA"}),n,r;if(e=e||{},t.loadJSONObject(this,{retainDirtyFlags:!0}),e.hasOwnProperty("removeNonSerializable")&&e.removeNonSerializable===!0)for(t.autosaveHandle=null,t.persistenceAdapter=null,n=t.collections.length,r=0;r<n;r++)t.collections[r].constraints=null,t.collections[r].ttl=null;return t},z.prototype.addCollection=function(e,t){var n,r=this.collections.length;if(t&&t.disableMeta===!0){if(t.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(t.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof t.ttl=="number"&&t.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(n=0;n<r;n+=1)if(this.collections[n].name===e)return this.collections[n];var a=new k(e,t);return a.isIncremental=this.isIncremental,this.collections.push(a),this.verbose&&(a.lokiConsoleWrapper=console),a},z.prototype.loadCollection=function(e){if(!e.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(e)},z.prototype.getCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e)return this.collections[t];return this.emit("warning","collection "+e+" not found"),null},z.prototype.renameCollection=function(e,t){var n=this.getCollection(e);return n&&(n.name=t),n},z.prototype.listCollections=function(){for(var e=this.collections.length,t=[];e--;)t.push({name:this.collections[e].name,type:this.collections[e].objType,count:this.collections[e].data.length});return t},z.prototype.removeCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e){var r=new k(e,{}),a=this.collections[t];for(var l in a)a.hasOwnProperty(l)&&r.hasOwnProperty(l)&&(a[l]=r[l]);this.collections.splice(t,1);return}},z.prototype.getName=function(){return this.name},z.prototype.serializeReplacer=function(e,t){switch(e){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return t}},z.prototype.serialize=function(e){switch(e=e||{},e.hasOwnProperty("serializationMethod")||(e.serializationMethod=this.options.serializationMethod),e.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},z.prototype.toJson=z.prototype.serialize,z.prototype.serializeDestructured=function(e){var t,n,r,a,l=[],v;if(e=e||{},e.hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),e.partitioned===!0&&e.hasOwnProperty("partition")&&e.partition>=0)return this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:e.partition});for(v=new z(this.filename),v.loadJSONObject(this),t=0;t<v.collections.length;t++)v.collections[t].data=[];if(e.partitioned===!0&&e.partition===-1)return v.serialize({serializationMethod:"normal"});for(l.push(v.serialize({serializationMethod:"normal"})),v=null,t=0;t<this.collections.length;t++)if(r=this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:t}),e.partitioned===!1&&e.delimited===!1){if(!Array.isArray(r))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(a=r.length,n=0;n<a;n++)l.push(r[n]),r[n]=null;l.push("")}else l.push(r);return e.partitioned?(e.delimited,l):e.delimited?(l.push(""),l.join(e.delimiter)):(l.push(""),l)},z.prototype.serializeCollection=function(e){var t,n,r=[];if(e=e||{},e.hasOwnProperty("delimited")||(e.delimited=!0),!e.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(t=this.collections[e.collectionIndex].data.length,r=[],n=0;n<t;n++)r.push(JSON.stringify(this.collections[e.collectionIndex].data[n]));return e.delimited?(r.push(""),r.join(e.delimiter)):r},z.prototype.deserializeDestructured=function(e,t){var n=[],r,a,l=0,v,y=1,I=!1,C;if(t=t||{},t.hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.partitioned){if(t.hasOwnProperty("partition"))return t.partition===-1?(a=JSON.parse(e[0]),a):this.deserializeCollection(e[t.partition+1],t);for(a=JSON.parse(e[0]),v=a.collections.length,l=0;l<v;l++)a.collections[l].data=this.deserializeCollection(e[l+1],t);return a}if(t.delimited){if(n=e.split(t.delimiter),e=null,r=n.length,r===0)return null}else n=e;for(a=JSON.parse(n[0]),v=a.collections.length,n[0]=null;!I;)n[y]===""?++l>v&&(I=!0):(C=JSON.parse(n[y]),a.collections[l].data.push(C)),n[y++]=null;return a},z.prototype.deserializeCollection=function(e,t){var n=[],r,a;for(t=t||{},t.hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.delimited?(n=e.split(t.delimiter),n.pop()):n=e,a=n.length,r=0;r<a;r++)n[r]=JSON.parse(n[r]);return n},z.prototype.loadJSON=function(e,t){var n;if(e.length===0)n={};else switch(this.options.serializationMethod){case"normal":case"pretty":n=JSON.parse(e);break;case"destructured":n=this.deserializeDestructured(e);break;default:n=JSON.parse(e);break}this.loadJSONObject(n,t)},z.prototype.loadJSONObject=function(e,t){var n=0,r=e.collections?e.collections.length:0,a,l,v,y,I,C;this.name=e.name,e.hasOwnProperty("throttledSaves")&&t&&!t.hasOwnProperty("throttledSaves")&&(this.throttledSaves=e.throttledSaves),this.collections=[];function E(S){var R=t[S.name],re;return R.proto?(re=R.inflate||d.copyProperties,function(he){var Y=new R.proto;return re(he,Y),Y}):R.inflate}for(n;n<r;n+=1){if(a=e.collections[n],l=this.addCollection(a.name,{disableChangesApi:a.disableChangesApi,disableDeltaChangesApi:a.disableDeltaChangesApi,disableMeta:a.disableMeta,disableFreeze:a.hasOwnProperty("disableFreeze")?a.disableFreeze:!0}),l.adaptiveBinaryIndices=a.hasOwnProperty("adaptiveBinaryIndices")?a.adaptiveBinaryIndices===!0:!1,l.transactional=a.transactional,l.asyncListeners=a.asyncListeners,l.cloneObjects=a.cloneObjects,l.cloneMethod=a.cloneMethod||"parse-stringify",l.autoupdate=a.autoupdate,l.changes=a.changes,l.dirtyIds=a.dirtyIds||[],t&&t.retainDirtyFlags===!0?l.dirty=a.dirty:l.dirty=!1,v=a.data.length,y=0,t&&t.hasOwnProperty(a.name))for(I=E(a),y;y<v;y++)C=I(a.data[y]),l.data[y]=C,l.addAutoUpdateObserver(C),l.disableFreeze||m(l.data[y]);else for(y;y<v;y++)l.data[y]=a.data[y],l.addAutoUpdateObserver(l.data[y]),l.disableFreeze||m(l.data[y]);if(l.maxId=typeof a.maxId=="undefined"?0:a.maxId,typeof a.binaryIndices!="undefined"&&(l.binaryIndices=a.binaryIndices),typeof a.transforms!="undefined"&&(l.transforms=a.transforms),l.uniqueNames=[],a.hasOwnProperty("uniqueNames")&&(l.uniqueNames=a.uniqueNames),typeof a.DynamicViews!="undefined"){for(var $=0;$<a.DynamicViews.length;$++){var M=a.DynamicViews[$],V=l.addDynamicView(M.name,M.options);V.resultdata=M.resultdata,V.resultsdirty=M.resultsdirty,V.filterPipeline=M.filterPipeline,V.sortCriteriaSimple=M.sortCriteriaSimple,V.sortCriteria=M.sortCriteria,V.sortFunction=null,V.sortDirty=M.sortDirty,l.disableFreeze||(m(V.filterPipeline),V.sortCriteriaSimple?m(V.sortCriteriaSimple):V.sortCriteria&&m(V.sortCriteria)),V.resultset.filteredrows=M.resultset.filteredrows,V.resultset.filterInitialized=M.resultset.filterInitialized,V.rematerialize({removeWhereFilters:!0})}e.databaseVersion<1.5&&(l.ensureAllIndexes(!0),l.dirty=!0)}}},z.prototype.close=function(e){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(e),e=void 0)),e&&this.on("close",e),this.emit("close")},z.prototype.generateChangesNotification=function(e){function t(a){return a.name}var n=[],r=e||this.collections.map(t);return this.collections.forEach(function(a){r.indexOf(t(a))!==-1&&(n=n.concat(a.getChanges()))}),n},z.prototype.serializeChanges=function(e){return JSON.stringify(this.generateChangesNotification(e))},z.prototype.clearChanges=function(){this.collections.forEach(function(e){e.flushChanges&&e.flushChanges()})};function ae(e){this.hashStore={},this.options=e||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}ae.prototype.loadDatabase=function(e,t){var n=this;this.options.asyncResponses?setTimeout(function(){n.hashStore.hasOwnProperty(e)?t(n.hashStore[e].value):t(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(e)?t(this.hashStore[e].value):t(null)},ae.prototype.saveDatabase=function(e,t,n){var r=this,a;this.options.asyncResponses?setTimeout(function(){a=r.hashStore.hasOwnProperty(e)?r.hashStore[e].savecount:0,r.hashStore[e]={savecount:a+1,lastsave:new Date,value:t},n()},this.options.asyncTimeout):(a=this.hashStore.hasOwnProperty(e)?this.hashStore[e].savecount:0,this.hashStore[e]={savecount:a+1,lastsave:new Date,value:t},n())},ae.prototype.deleteDatabase=function(e,t){this.hashStore.hasOwnProperty(e)&&delete this.hashStore[e],typeof t=="function"&&t()};function le(e,t){if(this.mode="reference",this.adapter=null,this.options=t||{},this.dbref=null,this.dbname="",this.pageIterator={},e){if(e.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=e}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}le.prototype.loadDatabase=function(e,t){var n=this;this.dbname=e,this.dbref=new z(e),this.adapter.loadDatabase(e,function(r){if(!r){t(r);return}typeof r!="string"&&t(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var a=JSON.parse(r);if(n.dbref.loadJSONObject(a),a=null,n.dbref.collections.length,n.dbref.collections.length===0){t(n.dbref);return}n.pageIterator={collection:0,pageIndex:0},n.loadNextPartition(0,function(){t(n.dbref)})})},le.prototype.loadNextPartition=function(e,t){var n=this.dbname+"."+e,r=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(t);return}this.adapter.loadDatabase(n,function(a){var l=r.dbref.deserializeCollection(a,{delimited:!0,collectionIndex:e});r.dbref.collections[e].data=l,++e<r.dbref.collections.length?r.loadNextPartition(e,t):t()})},le.prototype.loadNextPage=function(e){var t=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,n=this;this.adapter.loadDatabase(t,function(r){var a=r.split(n.options.delimiter);r="";var l=a.length,v,y=a[l-1]==="";for(y&&(a.pop(),l=a.length,a[l-1]===""&&l===1&&(a.pop(),l=a.length)),v=0;v<l;v++)n.dbref.collections[n.pageIterator.collection].data.push(JSON.parse(a[v])),a[v]=null;a=[],y?++n.pageIterator.collection<n.dbref.collections.length?n.loadNextPartition(n.pageIterator.collection,e):e():(n.pageIterator.pageIndex++,n.loadNextPage(e))})},le.prototype.exportDatabase=function(e,t,n){var r,a=t.collections.length;for(this.dbref=t,this.dbname=e,this.dirtyPartitions=[-1],r=0;r<a;r++)t.collections[r].dirty&&this.dirtyPartitions.push(r);this.saveNextPartition(function(l){n(l)})},le.prototype.saveNextPartition=function(e){var t=this,n=this.dirtyPartitions.shift(),r=this.dbname+(n===-1?"":"."+n);if(this.options.paging&&n!==-1){this.pageIterator={collection:n,docIndex:0,pageIndex:0},this.saveNextPage(function(l){t.dirtyPartitions.length===0?e(l):t.saveNextPartition(e)});return}var a=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:n});this.adapter.saveDatabase(r,a,function(l){if(l){e(l);return}t.dirtyPartitions.length===0?e(null):t.saveNextPartition(e)})},le.prototype.saveNextPage=function(e){var t=this,n=this.dbref.collections[this.pageIterator.collection],r=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,a=0,l=n.data.length,v=this.options.delimiter.length,y="",I="",C=!1,E=!1,$=function(M){I="",M&&e(M),C?e(null):(t.pageIterator.pageIndex++,t.saveNextPage(e))};for(n.data.length===0&&(C=!0);;)if(C||(y=JSON.stringify(n.data[this.pageIterator.docIndex]),I+=y,a+=y.length,++this.pageIterator.docIndex>=l&&(C=!0)),a>=this.options.pageSize&&(E=!0),(!E||C)&&(I+=this.options.delimiter,a+=v),C||E){this.adapter.saveDatabase(r,I,$);return}};function ce(){try{this.fs=require("fs")}catch{this.fs=null}}ce.prototype.loadDatabase=function(t,n){var r=this;this.fs.stat(t,function(a,l){!a&&l.isFile()?r.fs.readFile(t,{encoding:"utf8"},function(y,I){n(y?new Error(y):I)}):n(null)})},ce.prototype.saveDatabase=function(t,n,r){var a=this,l=t+"~";this.fs.writeFile(l,n,function(y){y?r(new Error(y)):a.fs.rename(l,t,r)})},ce.prototype.deleteDatabase=function(t,n){this.fs.unlink(t,function(a){a?n(new Error(a)):n()})};function de(){}de.prototype.loadDatabase=function(t,n){j()?n(localStorage.getItem(t)):n(new Error("localStorage is not available"))},de.prototype.saveDatabase=function(t,n,r){j()?(localStorage.setItem(t,n),r(null)):r(new Error("localStorage is not available"))},de.prototype.deleteDatabase=function(t,n){j()?(localStorage.removeItem(t),n(null)):n(new Error("localStorage is not available"))},z.prototype.throttledSaveDrain=function(e,t){var n=this,r=new Date().getTime();if(this.throttledSaves||e(!0),t=t||{},t.hasOwnProperty("recursiveWait")||(t.recursiveWait=!0),t.hasOwnProperty("recursiveWaitLimit")||(t.recursiveWaitLimit=!1),t.hasOwnProperty("recursiveWaitLimitDuration")||(t.recursiveWaitLimitDuration=2e3),t.hasOwnProperty("started")||(t.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(t.recursiveWait)this.throttledCallbacks.push(function(){if(n.throttledSavePending){if(t.recursiveWaitLimit&&r-t.started>t.recursiveWaitLimitDuration){e(!1);return}n.throttledSaveDrain(e,t);return}else{e(!0);return}});else{this.throttledCallbacks.push(e);return}else e(!0)},z.prototype.loadDatabaseInternal=function(e,t){var n=t||function(a,l){if(a)throw a},r=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(l){if(typeof l=="string"){var v=!1;try{r.loadJSON(l,e||{}),v=!0}catch(y){n(y)}v&&(n(null),r.emit("loaded","database "+r.filename+" loaded"))}else{if(!l){n(null),r.emit("loaded","empty database "+r.filename+" loaded");return}if(l instanceof Error){n(l);return}if(typeof l=="object"){r.loadJSONObject(l,e||{}),n(null),r.emit("loaded","database "+r.filename+" loaded");return}n("unexpected adapter response : "+l)}}):n(new Error("persistenceAdapter not configured"))},z.prototype.loadDatabase=function(e,t){var n=this;if(!this.throttledSaves){this.loadDatabaseInternal(e,t);return}this.throttledSaveDrain(function(r){if(r){n.throttledSavePending=!0,n.loadDatabaseInternal(e,function(a){n.throttledCallbacks.length===0?n.throttledSavePending=!1:n.saveDatabase(),typeof t=="function"&&t(a)});return}else typeof t=="function"&&t(new Error("Unable to pause save throttling long enough to read database"))},e)},z.prototype.saveDatabaseInternal=function(e){var t=e||function(a){if(a)throw a},n=this;if(!this.persistenceAdapter){t(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var r;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(n.ignoreAutosave=!1,r){t(new Error("adapter error - getLokiCopy called more than once"));return}var l=n.copy({removeNonSerializable:!0});return r=n.collections.map(function(v){return[v.dirty,v.dirtyIds]}),n.collections.forEach(function(v){v.dirty=!1,v.dirtyIds=[]}),l},function(l){n.ignoreAutosave=!1,l&&r&&n.collections.forEach(function(v,y){var I=r[y];v.dirty=v.dirty||I[0],v.dirtyIds=v.dirtyIds.concat(I[1])}),t(l)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(l){n.autosaveClearFlags(),t(l)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(l){t(l)}))},z.prototype.saveDatabase=function(e){if(!this.throttledSaves){this.saveDatabaseInternal(e);return}if(this.throttledSavePending){this.throttledCallbacks.push(e);return}var t=this.throttledCallbacks;this.throttledCallbacks=[],t.unshift(e),this.throttledSavePending=!0;var n=this;this.saveDatabaseInternal(function(r){n.throttledSavePending=!1,t.forEach(function(a){typeof a=="function"&&setTimeout(function(){a(r)},1)}),n.throttledCallbacks.length>0&&n.saveDatabase()})},z.prototype.save=z.prototype.saveDatabase,z.prototype.deleteDatabase=function(e,t){var n=t||function(r,a){if(r)throw r};typeof e=="function"&&!t&&(n=e),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(a){n(a)}):n(new Error("persistenceAdapter not configured"))},z.prototype.autosaveDirty=function(){for(var e=0;e<this.collections.length;e++)if(this.collections[e].dirty)return!0;return!1},z.prototype.autosaveClearFlags=function(){for(var e=0;e<this.collections.length;e++)this.collections[e].dirty=!1},z.prototype.autosaveEnable=function(e,t){this.autosave=!0;var n=5e3,r=this;typeof this.autosaveInterval!="undefined"&&this.autosaveInterval!==null&&(n=this.autosaveInterval),this.autosaveHandle=setInterval(function(){r.autosaveDirty()&&!r.ignoreAutosave&&r.saveDatabase(t)},n)},z.prototype.autosaveDisable=function(){typeof this.autosaveHandle!="undefined"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function W(e,t){return this.collection=e,this.filteredrows=[],this.filterInitialized=!1,this}W.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},W.prototype.toJSON=function(){var e=this.copy();return e.collection=null,e},W.prototype.limit=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=new W(this.collection);return t.filteredrows=this.filteredrows.slice(0,e),t.filterInitialized=!0,t},W.prototype.offset=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=new W(this.collection);return t.filteredrows=this.filteredrows.slice(e),t.filterInitialized=!0,t},W.prototype.copy=function(){var e=new W(this.collection);return this.filteredrows.length>0&&(e.filteredrows=this.filteredrows.slice()),e.filterInitialized=this.filterInitialized,e},W.prototype.branch=W.prototype.copy,W.prototype.transform=function(e,t){var n,r,a=this;if(typeof e=="string"&&this.collection.transforms.hasOwnProperty(e)&&(e=this.collection.transforms[e]),typeof e!="object"||!Array.isArray(e))throw new Error("Invalid transform");for(typeof t!="undefined"&&(e=d.resolveTransformParams(e,t)),n=0;n<e.length;n++)switch(r=e[n],r.type){case"find":a.find(r.value);break;case"where":a.where(r.value);break;case"simplesort":a.simplesort(r.property,r.desc||r.options);break;case"compoundsort":a.compoundsort(r.value);break;case"sort":a.sort(r.value);break;case"limit":a=a.limit(r.value);break;case"offset":a=a.offset(r.value);break;case"map":a=a.map(r.value,r.dataOptions);break;case"eqJoin":a=a.eqJoin(r.joinData,r.leftJoinKey,r.rightJoinKey,r.mapFun,r.dataOptions);break;case"mapReduce":a=a.mapReduce(r.mapFunction,r.reduceFunction);break;case"update":a.update(r.value);break;case"remove":a.remove();break}return a},W.prototype.sort=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=function(n,r){return function(a,l){return n(r[a],r[l])}}(e,this.collection.data);return this.filteredrows.sort(t),this},W.prototype.simplesort=function(e,t){var n,r=10,a=this.collection.data.length,l=this.filteredrows.length,v=this.collection.binaryIndices.hasOwnProperty(e);if((typeof t=="undefined"||t===!1)&&(t={desc:!1}),t===!0&&(t={desc:!0}),l===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(e))return this.collection.ensureIndex(e),this.filteredrows=this.collection.binaryIndices[e].values.slice(0),t.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!t.disableIndexIntersect&&v&&(n=a/l,t.useJavascriptSorting&&(r=6),n<=r||t.forceIndexIntersect)){var y,I=this.filteredrows,C={};for(y=0;y<l;y++)C[I[y]]=!0;var E=this.collection.binaryIndices[e].values;return this.filteredrows=E.filter(function(M){return C[M]}),t.desc&&this.filteredrows.reverse(),this}if(t.useJavascriptSorting)return this.sort(function(M,V){if(M[e]===V[e])return 0;if(M[e]>V[e])return 1;if(M[e]<V[e])return-1});var $=function(M,V,S){var R,re,he;return function(Y,De){return~M.indexOf(".")?(he=M.split("."),R=d.getIn(S[Y],he,!0),re=d.getIn(S[De],he,!0)):(R=S[Y][M],re=S[De][M]),D(R,re,V)}}(e,t.desc,this.collection.data);return this.filteredrows.sort($),this},W.prototype.compoundsort=function(e){if(e.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var t;if(e.length===1)return t=e[0],Array.isArray(t)?this.simplesort(t[0],t[1]):this.simplesort(t,!1);for(var n=0,r=e.length;n<r;n+=1)t=e[n],Array.isArray(t)||(e[n]=[t,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var a=function(l,v){return function(y,I){return q(l,v[y],v[I])}}(e,this.collection.data);return this.filteredrows.sort(a),this},W.prototype.findOr=function(e){var t=null,n=0,r=0,a=[],l=[],v=0;this.count();for(var y=0,I=e.length;y<I;y++)for(t=this.branch().find(e[y]).filteredrows,r=t.length,n=0;n<r;n++)v=t[n],l[v]===void 0&&(l[v]=!0,a.push(v));return this.filteredrows=a,this.filterInitialized=!0,this},W.prototype.$or=W.prototype.findOr;function Se(e,t){if(e==="$regex")Array.isArray(t)?t=new RegExp(t[0],t[1]):t instanceof RegExp||(t=new RegExp(t));else if(typeof t=="object")for(var n in t)(n==="$regex"||typeof t[n]=="object")&&(t[n]=Se(n,t[n]));return t}W.prototype.findAnd=function(e){for(var t=0,n=e.length;t<n;t++){if(this.count()===0)return this;this.find(e[t])}return this},W.prototype.$and=W.prototype.findAnd,W.prototype.find=function(e,t){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var n=e||"getAll",r,a,l,v,y,I,C,E=!1,$=[],M=[],V=null;if(t=t||!1,typeof n=="object"){for(r in n)v={},v[r]=n[r],M.push(v),c.call(n,r)&&(a=r,l=n[r]);if(M.length>1)return this.find({$and:M},t)}if(!a||n==="getAll")return t&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(a==="$and"||a==="$or")return this[a](l),t&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(l===null||typeof l!="object"||l instanceof Date)y="$eq",I=l;else if(typeof l=="object"){for(C in l)if(c.call(l,C)){y=C,I=l[C];break}}else throw new Error("Do not know what you want to do.");(y==="$regex"||typeof I=="object")&&(I=Se(y,I));var S=a.indexOf(".")!==-1,R=!this.filterInitialized;R&&this.collection.binaryIndices[a]&&B[y]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(a),E=!0,V=this.collection.binaryIndices[a]),!E&&y==="$in"&&Array.isArray(I)&&typeof Set!="undefined"&&(I=new Set(I),y="$inSet");var re=A[y],he=this.collection.data,Y=0,De=0,Le,Oe=0,be;if(this.filterInitialized){if(Le=this.filteredrows,De=Le.length,S){for(a=a.split("."),Y=0;Y<De;Y++)if(Oe=Le[Y],be=he[Oe],g(be,a,re,I,be)&&($.push(Oe),t))return this.filteredrows=$,this}else for(Y=0;Y<De;Y++)if(Oe=Le[Y],be=he[Oe],re(be[a],I,be)&&($.push(Oe),t))return this.filteredrows=$,this}else if(E){var Ve=this.collection.calculateRange(y,a,I);if(y!=="$in"){for(Y=Ve[0];Y<=Ve[1];Y++)if(B[y]!==!0){if(B[y](d.getIn(he[V.values[Y]],a,S),I)&&($.push(V.values[Y]),t))return this.filteredrows=$,this.filterInitialized=!0,this}else if($.push(V.values[Y]),t)return this.filteredrows=$,this.filterInitialized=!0,this}else for(Y=0,De=Ve.length;Y<De;Y++)if($.push(V.values[Ve[Y]]),t)return this.filteredrows=$,this.filterInitialized=!0,this}else if(De=he.length,S){for(a=a.split("."),Y=0;Y<De;Y++)if(be=he[Y],g(be,a,re,I,be)&&($.push(Y),t))return this.filteredrows=$,this.filterInitialized=!0,this}else for(Y=0;Y<De;Y++)if(be=he[Y],re(be[a],I,be)&&($.push(Y),t))return this.filteredrows=$,this.filterInitialized=!0,this;return this.filteredrows=$,this.filterInitialized=!0,this},W.prototype.where=function(e){var t,n=[];if(typeof e=="function")t=e;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)t(this.collection.data[this.filteredrows[r]])===!0&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}else{for(var a=this.collection.data.length;a--;)t(this.collection.data[a])===!0&&n.push(a);return this.filteredrows=n,this.filterInitialized=!0,this}}catch(l){throw l}},W.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},W.prototype.data=function(e){var t=[],n=this.collection.data,r,a,l,v;if(e=e||{},e.removeMeta&&!e.forceClones&&(e.forceClones=!0,e.forceCloneMethod=e.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(e.forceClones=!0,e.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||e.forceClones){for(a=n.length,v=e.forceCloneMethod||this.collection.cloneMethod,l=0;l<a;l++)r=Q(n[l],v),e.removeMeta&&(delete r.$loki,delete r.meta),t.push(r);return t}else return n.slice();else this.filterInitialized=!0;var y=this.filteredrows;if(a=y.length,this.collection.cloneObjects||e.forceClones)for(v=e.forceCloneMethod||this.collection.cloneMethod,l=0;l<a;l++)r=Q(n[y[l]],v),e.removeMeta&&(delete r.$loki,delete r.meta),t.push(r);else for(l=0;l<a;l++)t.push(n[y[l]]);return t},W.prototype.update=function(e){if(typeof e!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var t,n=this.filteredrows.length,r=this.collection.data,a=0;a<n;a++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(t=Q(r[this.filteredrows[a]],this.collection.cloneMethod),e(t),this.collection.update(t)):(e(r[this.filteredrows[a]]),this.collection.update(r[this.filteredrows[a]]));return this},W.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},W.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(n){throw n}},W.prototype.eqJoin=function(e,t,n,r,a){var l=[],v,y=[],I,C,E=[],$=typeof t=="function",M=typeof n=="function",V={};if(l=this.data(a),v=l.length,e instanceof k)y=e.chain().data(a);else if(e instanceof W)y=e.data(a);else if(Array.isArray(e))y=e;else throw new TypeError("joinData needs to be an array or result set");I=y.length;for(var S=0;S<I;S++)C=M?n(y[S]):y[S][n],V[C]=y[S];r||(r=function(re,he){return{left:re,right:he}});for(var R=0;R<v;R++)C=$?t(l[R]):l[R][t],E.push(r(l[R],V[C]||{}));return this.collection=new k("joinData"),this.collection.insert(E),this.filteredrows=[],this.filterInitialized=!1,this},W.prototype.map=function(e,t){var n=this.data(t).map(e);return this.collection=new k("mappedData"),this.collection.insert(n),this.filteredrows=[],this.filterInitialized=!1,this};function U(e,t,n){this.collection=e,this.name=t,this.rebuildPending=!1,this.options=n||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new W(e),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}U.prototype=new ne,U.prototype.constructor=U,U.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},U.prototype.rematerialize=function(e){var t,n,r;e=e||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new W(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var a=Object.isFrozen(this.filterPipeline);if(e.hasOwnProperty("removeWhereFilters"))for(a&&(this.filterPipeline=this.filterPipeline.slice()),t=this.filterPipeline.length,n=t;n--;)this.filterPipeline[n].type==="where"&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var l=this.filterPipeline;for(this.filterPipeline=[],t=l.length,r=0;r<t;r++)this.applyFind(l[r].val,l[r].uid);return a&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},U.prototype.branchResultset=function(e,t){var n=this.resultset.branch();return typeof e=="undefined"?n:n.transform(e,t)},U.prototype.toJSON=function(){var e=new U(this.collection,this.name,this.options);return e.resultset=this.resultset,e.resultdata=[],e.resultsdirty=!0,e.filterPipeline=this.filterPipeline,e.sortFunction=this.sortFunction,e.sortCriteria=this.sortCriteria,e.sortCriteriaSimple=this.sortCriteriaSimple||null,e.sortDirty=this.sortDirty,e.collection=null,e},U.prototype.removeFilters=function(e){e=e||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var t=Object.isFrozen(this.filterPipeline),n=this.filterPipeline.length>0;this.filterPipeline=[],t&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,e.queueSortPhase===!0&&this.queueSortPhase(),n&&this.emit("filter")},U.prototype.applySort=function(e){return this.sortFunction=e,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.applySimpleSort=function(e,t){return this.sortCriteriaSimple={propname:e,options:t||!1},this.collection.disableFreeze||m(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.applySortCriteria=function(e){return this.sortCriteria=e,this.collection.disableFreeze||m(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},U.prototype.commit=function(){return this.cachedresultset=null,this},U.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},U.prototype._indexOfFilterWithId=function(e){if(typeof e=="string"||typeof e=="number"){for(var t=0,n=this.filterPipeline.length;t<n;t+=1)if(e===this.filterPipeline[t].uid)return t}return-1},U.prototype._addFilter=function(e){var t=Object.isFrozen(this.filterPipeline);t&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||m(e),this.filterPipeline.push(e),t&&Object.freeze(this.filterPipeline),this.resultset[e.type](e.val)},U.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var e=this.filterPipeline,t=Object.isFrozen(e);this.filterPipeline=[];for(var n=0,r=e.length;n<r;n+=1)this._addFilter(e[n]);return t&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},U.prototype.applyFilter=function(e){var t=this._indexOfFilterWithId(e.uid);if(t>=0){var n=Object.isFrozen(this.filterPipeline);return n&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[t]=e,n&&(o(e),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(e),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},U.prototype.applyFind=function(e,t){return this.applyFilter({type:"find",val:e,uid:t}),this},U.prototype.applyWhere=function(e,t){return this.applyFilter({type:"where",val:e,uid:t}),this},U.prototype.removeFilter=function(e){var t=this._indexOfFilterWithId(e);if(t<0)throw new Error("Dynamic view does not contain a filter with ID: "+e);var n=Object.isFrozen(this.filterPipeline);return n&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(t,1),n&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},U.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},U.prototype.data=function(e){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(e)},U.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var e=this;setTimeout(function(){e.rebuildPending&&(e.rebuildPending=!1,e.emit("rebuild",e))},this.options.minRebuildInterval)}},U.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var e=this;this.options.sortPriority==="active"?setTimeout(function(){e.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},U.prototype.performSortPhase=function(e){!this.sortDirty&&!this.resultsdirty||(e=e||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),e.suppressRebuildEvent||this.emit("rebuild",this))},U.prototype.evaluateDocument=function(e,t){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var n=this.resultset.filteredrows,r=t?-1:n.indexOf(+e),a=n.length,l=new W(this.collection);l.filteredrows=[e],l.filterInitialized=!0;for(var v,y=0,I=this.filterPipeline.length;y<I;y++)v=this.filterPipeline[y],l[v.type](v.val);var C=l.filteredrows.length===0?-1:0;if(!(r===-1&&C===-1)){if(r===-1&&C!==-1){n.push(e),this.options.persistent&&this.resultdata.push(this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(r!==-1&&C===-1){r<a-1?(n.splice(r,1),this.options.persistent&&this.resultdata.splice(r,1)):(n.length=a-1,this.options.persistent&&(this.resultdata.length=a-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(r!==-1&&C!==-1){this.options.persistent&&(this.resultdata[r]=this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},U.prototype.removeDocument=function(e){var t,n,r,a={},l={},v=[],y=this.resultset,I=this.resultset.filteredrows,C=I.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray(e)||(e=[e]),r=e.length,n=0;n<r;n++)a[e[n]]=!0;for(t=0;t<C;t++)a[I[t]]&&(l[t]=!0);Object.keys(l).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function($,M){return!l[M]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function($,M){return!l[M]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var E=function($){return function(M){return M<y.filteredrows[$]}};for(C=y.filteredrows.length,t=0;t<C;t++)v=e.filter(E(t)),y.filteredrows[t]-=v.length},U.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(n){throw n}};function k(e,t){this.name=e,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=e,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var n=this;t=t||{},t.hasOwnProperty("unique")&&(Array.isArray(t.unique)||(t.unique=[t.unique]),t.unique.forEach(function(C){n.uniqueNames.push(C)})),t.hasOwnProperty("exact")&&t.exact.forEach(function(C){n.constraints.exact[C]=new J(C)}),this.adaptiveBinaryIndices=t.hasOwnProperty("adaptiveBinaryIndices")?t.adaptiveBinaryIndices:!0,this.transactional=t.hasOwnProperty("transactional")?t.transactional:!1,this.cloneObjects=t.hasOwnProperty("clone")?t.clone:!1,this.cloneMethod=t.hasOwnProperty("cloneMethod")?t.cloneMethod:"parse-stringify",this.asyncListeners=t.hasOwnProperty("asyncListeners")?t.asyncListeners:!1,this.disableMeta=t.hasOwnProperty("disableMeta")?t.disableMeta:!1,this.disableChangesApi=t.hasOwnProperty("disableChangesApi")?t.disableChangesApi:!0,this.disableDeltaChangesApi=t.hasOwnProperty("disableDeltaChangesApi")?t.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=t.hasOwnProperty("autoupdate")?t.autoupdate:!1,this.serializableIndices=t.hasOwnProperty("serializableIndices")?t.serializableIndices:!0,this.disableFreeze=t.hasOwnProperty("disableFreeze")?t.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(t.ttl||-1,t.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var r=[];if(t&&t.indices)if(Object.prototype.toString.call(t.indices)==="[object Array]")r=t.indices;else if(typeof t.indices=="string")r=[t.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var a=0;a<r.length;a++)this.ensureIndex(r[a]);function l(C){var E=typeof Set=="function"?new Set:[];E.add||(E.add=function($){return this.indexOf($)===-1&&this.push($),this}),C.forEach(function($){E.add($.object)}),E.forEach(function($){if(!c.call($,"$loki"))return n.removeAutoUpdateObserver($);try{n.update($)}catch{}})}this.observerCallback=l;function v(C,E){return E?y(E,C):JSON.parse(JSON.stringify(C))}this.getChangeDelta=v;function y(C,E){var $=E!==null&&typeof E=="object"?Object.keys(E):null;if($&&$.length&&["string","boolean","number"].indexOf(typeof E)<0){for(var M={},V=0;V<$.length;V++){var S=$[V];if(E.hasOwnProperty(S))if(!C.hasOwnProperty(S)||n.uniqueNames.indexOf(S)>=0||S=="$loki"||S=="meta")M[S]=E[S];else{var R=y(C[S],E[S]);typeof R!="undefined"&&R!={}&&(M[S]=R)}}return Object.keys(M).length===0?void 0:M}else return C===E?void 0:E}this.getObjectDelta=y;function I(){n.changes=[]}this.getChanges=function(){return n.changes},this.flushChanges=I,this.setChangesApi=function(C){n.disableChangesApi=!C,C||(n.disableDeltaChangesApi=!1)},this.on("delete",function(E){n.disableChangesApi||n.createChange(n.name,"R",E)}),this.on("warning",function(C){n.lokiConsoleWrapper.warn(C)}),I()}k.prototype=new ne,k.prototype.contructor=k,k.prototype.createChange=function(e,t,n,r){this.changes.push({name:e,operation:t,obj:t=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(n,r):JSON.parse(JSON.stringify(n))})},k.prototype.insertMeta=function(e){var t,n;if(!(this.disableMeta||!e)){if(Array.isArray(e)){for(t=e.length,n=0;n<t;n++)e[n].hasOwnProperty("meta")||(e[n].meta={}),e[n].meta.created=new Date().getTime(),e[n].meta.revision=0;return}e.meta||(e.meta={}),e.meta.created=new Date().getTime(),e.meta.revision=0}},k.prototype.updateMeta=function(e){return this.disableMeta||!e||(this.disableFreeze||(e=s(e),e.meta=s(e.meta)),e.meta.updated=new Date().getTime(),e.meta.revision+=1),e},k.prototype.createInsertChange=function(e){this.createChange(this.name,"I",e)},k.prototype.createUpdateChange=function(e,t){this.createChange(this.name,"U",e,t)},k.prototype.insertMetaWithChange=function(e){this.insertMeta(e),this.createInsertChange(e)},k.prototype.updateMetaWithChange=function(e,t,n){return e=this.updateMeta(e,n),this.createUpdateChange(e,t),e},k.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},k.prototype.addAutoUpdateObserver=function(e){!this.autoupdate||typeof Object.observe!="function"||Object.observe(e,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},k.prototype.removeAutoUpdateObserver=function(e){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve(e,this.observerCallback)},k.prototype.addTransform=function(e,t){if(this.transforms.hasOwnProperty(e))throw new Error("a transform by that name already exists");this.transforms[e]=t},k.prototype.getTransform=function(e){return this.transforms[e]},k.prototype.setTransform=function(e,t){this.transforms[e]=t},k.prototype.removeTransform=function(e){delete this.transforms[e]},k.prototype.byExample=function(e){var t,n,r;r=[];for(t in e)!e.hasOwnProperty(t)||r.push((n={},n[t]=e[t],n));return{$and:r}},k.prototype.findObject=function(e){return this.findOne(this.byExample(e))},k.prototype.findObjects=function(e){return this.find(this.byExample(e))},k.prototype.ttlDaemonFuncGen=function(){var e=this,t=this.ttl.age;return function(){var r=Date.now(),a=e.chain().where(function(v){var y=v.meta.updated||v.meta.created,I=r-y;return t<I});a.remove()}},k.prototype.setTTL=function(e,t){e<0?clearInterval(this.ttl.daemon):(this.ttl.age=e,this.ttl.ttlInterval=t,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),t))},k.prototype.prepareFullDocIndex=function(){for(var e=this.data.length,t=new Array(e),n=0;n<e;n+=1)t[n]=n;return t},k.prototype.configureOptions=function(e){e=e||{},e.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=e.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},k.prototype.ensureIndex=function(e,t){if(typeof t=="undefined"&&(t=!1),e==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[e]&&!t&&!this.binaryIndices[e].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty(e)&&!t)){var n={name:e,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[e]=n;var r=function(a,l){var v,y,I=~a.indexOf(".")?a.split("."):!1;return function(C,E){if(I?(v=d.getIn(l[C],I,!0),y=d.getIn(l[E],I,!0)):(v=l[C][a],y=l[E][a]),v!==y){if(u.lt(v,y,!1))return-1;if(u.gt(v,y,!1))return 1}return 0}}(e,this.data);n.values.sort(r),n.dirty=!1,this.dirty=!0}},k.prototype.checkAllIndexes=function(e){var t,n=this.binaryIndices,r=[],a;for(t in n)c.call(n,t)&&(a=this.checkIndex(t,e),a||r.push(t));return r},k.prototype.checkIndex=function(e,t){t=t||{},t.randomSamplingFactor&&t.randomSampling!==!1&&(t.randomSampling=!0),t.randomSamplingFactor=t.randomSamplingFactor||.1,(t.randomSamplingFactor<0||t.randomSamplingFactor>1)&&(t.randomSamplingFactor=.1);var n=!0,r,a,l,v,y;if(!this.binaryIndices.hasOwnProperty(e))throw new Error("called checkIndex on property without an index: "+e);if(this.adaptiveBinaryIndices||this.ensureIndex(e),y=this.binaryIndices[e].values,v=y.length,v!==this.data.length)return t.repair&&this.ensureIndex(e,!0),!1;if(v===0)return!0;var I=e.indexOf(".")!==-1;if(v===1)n=y[0]===0;else if(t.randomSampling){if(A.$lte(d.getIn(this.data[y[0]],e,I),d.getIn(this.data[y[1]],e,I))||(n=!1),A.$lte(d.getIn(this.data[y[v-2]],e,I),d.getIn(this.data[y[v-1]],e,I))||(n=!1),n){for(a=Math.floor((v-1)*t.randomSamplingFactor),r=0;r<a-1;r++)if(l=Math.floor(Math.random()*(v-1)),!A.$lte(d.getIn(this.data[y[l]],e,I),d.getIn(this.data[y[l+1]],e,I))){n=!1;break}}}else for(r=0;r<v-1;r++)if(!A.$lte(d.getIn(this.data[y[r]],e,I),d.getIn(this.data[y[r+1]],e,I))){n=!1;break}return!n&&t.repair&&this.ensureIndex(e,!0),n},k.prototype.getBinaryIndexValues=function(e){var t,n=this.binaryIndices[e].values,r=[];for(t=0;t<n.length;t++)r.push(d.getIn(this.data[n[t]],e,!0));return r},k.prototype.getUniqueIndex=function(e,t){var n=this.constraints.unique[e];return!n&&t?this.ensureUniqueIndex(e):n},k.prototype.ensureUniqueIndex=function(e){var t=this.constraints.unique[e];return t||this.uniqueNames.indexOf(e)==-1&&this.uniqueNames.push(e),this.constraints.unique[e]=t=new K(e),this.data.forEach(function(n){t.set(n)}),t},k.prototype.ensureAllIndexes=function(e){var t,n=this.binaryIndices;for(t in n)c.call(n,t)&&this.ensureIndex(t,e)},k.prototype.flagBinaryIndexesDirty=function(){var e,t=this.binaryIndices;for(e in t)c.call(t,e)&&(t[e].dirty=!0)},k.prototype.flagBinaryIndexDirty=function(e){this.binaryIndices[e]&&(this.binaryIndices[e].dirty=!0)},k.prototype.count=function(e){return e?this.chain().find(e).filteredrows.length:this.data.length},k.prototype.ensureId=function(){if(!this.idIndex){var e=this.data,t=0,n=e.length,r=new Array(n);for(t;t<n;t++)r[t]=e[t].$loki;this.idIndex=r}},k.prototype.ensureIdAsync=function(e){this.async(function(){this.ensureId()},e)},k.prototype.addDynamicView=function(e,t){var n=new U(this,e,t);return this.DynamicViews.push(n),n},k.prototype.removeDynamicView=function(e){this.DynamicViews=this.DynamicViews.filter(function(t){return t.name!==e})},k.prototype.getDynamicView=function(e){for(var t=0;t<this.DynamicViews.length;t++)if(this.DynamicViews[t].name===e)return this.DynamicViews[t];return null},k.prototype.findAndUpdate=function(e,t){typeof e=="function"?this.updateWhere(e,t):this.chain().find(e).update(t)},k.prototype.findAndRemove=function(e){this.chain().find(e).remove()},k.prototype.insert=function(e,t){if(!Array.isArray(e))return this.insertOne(e);var n,r=[],a=t&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;a&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",e);for(var l=0,v=e.length;l<v;l++){if(n=this.insertOne(e[l],!0),!n)return;r.push(n)}}finally{a&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",r),r=this.cloneObjects?Q(r,this.cloneMethod):r,r.length===1?r[0]:r},k.prototype.insertOne=function(e,t){var n=null,r;if(typeof e!="object"?n=new TypeError("Document needs to be an object"):e===null&&(n=new TypeError("Object cannot be null")),n!==null)throw this.emit("error",n),n;var a=this.cloneObjects?Q(e,this.cloneMethod):e;if(this.disableFreeze||(a=s(a)),this.disableMeta||(typeof a.meta=="undefined"?a.meta={revision:0,created:0}:this.disableFreeze||(a.meta=s(a.meta))),t||this.emit("pre-insert",a),!!this.add(a))return this.disableChangesApi?this.insertMeta(a):this.insertMetaWithChange(a),this.disableFreeze||m(a),r=this.cloneObjects?Q(a,this.cloneMethod):a,t||this.emit("insert",r),this.addAutoUpdateObserver(r),r},k.prototype.clear=function(e){var t=this;if(e=e||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},e.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var n=Object.keys(this.binaryIndices);n.forEach(function(r){t.binaryIndices[r].dirty=!1,t.binaryIndices[r].values=[]})}},k.prototype.update=function(e){var t,n,r;if(Array.isArray(e)){r=e.length,t=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,t&&(this.adaptiveBinaryIndices=!1);try{for(n=0;n<r;n+=1)this.update(e[n])}finally{t&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!c.call(e,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var a=this.get(e.$loki,!0),l,v,y,I=this;if(!a)throw new Error("Trying to update a document not in collection.");l=a[0],y=a[1],v=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?Q(e,this.cloneMethod):e,this.emit("pre-update",e),this.uniqueNames.forEach(function(V){I.getUniqueIndex(V,!0).update(l,v)}),this.data[y]=v,v!==e&&this.addAutoUpdateObserver(e);for(var C=0;C<this.DynamicViews.length;C++)this.DynamicViews[C].evaluateDocument(y,!1);var E;if(this.adaptiveBinaryIndices){var $=this.binaryIndices;for(E in $)this.adaptiveBinaryIndexUpdate(y,E)}else this.flagBinaryIndexesDirty();this.idIndex[y]=v.$loki,this.isIncremental&&this.dirtyIds.push(v.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?v=this.updateMeta(v):v=this.updateMetaWithChange(v,l),this.disableFreeze||m(v);var M;return this.cloneObjects?M=Q(v,this.cloneMethod):M=v,this.emit("update",M,l),M}catch(V){throw this.rollback(),this.lokiConsoleWrapper.error(V.message),this.emit("error",V),V}},k.prototype.add=function(e){if(typeof e!="object")throw new TypeError("Object being added needs to be an object");if(typeof e.$loki!="undefined")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var t=this.maxId;e.$loki=t,this.disableMeta||(e.meta.version=0);for(var n=0,r=this.uniqueNames.length;n<r;n++)this.getUniqueIndex(this.uniqueNames[n],!0).set(e);this.idIndex&&this.idIndex.push(t),this.isIncremental&&this.dirtyIds.push(t),this.data.push(e);var a=this.data.length-1,l=this.DynamicViews.length;for(n=0;n<l;n++)this.DynamicViews[n].evaluateDocument(a,!0);if(this.adaptiveBinaryIndices){var v=this.binaryIndices;for(var y in v)this.adaptiveBinaryIndexInsert(a,y)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?Q(e,this.cloneMethod):e}catch(I){throw this.rollback(),this.lokiConsoleWrapper.error(I.message),this.emit("error",I),I}},k.prototype.updateWhere=function(e,t){var n=this.where(e),r=0,a;try{for(r;r<n.length;r++)a=t(n[r]),this.update(a)}catch(l){this.rollback(),this.lokiConsoleWrapper.error(l.message)}},k.prototype.removeWhere=function(e){var t;typeof e=="function"?(t=this.data.filter(e),this.remove(t)):this.chain().find(e).remove()},k.prototype.removeDataOnly=function(){this.remove(this.data.slice())},k.prototype.removeBatchByPositions=function(e){var t=e.length,n={},r,a,l,v=Object.keys(this.binaryIndices).length,y=Object.keys(this.constraints.unique).length,I=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,C,E=this;try{for(this.startTransaction(),this.ensureId(),l=0;l<t;l++)n[this.idIndex[e[l]]]=!0;if(r=this.DynamicViews.length,r>0||v>0||y>0){if(r>0)for(a=0;a<r;a++)this.DynamicViews[a].removeDocument(e);if(this.adaptiveBinaryIndices&&!I){var $,M=this.binaryIndices;for($ in M)this.adaptiveBinaryIndexRemove(e,$)}else this.flagBinaryIndexesDirty();y&&this.uniqueNames.forEach(function(V){var S=E.getUniqueIndex(V);if(S)for(l=0;l<t;l++)C=E.data[e[l]],C[V]!==null&&C[V]!==void 0&&S.remove(C[V])})}if(!this.disableChangesApi||this.events.delete.length>1)for(l=0;l<t;l++)this.emit("delete",this.data[e[l]]);if(this.data=this.data.filter(function(V){return!n[V.$loki]}),this.isIncremental)for(l=0;l<t;l++)this.dirtyIds.push(this.idIndex[e[l]]);this.idIndex=this.idIndex.filter(function(V){return!n[V]}),this.adaptiveBinaryIndices&&I&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(V){return this.rollback(),I&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(V.message),this.emit("error",V),null}},k.prototype.removeBatch=function(e){var t=e.length,n=this.data.length,r,a={},l=[];for(r=0;r<n;r++)a[this.data[r].$loki]=r;for(r=0;r<t;r++)typeof e[r]=="object"?l.push(a[e[r].$loki]):l.push(a[e[r]]);this.removeBatchByPositions(l)},k.prototype.remove=function(e){if(typeof e=="number"&&(e=this.get(e)),typeof e!="object")throw new Error("Parameter is not an object");if(Array.isArray(e)){this.removeBatch(e);return}if(!c.call(e,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var t=this.get(e.$loki,!0),n=t[1],r=this;this.uniqueNames.forEach(function(y){if(e[y]!==null&&typeof e[y]!="undefined"){var I=r.getUniqueIndex(y);I&&I.remove(e[y])}});for(var a=0;a<this.DynamicViews.length;a++)this.DynamicViews[a].removeDocument(n);if(this.adaptiveBinaryIndices){var l,v=this.binaryIndices;for(l in v)this.adaptiveBinaryIndexRemove(n,l)}else this.flagBinaryIndexesDirty();return this.data.splice(n,1),this.removeAutoUpdateObserver(e),this.idIndex.splice(n,1),this.isIncremental&&this.dirtyIds.push(e.$loki),this.commit(),this.dirty=!0,this.emit("delete",t[0]),this.disableFreeze||(e=s(e)),delete e.$loki,delete e.meta,this.disableFreeze||o(e),e}catch(y){return this.rollback(),this.lokiConsoleWrapper.error(y.message),this.emit("error",y),null}},k.prototype.get=function(e,t){this.idIndex||this.ensureId();var n=t||!1,r=this.idIndex,a=r.length-1,l=0,v=l+a>>1;if(e=typeof e=="number"?e:parseInt(e,10),isNaN(e))throw new TypeError("Passed id is not an integer");for(;r[l]<r[a];)v=l+a>>1,r[v]<e?l=v+1:a=v;return a===l&&r[l]===e?n?[this.data[l],l]:this.data[l]:null},k.prototype.getBinaryIndexPosition=function(e,t){var n=d.getIn(this.data[e],t,!0),r=this.binaryIndices[t].values,a=this.calculateRange("$eq",t,n);if(a[0]===0&&a[1]===-1)return null;for(var l=a[0],v=a[1],y=l;y<=v;y++)if(r[y]===e)return y;return null},k.prototype.adaptiveBinaryIndexInsert=function(e,t){var n=t.indexOf(".")!==-1,r=this.binaryIndices[t].values,a=d.getIn(this.data[e],t,n);this.serializableIndices===!0&&a instanceof Date&&(this.data[e][t]=a.getTime(),a=d.getIn(this.data[e],t));var l=r.length===0?0:this.calculateRangeStart(t,a,!0,n);this.binaryIndices[t].values.splice(l,0,e)},k.prototype.adaptiveBinaryIndexUpdate=function(e,t){var n,r=this.binaryIndices[t].values,a=r.length;for(n=0;n<a&&r[n]!==e;n++);this.binaryIndices[t].values.splice(n,1),this.adaptiveBinaryIndexInsert(e,t)},k.prototype.adaptiveBinaryIndexRemove=function(e,t,n){var r=this.binaryIndices[t],a,l,v,y,I={},C,E,$;if(Array.isArray(e))if(y=e.length,y===1)e=e[0];else{for(v=0;v<y;v++)I[e[v]]=!0;if(r.values=r.values.filter(function(V){return!I[V]}),n===!0)return;var M=e.slice();for(M.sort(function(V,S){return V-S}),a=r.values.length,l=0;l<a;l++){for(C=r.values[l],E=0,v=0;v<y&&C>M[v];v++)E++;r.values[l]-=E}return}if($=this.getBinaryIndexPosition(e,t),$===null)return null;if(r.values.splice($,1),n!==!0)for(a=r.values.length,l=0;l<a;l++)r.values[l]>e&&r.values[l]--},k.prototype.calculateRangeStart=function(e,t,n,r){var a=this.data,l=this.binaryIndices[e].values,v=0,y=l.length-1,I=0;if(l.length===0)return-1;for(d.getIn(a[l[v]],e,r),d.getIn(a[l[y]],e,r);v<y;)I=v+y>>1,u.lt(d.getIn(a[l[I]],e,r),t,!1)?v=I+1:y=I;var C=v;return u.aeq(t,d.getIn(a[l[C]],e,r))?C:u.lt(t,d.getIn(a[l[C]],e,r),!1)?n?C:C-1:n?C+1:C},k.prototype.calculateRangeEnd=function(e,t,n){var r=this.data,a=this.binaryIndices[e].values,l=0,v=a.length-1,y=0;if(a.length===0)return-1;for(d.getIn(r[a[l]],e,n),d.getIn(r[a[v]],e,n);l<v;)y=l+v>>1,u.lt(t,d.getIn(r[a[y]],e,n),!1)?v=y:l=y+1;var I=v;return u.aeq(t,d.getIn(r[a[I]],e,n))?I:u.gt(t,d.getIn(r[a[I]],e,n),!1)?I+1:u.aeq(t,d.getIn(r[a[I-1]],e,n))?I-1:I},k.prototype.calculateRange=function(e,t,n){var r=this.data,a=this.binaryIndices[t].values,l=0,v=a.length-1,y,I,C;if(r.length===0)return[0,-1];var E=t.indexOf(".")!==-1,$=d.getIn(r[a[l]],t,E),M=d.getIn(r[a[v]],t,E);switch(e){case"$eq":case"$aeq":if(u.lt(n,$,!1)||u.gt(n,M,!1))return[0,-1];break;case"$dteq":if(u.lt(n,$,!1)||u.gt(n,M,!1))return[0,-1];break;case"$gt":if(u.gt(n,M,!0))return[0,-1];if(u.gt($,n,!1))return[l,v];break;case"$gte":if(u.gt(n,M,!1))return[0,-1];if(u.gt($,n,!0))return[l,v];break;case"$lt":if(u.lt(n,$,!0))return[0,-1];if(u.lt(M,n,!1))return[l,v];break;case"$lte":if(u.lt(n,$,!1))return[0,-1];if(u.lt(M,n,!0))return[l,v];break;case"$between":return u.gt(n[0],M,!1)?[0,-1]:u.lt(n[1],$,!1)?[0,-1]:(y=this.calculateRangeStart(t,n[0],!1,E),C=this.calculateRangeEnd(t,n[1],E),y<0&&y++,C>v&&C--,u.gt(d.getIn(r[a[y]],t,E),n[0],!0)||y++,u.lt(d.getIn(r[a[C]],t,E),n[1],!0)||C--,C<y?[0,-1]:[y,C]);case"$in":for(var V=[],S=[],R=0,re=n.length;R<re;R++)for(var he=this.calculateRange("$eq",t,n[R]),Y=he[0];Y<=he[1];Y++)V[Y]===void 0&&(V[Y]=!0,S.push(Y));return S}switch(e){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":y=this.calculateRangeStart(t,n,!1,E),I=d.getIn(r[a[y]],t,E);break}switch(e){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":C=this.calculateRangeEnd(t,n,E),d.getIn(r[a[C]],t,E);break}switch(e){case"$eq":case"$aeq":case"$dteq":return u.aeq(I,n)?[y,C]:[0,-1];case"$gt":return u.aeq(d.getIn(r[a[C]],t,E),n)?[C+1,v]:[C,v];case"$gte":return u.aeq(d.getIn(r[a[y]],t,E),n)?[y,v]:[y+1,v];case"$lt":return u.aeq(d.getIn(r[a[y]],t,E),n)?[l,y-1]:[l,y];case"$lte":return u.aeq(d.getIn(r[a[C]],t,E),n)?[l,C]:[l,C-1];default:return[0,r.length-1]}},k.prototype.by=function(e,t){var n;if(t===void 0)return n=this,function(a){return n.by(e,a)};var r=this.getUniqueIndex(e,!0).get(t);return this.cloneObjects?Q(r,this.cloneMethod):r},k.prototype.findOne=function(e){e=e||{};var t=this.chain().find(e,!0).data();return Array.isArray(t)&&t.length===0?null:this.cloneObjects?Q(t[0],this.cloneMethod):t[0]},k.prototype.chain=function(e,t){var n=new W(this);return typeof e=="undefined"?n:n.transform(e,t)},k.prototype.find=function(e){return this.chain().find(e).data()},k.prototype.findOneUnindexed=function(e,t){for(var n=this.data.length,r;n--;)if(d.getIn(this.data[n],e,!0)===t)return r=this.data[n],r;return null},k.prototype.startTransaction=function(){if(this.transactional){this.cachedData=Q(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].startTransaction()}},k.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].commit()}},k.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].rollback()}},k.prototype.async=function(e,t){setTimeout(function(){if(typeof e=="function")e(),t();else throw new TypeError("Argument passed for async execution is not a function")},0)},k.prototype.where=function(e){return this.chain().where(e).data()},k.prototype.mapReduce=function(e,t){try{return t(this.data.map(e))}catch(n){throw n}},k.prototype.eqJoin=function(e,t,n,r,a){return new W(this).eqJoin(e,t,n,r,a)},k.prototype.stages={},k.prototype.getStage=function(e){return this.stages[e]||(this.stages[e]={}),this.stages[e]},k.prototype.commitLog=[],k.prototype.stage=function(e,t){var n=JSON.parse(JSON.stringify(t));return this.getStage(e)[t.$loki]=n,n},k.prototype.commitStage=function(e,t){var n=this.getStage(e),r,a=new Date().getTime();for(r in n)this.update(n[r]),this.commitLog.push({timestamp:a,message:t,data:JSON.parse(JSON.stringify(n[r]))});this.stages[e]={}},k.prototype.no_op=function(){},k.prototype.extract=function(e){var t=0,n=this.data.length,r=ge(e),a=[];for(t;t<n;t+=1)a.push(P(this.data[t],e,r));return a},k.prototype.max=function(e){return Math.max.apply(null,this.extract(e))},k.prototype.min=function(e){return Math.min.apply(null,this.extract(e))},k.prototype.maxRecord=function(e){var t=0,n=this.data.length,r=ge(e),a={index:0,value:void 0},l;for(t;t<n;t+=1)l!==void 0?l<P(this.data[t],e,r)&&(l=P(this.data[t],e,r),a.index=this.data[t].$loki):(l=P(this.data[t],e,r),a.index=this.data[t].$loki);return a.value=l,a},k.prototype.minRecord=function(e){var t=0,n=this.data.length,r=ge(e),a={index:0,value:void 0},l;for(t;t<n;t+=1)l!==void 0?l>P(this.data[t],e,r)&&(l=P(this.data[t],e,r),a.index=this.data[t].$loki):(l=P(this.data[t],e,r),a.index=this.data[t].$loki);return a.value=l,a},k.prototype.extractNumerical=function(e){return this.extract(e).map(ke).filter(Number).filter(function(t){return!isNaN(t)})},k.prototype.avg=function(e){return ye(this.extractNumerical(e))},k.prototype.stdDev=function(e){return x(this.extractNumerical(e))},k.prototype.mode=function(e){var t={},n=this.extract(e);n.forEach(function(v){t[v]?t[v]+=1:t[v]=1});var r,a,l;for(a in t)r?r<t[a]&&(l=a):(l=a,r=t[a]);return l},k.prototype.median=function(e){var t=this.extractNumerical(e);t.sort(Ce);var n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2};function ge(e){return e.indexOf(".")!==-1}function ke(e){return parseFloat(e,10)}function xe(e,t){return e+t}function Ce(e,t){return e-t}function ye(e){return e.reduce(xe,0)/e.length}function x(e){var t=ye(e),n=e.map(function(l){var v=l-t,y=v*v;return y}),r=ye(n),a=Math.sqrt(r);return a}function P(e,t,n){if(n===!1)return e[t];for(var r=t.split("."),a=e;r.length>0;)a=a[r.shift()];return a}function X(e,t,n){for(var r=0,a=e.length,l,v;r<a;){if(v=r+a>>1,l=n.apply(null,[t,e[v]]),l===0)return{found:!0,index:v};l<0?a=v:r=v+1}return{found:!1,index:a}}function ie(e){return function(t,n){return X(t,n,e)}}function ue(){}ue.prototype={keys:[],values:[],sort:function(e,t){return e<t?-1:e>t?1:0},setSort:function(e){this.bs=new ie(e)},bs:function(){return new ie(this.sort)},set:function(e,t){var n=this.bs(this.keys,e);n.found?this.values[n.index]=t:(this.keys.splice(n.index,0,e),this.values.splice(n.index,0,t))},get:function(e){return this.values[X(this.keys,e,this.sort).index]}};function K(e){this.field=e,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}K.prototype.keyMap={},K.prototype.lokiMap={},K.prototype.set=function(e){var t=e[this.field];if(t!==null&&typeof t!="undefined"){if(this.keyMap[t])throw new Error("Duplicate key for property "+this.field+": "+t);this.keyMap[t]=e,this.lokiMap[e.$loki]=t}},K.prototype.get=function(e){return this.keyMap[e]},K.prototype.byId=function(e){return this.keyMap[this.lokiMap[e]]},K.prototype.update=function(e,t){if(this.lokiMap[e.$loki]!==t[this.field]){var n=this.lokiMap[e.$loki];this.set(t),this.keyMap[n]=void 0}else this.keyMap[e[this.field]]=t},K.prototype.remove=function(e){var t=this.keyMap[e];if(t!==null&&typeof t!="undefined")this.keyMap[e]=void 0,this.lokiMap[t.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},K.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function J(e){this.index=Object.create(null),this.field=e}return J.prototype={set:function(t,n){this.index[t]?this.index[t].push(n):this.index[t]=[n]},remove:function(t,n){var r=this.index[t];for(var a in r)r[a]==n&&r.splice(a,1);r.length<1&&(this.index[t]=void 0)},get:function(t){return this.index[t]},clear:function(t){this.index={}}},z.deepFreeze=m,z.freeze=o,z.unFreeze=s,z.LokiOps=A,z.Collection=k,z.DynamicView=U,z.Resultset=W,z.KeyValueStore=ue,z.LokiMemoryAdapter=ae,z.LokiPartitioningAdapter=le,z.LokiLocalStorageAdapter=de,z.LokiFsAdapter=ce,z.persistenceAdapters={fs:ce,localStorage:de},z.aeq=b,z.lt=h,z.gt=w,z.Comparators=u,z}()})})(on);var Ur=on.exports;function Jr(){return wt(jn)}const Xe=[{color:"purple-3",label:"Training Data",type:"string"},{color:"teal-3",label:"Type",type:"categorical",categories:[{label:"Audio"},{label:"Computer Vision"},{label:"Multimodal"},{label:"Natural Language Processing"},{label:"Reinforcement Learning"},{label:"Structured"}]},{color:"lime-3",label:"Task",type:"categorical",categories:[{label:"Audio Classification"},{label:"Audio To Audio"},{label:"Automatic Speech Recognition"},{label:"Conversational"},{label:"Feature Extraction"},{label:"Fill Mask"},{label:"Image Classification"},{label:"Image Segmentation"},{label:"Image To Image"},{label:"Image To Text"},{label:"Object Detection"},{label:"Question Answering"},{label:"Reinforcement Learning"},{label:"Sentence Similarity"},{label:"Summarization"},{label:"Table Question Answering"},{label:"Tabular Classification"},{label:"Text Classification"},{label:"Text Generation"},{label:"Text To Image"},{label:"Text To Speech"},{label:"Text2text Generation"},{label:"Token Classification"},{label:"Translation"},{label:"Unconditional Image Generation"},{label:"Voice Activity Detection"},{label:"Zero Shot Classification"},{label:"Zero Shot Image Classification"}]},{color:"brown-3",label:"Hyperparameters",type:"metric",metrics:[{label:"learning_rate",type:"number"},{label:"batch_size",type:"number"},{label:"seed",type:"number"},{label:"total_train_batch_size",type:"number"},{label:"optimizer",type:"string"},{label:"num_epochs",type:"number"}]},{color:"indigo-3",label:"Evaluation Results",type:"metric",metrics:[{label:"accuracy",type:"number"},{label:"bertscore",type:"number"},{label:"bleu",type:"number"},{label:"bleurt",type:"number"},{label:"cer",type:"number"},{label:"chrf",type:"number"},{label:"code_eval",type:"number"},{label:"comet",type:"number"},{label:"competition_math",type:"number"},{label:"coval",type:"number"},{label:"cuad",type:"number"},{label:"exact_match",type:"number"},{label:"f1",type:"number"},{label:"frugalscore",type:"number"},{label:"glue",type:"number"},{label:"google_bleu",type:"number"},{label:"indic_glue",type:"number"},{label:"mae",type:"number"},{label:"mahalanobis",type:"number"},{label:"matthews_correlation",type:"number"},{label:"mauve",type:"number"},{label:"mean_iou",type:"number"},{label:"meteor",type:"number"},{label:"mse",type:"number"},{label:"pearsonr",type:"number"},{label:"perplexity",type:"number"},{label:"precision",type:"number"},{label:"recall",type:"number"},{label:"roc_auc",type:"number"},{label:"rouge",type:"number"},{label:"sacrebleu",type:"number"},{label:"sari",type:"number"},{label:"seqeval",type:"number"},{label:"spearmanr",type:"number"},{label:"squad",type:"number"},{label:"squad_v2",type:"number"},{label:"super_glue",type:"number"},{label:"ter",type:"number"},{label:"wer",type:"number"},{label:"wiki_split",type:"number"},{label:"xnli",type:"number"},{label:"xtreme_s",type:"number"}]}],Xr=Qn({name:"MainLayout",components:{IndexPage:ar},data(){return{attributeModels:Object.assign({},...Xe.map(i=>({[i.label]:null}))),attributeModelValues:Object.assign({},...Xe.map(i=>({[i.label]:null}))),attributeModelSigns:Object.assign({},...Xe.map(i=>({[i.label]:null}))),attributeExpanderStates:Xe.map(i=>({[i.label]:!1})),activeFilters:[]}},computed:{console:()=>console},methods:{removeFilter(i){this.activeFilters=this.activeFilters.filter(f=>f!==i)},getColor(i){var f;return this.attributes.forEach(c=>{c.label==i&&(f=c.color)}),f},closeExpanders(i,f){this.$refs.expanders.forEach((c,m)=>{m!=i&&c.hide()})},submitFilter(i){var f=this;qe(function(){f.activeFilters.push({attribute:i,keyword:f.attributeModels[i].label==null?f.attributeModels[i]:f.attributeModels[i].label,value:f.attributeModelValues[i],sign:f.attributeModelSigns[i]}),f.attributeModels[i]=null,f.attributeModelValues[i]=null})},setModel(i,f){this.attributeModels[i]={label:f,type:"string"}}},mounted(){var i=this;Un(()=>import("./dump.2bf9f761.js"),[]).then(f=>{this.loaded=!0,this.models.insert(JSON.parse(JSON.stringify(f)).default),i.$q.loading.hide()})},setup(){const i=Jr();i.loading.show({delay:100});const f=G(!1);var c=new Ur("mlhub.db"),m=c.addCollection("models");return{models:m,original:Xe,attributes:Xe,$q:i,leftDrawerOpen:f,toggleLeftDrawer(){f.value=!f.value}}}}),Yr=vt(" ML Hub "),Gr=Qt("p",{class:"q-pa-lg q-mb-none text-h6 text-uppercase"},"Search Filters",-1),Zr={key:0,style:{display:"table"}},ea=Qt("p",{class:"q-pa-lg q-mb-none text-h6 text-uppercase"},"Selected Filters",-1);function ta(i,f,c,m,o,s){const d=Jn("IndexPage");return Pe(),Te(Kr,{view:"hHh lpR fFf"},{default:pe(()=>[ve(dr,{elevated:""},{default:pe(()=>[ve(fr,null,{default:pe(()=>[ve(cr,null,{default:pe(()=>[Yr]),_:1}),Qt("div",null,"Quasar v"+nt(i.$q.version),1)]),_:1})]),_:1}),ve(Hr,{modelValue:i.leftDrawerOpen,"onUpdate:modelValue":f[0]||(f[0]=u=>i.leftDrawerOpen=u),"show-if-above":"",bordered:"",class:"bg-white",width:400,breakpoint:200},{default:pe(()=>[ve(lr,null,{default:pe(()=>[Gr,(Pe(!0),qt(mi,null,yi(i.attributes,(u,b)=>(Pe(),Te(Ui,{key:u.label,dense:"",clickable:""},{default:pe(()=>[ve(sr,{ref_for:!0,ref:"expanders",icon:"square",id:u,onShow:h=>{this.closeExpanders(b,h),i.attributeModelSigns[u.label]=">"},"expand-icon-class":i.getColor(u.label),modelValue:i.attributeExpanderStates[u.label],"onUpdate:modelValue":h=>i.attributeExpanderStates[u.label]=h,style:{width:"100%"},dense:"",label:u.label},{header:pe(()=>[ve(_t,{avatar:""},{default:pe(()=>[ve(hr,{icon:"square","text-color":i.getColor(u.label)},null,8,["text-color"])]),_:2},1024),ve(_t,null,{default:pe(()=>[vt(nt(u.label),1)]),_:2},1024)]),default:pe(()=>[u.type=="string"?(Pe(),Te(At,{key:0},{default:pe(()=>[ve(Pt,null,{default:pe(()=>[ve(zt,{onSubmit:h=>{this.closeExpanders(),this.submitFilter(u.label)}},{default:pe(()=>[ve(Et,{filled:"",modelValue:i.attributeModels[u.label],"onUpdate:modelValue":h=>i.attributeModels[u.label]=h,label:"Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)):ut("",!0),u.type=="categorical"?(Pe(),Te(At,{key:1},{default:pe(()=>[ve(Pt,null,{default:pe(()=>[ve(zt,{ref_for:!0,ref:"form"},{default:pe(()=>[ve(Vt,{filled:"","onUpdate:modelValue":[h=>{this.closeExpanders(),this.submitFilter(u.label)},h=>i.attributeModels[u.label]=h],modelValue:i.attributeModels[u.label],options:u.categories,label:"Type"},null,8,["onUpdate:modelValue","modelValue","options"])]),_:2},1536)]),_:2},1024)]),_:2},1024)):ut("",!0),u.type=="metric"?(Pe(),Te(At,{key:2},{default:pe(()=>[ve(Pt,null,{default:pe(()=>[ve(zt,{onSubmit:h=>{this.closeExpanders(),this.submitFilter(u.label)}},{default:pe(()=>{var h;return[ve(Vt,{filled:"","use-input":"","fill-input":"","input-debounce":"0","hide-selected":"",onInputValue:w=>i.setModel(u.label,w),modelValue:i.attributeModels[u.label],"onUpdate:modelValue":w=>i.attributeModels[u.label]=w,options:u.metrics,label:"Metric"},null,8,["onInputValue","modelValue","onUpdate:modelValue","options"]),((h=i.attributeModels[u.label])==null?void 0:h.type)=="number"?(Pe(),qt("div",Zr,[ve(Vt,{filled:"",style:{width:"25%",display:"table-cell"},type:"number",step:"0.1",modelValue:i.attributeModelSigns[u.label],"onUpdate:modelValue":w=>i.attributeModelSigns[u.label]=w,options:[">","=","<","~"],label:"Sign"},null,8,["modelValue","onUpdate:modelValue"]),ve(Et,{filled:"",style:{width:"50%",display:"table-cell"},type:"number",step:"0.1",modelValue:i.attributeModelValues[u.label],"onUpdate:modelValue":w=>i.attributeModelValues[u.label]=w,label:"Value"},null,8,["modelValue","onUpdate:modelValue"])])):(Pe(),Te(Et,{key:1,filled:"",modelValue:i.attributeModelValues[u.label],"onUpdate:modelValue":w=>i.attributeModelValues[u.label]=w,label:"Contains"},null,8,["modelValue","onUpdate:modelValue"])),Bi(ve(Zn,{label:"Submit",type:"submit"},null,512),[[Xn,!1]])]}),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)):ut("",!0)]),_:2},1032,["id","onShow","expand-icon-class","modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128))]),_:1}),ve(or),ea,(Pe(!0),qt(mi,null,yi(this.activeFilters,u=>(Pe(),Te(Ji,{removable:"",key:u.keyword,color:i.getColor(u.attribute),onRemove:b=>this.removeFilter(u),square:""},{default:pe(()=>[vt(nt(u.keyword)+" ",1),u.value?(Pe(),Te(ur,{key:0,color:"grey"},{default:pe(()=>[vt(nt(u.sign)+" "+nt(u.value),1)]),_:2},1024)):ut("",!0)]),_:2},1032,["color","onRemove"]))),128))]),_:1},8,["modelValue"]),ve(Nr,null,{default:pe(()=>[ve(d,{ref:"results",filters:this.activeFilters,models:this.models},null,8,["filters","models"])]),_:1})]),_:1})}var la=Kn(Xr,[["render",ta]]);export{la as default};
