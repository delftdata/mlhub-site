var kn=Object.defineProperty,On=Object.defineProperties;var qn=Object.getOwnPropertyDescriptors;var pi=Object.getOwnPropertySymbols;var Dn=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable;var yi=(i,d,f)=>d in i?kn(i,d,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[d]=f,ie=(i,d)=>{for(var f in d||(d={}))Dn.call(d,f)&&yi(i,f,d[f]);if(pi)for(var f of pi(d))Pn.call(d,f)&&yi(i,f,d[f]);return i},we=(i,d)=>On(i,qn(d));import{c as De,a as O,h as W,i as lt,r as Y,w as ee,o as Ve,g as Ae,l as ot,b as Bi,u as An,d as zn,s as $e,e as Kt,p as Ne,n as qe,f as Ye,j as Qt,k as ht,m as mt,q as Li,T as En,t as Vn,v as Mn,x as Be,y as vt,z as gt,A as Ri,B as Rt,C as _i,H as mi,D as $n,E as Ut,F as Fn,G as Tn,I as Bn,J as Ln,K as it,L as Rn,M as _n,N as Fe,O as Hn,P as Nn,Q as Wn,R as Dt,S as Hi,U as Ni,V as jn,W as Kn,X as Qn,Y as ut,Z as Un,_ as Jn,$ as Xn,a0 as Yn,a1 as Gn,a2 as ze,a3 as Te,a4 as pe,a5 as ae,a6 as bt,a7 as nt,a8 as Pt,a9 as gi,aa as bi,ab as pt,ac as ct,ad as Zn}from"./index.cbce65a5.js";import{h as et,a as er,b as Jt,c as _t,Q as yt,d as tr,R as ir,g as At,e as zt}from"./QBtn.4ada0c7b.js";import{Q as wt,u as Xt,a as Wi,b as ji,c as Ki,d as Yt,e as Gt,f as Qi,r as wi,g as nr,h as Zt,i as ei,j as Ui,k as ti,l as ii,m as Ji,n as Ht,o as rr,p as ar,q as Si,s as lr,t as xi,v as Nt,w as or,x as Xi,y as Ci,z as Ii,A as ft,I as sr,B as ki,C as ur,D as cr,E as fr,F as dr,G as Et,H as Vt,J as Mt,K as $t,L as hr}from"./IndexPage.6ea3f3e3.js";var Oi=De({name:"QToolbarTitle",props:{shrink:Boolean},setup(i,{slots:d}){const f=O(()=>"q-toolbar__title ellipsis"+(i.shrink===!0?" col-shrink":""));return()=>W("div",{class:f.value},et(d.default))}});const vr=W("div",{class:"q-space"});var pr=De({name:"QSpace",setup(){return()=>vr}}),qi=De({name:"QToolbar",props:{inset:Boolean},setup(i,{slots:d}){const f=O(()=>"q-toolbar row no-wrap items-center"+(i.inset===!0?" q-toolbar--inset":""));return()=>W("div",{class:f.value},et(d.default))}}),yr=De({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(i,{slots:d,emit:f}){const{proxy:{$q:m}}=Ae(),o=lt(ot,()=>{console.error("QHeader needs to be child of QLayout")}),s=Y(parseInt(i.heightHint,10)),c=Y(!0),u=O(()=>i.reveal===!0||o.view.value.indexOf("H")>-1||m.platform.is.ios&&o.isContainer.value===!0),b=O(()=>{if(i.modelValue!==!0)return 0;if(u.value===!0)return c.value===!0?s.value:0;const L=s.value-o.scroll.value.position;return L>0?L:0}),h=O(()=>i.modelValue!==!0||u.value===!0&&c.value!==!0),w=O(()=>i.modelValue===!0&&h.value===!0&&i.reveal===!0),P=O(()=>"q-header q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-top"+(i.bordered===!0?" q-header--bordered":"")+(h.value===!0?" q-header--hidden":"")+(i.modelValue!==!0?" q-layout--prevent-focus":"")),q=O(()=>{const L=o.rows.value.top,K={};return L[0]==="l"&&o.left.space===!0&&(K[m.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),L[2]==="r"&&o.right.space===!0&&(K[m.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),K});function g(L,K){o.update("header",L,K)}function T(L,K){L.value!==K&&(L.value=K)}function R({height:L}){T(s,L),g("size",L)}function D(L){w.value===!0&&T(c,!0),f("focusin",L)}ee(()=>i.modelValue,L=>{g("space",L),T(c,!0),o.animate()}),ee(b,L=>{g("offset",L)}),ee(()=>i.reveal,L=>{L===!1&&T(c,i.modelValue)}),ee(c,L=>{o.animate(),f("reveal",L)}),ee(o.scroll,L=>{i.reveal===!0&&T(c,L.direction==="up"||L.position<=i.revealOffset||L.position-L.inflectionPoint<100)});const le={};return o.instances.header=le,i.modelValue===!0&&g("size",s.value),g("space",i.modelValue),g("offset",b.value),Ve(()=>{o.instances.header===le&&(o.instances.header=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const L=er(d.default,[]);return i.elevated===!0&&L.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),L.push(W(wt,{debounce:0,onResize:R})),W("header",{class:P.value,style:q.value,onFocusin:D},L)}}}),mr=De({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(i,{slots:d,emit:f}){const{proxy:{$q:m}}=Ae(),o=lt(ot,()=>{console.error("QFooter needs to be child of QLayout")}),s=Y(parseInt(i.heightHint,10)),c=Y(!0),u=Y(Bi.value===!0||o.isContainer.value===!0?0:window.innerHeight),b=O(()=>i.reveal===!0||o.view.value.indexOf("F")>-1||m.platform.is.ios&&o.isContainer.value===!0),h=O(()=>o.isContainer.value===!0?o.containerHeight.value:u.value),w=O(()=>{if(i.modelValue!==!0)return 0;if(b.value===!0)return c.value===!0?s.value:0;const E=o.scroll.value.position+h.value+s.value-o.height.value;return E>0?E:0}),P=O(()=>i.modelValue!==!0||b.value===!0&&c.value!==!0),q=O(()=>i.modelValue===!0&&P.value===!0&&i.reveal===!0),g=O(()=>"q-footer q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-bottom"+(i.bordered===!0?" q-footer--bordered":"")+(P.value===!0?" q-footer--hidden":"")+(i.modelValue!==!0?" q-layout--prevent-focus"+(b.value!==!0?" hidden":""):"")),T=O(()=>{const E=o.rows.value.bottom,G={};return E[0]==="l"&&o.left.space===!0&&(G[m.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),E[2]==="r"&&o.right.space===!0&&(G[m.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),G});function R(E,G){o.update("footer",E,G)}function D(E,G){E.value!==G&&(E.value=G)}function le({height:E}){D(s,E),R("size",E)}function L(){if(i.reveal!==!0)return;const{direction:E,position:G,inflectionPoint:A}=o.scroll.value;D(c,E==="up"||G-A<100||o.height.value-h.value-G-s.value<300)}function K(E){q.value===!0&&D(c,!0),f("focusin",E)}ee(()=>i.modelValue,E=>{R("space",E),D(c,!0),o.animate()}),ee(w,E=>{R("offset",E)}),ee(()=>i.reveal,E=>{E===!1&&D(c,i.modelValue)}),ee(c,E=>{o.animate(),f("reveal",E)}),ee([s,o.scroll,o.height],L),ee(()=>m.screen.height,E=>{o.isContainer.value!==!0&&D(u,E)});const H={};return o.instances.footer=H,i.modelValue===!0&&R("size",s.value),R("space",i.modelValue),R("offset",w.value),Ve(()=>{o.instances.footer===H&&(o.instances.footer=void 0,R("size",0),R("offset",0),R("space",!1))}),()=>{const E=Jt(d.default,[W(wt,{debounce:0,onResize:le})]);return i.elevated===!0&&E.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),W("footer",{class:g.value,style:T.value,onFocusin:K},E)}}}),gr=De({name:"QField",inheritAttrs:!1,props:Xt,emits:Wi,setup(){return ji(Ki())}});const br={xs:8,sm:10,md:14,lg:20,xl:24};var Yi=De({name:"QChip",props:we(ie(ie({},Yt),An),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(i,{slots:d,emit:f}){const{proxy:{$q:m}}=Ae(),o=Gt(i,m),s=zn(i,br),c=O(()=>i.selected===!0||i.icon!==void 0),u=O(()=>i.selected===!0?i.iconSelected||m.iconSet.chip.selected:i.icon),b=O(()=>i.iconRemove||m.iconSet.chip.remove),h=O(()=>i.disable===!1&&(i.clickable===!0||i.selected!==null)),w=O(()=>{const D=i.outline===!0&&i.color||i.textColor;return"q-chip row inline no-wrap items-center"+(i.outline===!1&&i.color!==void 0?` bg-${i.color}`:"")+(D?` text-${D} q-chip--colored`:"")+(i.disable===!0?" disabled":"")+(i.dense===!0?" q-chip--dense":"")+(i.outline===!0?" q-chip--outline":"")+(i.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(i.square===!0?" q-chip--square":"")+(o.value===!0?" q-chip--dark q-dark":"")}),P=O(()=>i.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:i.tabindex||0});function q(D){D.keyCode===13&&g(D)}function g(D){i.disable||(f("update:selected",!i.selected),f("click",D))}function T(D){(D.keyCode===void 0||D.keyCode===13)&&($e(D),i.disable===!1&&(f("update:modelValue",!1),f("remove")))}function R(){const D=[];h.value===!0&&D.push(W("div",{class:"q-focus-helper"})),c.value===!0&&D.push(W(yt,{class:"q-chip__icon q-chip__icon--left",name:u.value}));const le=i.label!==void 0?[W("div",{class:"ellipsis"},[i.label])]:void 0;return D.push(W("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},tr(d.default,le))),i.iconRight&&D.push(W(yt,{class:"q-chip__icon q-chip__icon--right",name:i.iconRight})),i.removable===!0&&D.push(W(yt,we(ie({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:b.value},P.value),{onClick:T,onKeyup:T}))),D}return()=>{if(i.modelValue===!1)return;const D={class:w.value,style:s.value};return h.value===!0&&Object.assign(D,P.value,{onClick:g,onKeyup:q}),_t("div",D,R(),"ripple",i.ripple!==!1&&i.disable!==!0,()=>[[ir,i.ripple]])}}});const wr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Sr({showing:i,avoidEmit:d,configureAnchorEl:f}){const{props:m,proxy:o,emit:s}=Ae(),c=Y(null);let u;function b(g){return c.value===null?!1:g===void 0||g.touches===void 0||g.touches.length<=1}const h={};f===void 0&&(Object.assign(h,{hide(g){o.hide(g)},toggle(g){o.toggle(g),g.qAnchorHandled=!0},toggleKey(g){Kt(g,13)===!0&&h.toggle(g)},contextClick(g){o.hide(g),Ne(g),qe(()=>{o.show(g),g.qAnchorHandled=!0})},prevent:Ne,mobileTouch(g){if(h.mobileCleanup(g),b(g)!==!0)return;o.hide(g),c.value.classList.add("non-selectable");const T=g.target;Ye(h,"anchor",[[T,"touchmove","mobileCleanup","passive"],[T,"touchend","mobileCleanup","passive"],[T,"touchcancel","mobileCleanup","passive"],[c.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{o.show(g),g.qAnchorHandled=!0},300)},mobileCleanup(g){c.value.classList.remove("non-selectable"),clearTimeout(u),i.value===!0&&g!==void 0&&Qi()}}),f=function(g=m.contextMenu){if(m.noParentEvent===!0||c.value===null)return;let T;g===!0?o.$q.platform.is.mobile===!0?T=[[c.value,"touchstart","mobileTouch","passive"]]:T=[[c.value,"mousedown","hide","passive"],[c.value,"contextmenu","contextClick","notPassive"]]:T=[[c.value,"click","toggle","passive"],[c.value,"keyup","toggleKey","passive"]],Ye(h,"anchor",T)});function w(){ht(h,"anchor")}function P(g){for(c.value=g;c.value.classList.contains("q-anchor--skip");)c.value=c.value.parentNode;f()}function q(){if(m.target===!1||m.target==="")c.value=null;else if(m.target===!0)P(o.$el.parentNode);else{let g=m.target;if(typeof m.target=="string")try{g=document.querySelector(m.target)}catch{g=void 0}g!=null?(c.value=g.$el||g,f()):(c.value=null,console.error(`Anchor: target "${m.target}" not found`))}}return ee(()=>m.contextMenu,g=>{c.value!==null&&(w(),f(g))}),ee(()=>m.target,()=>{c.value!==null&&w(),q()}),ee(()=>m.noParentEvent,g=>{c.value!==null&&(g===!0?w():f())}),Qt(()=>{q(),d!==!0&&m.modelValue===!0&&c.value===null&&s("update:modelValue",!1)}),Ve(()=>{clearTimeout(u),w()}),{anchorEl:c,canShow:b,anchorEvents:h}}function xr(i,d){const f=Y(null);let m;function o(u,b){const h=`${b!==void 0?"add":"remove"}EventListener`,w=b!==void 0?b:m;u!==window&&u[h]("scroll",w,mt.passive),window[h]("scroll",w,mt.passive),m=b}function s(){f.value!==null&&(o(f.value),f.value=null)}const c=ee(()=>i.noParentEvent,()=>{f.value!==null&&(s(),d())});return Ve(c),{localScrollTarget:f,unconfigureScrollTarget:s,changeScrollEvent:o}}const at=[];function Cr(i,d){do{if(i.$options.name==="QMenu"){if(i.hide(d),i.$props.separateClosePopup===!0)return At(i)}else if(i.__qPortalInnerRef!==void 0){const f=At(i);return f!==void 0&&f.$options.name==="QPopupProxy"?(i.hide(d),f):i}i=At(i)}while(i!=null)}function Ir(i){for(i=i.parent;i!=null;){if(i.type.name==="QGlobalDialog")return!0;if(i.type.name==="QDialog"||i.type.name==="QMenu")return!1;i=i.parent}return!1}function Gi(i,d,f,m){const o=Y(!1),s=Y(!1);let c=null;const u={},b=m===!0&&Ir(i);function h(P){if(P===!0){wi(u),s.value=!0;return}s.value=!1,o.value===!1&&(b===!1&&c===null&&(c=Vn()),o.value=!0,at.push(i.proxy),nr(u))}function w(P){if(s.value=!1,P!==!0)return;wi(u),o.value=!1;const q=at.indexOf(i.proxy);q>-1&&at.splice(q,1),c!==null&&(Mn(c),c=null)}return Li(()=>{w(!0)}),Object.assign(i.proxy,{__qPortalInnerRef:d}),{showPortal:h,hidePortal:w,portalIsActive:o,portalIsAccessible:s,renderPortal:()=>b===!0?f():o.value===!0?[W(En,{to:c},f())]:void 0}}const Zi={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function kr(i,d){const f=Y(d.value);return ee(d,m=>{qe(()=>{f.value=m})}),{transition:O(()=>"q-transition--"+(f.value===!0?i.transitionHide:i.transitionShow)),transitionStyle:O(()=>`--q-transition-duration: ${i.transitionDuration}ms`)}}const We=[];let Ze;function Or(i){Ze=i.keyCode===27}function qr(){Ze===!0&&(Ze=!1)}function Dr(i){Ze===!0&&(Ze=!1,Kt(i,27)===!0&&We[We.length-1](i))}function en(i){window[i]("keydown",Or),window[i]("blur",qr),window[i]("keyup",Dr),Ze=!1}function tn(i){Be.is.desktop===!0&&(We.push(i),We.length===1&&en("addEventListener"))}function St(i){const d=We.indexOf(i);d>-1&&(We.splice(d,1),We.length===0&&en("removeEventListener"))}const je=[];function nn(i){je[je.length-1](i)}function rn(i){Be.is.desktop===!0&&(je.push(i),je.length===1&&document.body.addEventListener("focusin",nn))}function Wt(i){const d=je.indexOf(i);d>-1&&(je.splice(d,1),je.length===0&&document.body.removeEventListener("focusin",nn))}let an;const{notPassiveCapture:xt}=mt,Ke=[];function Ct(i){clearTimeout(an);const d=i.target;if(d===void 0||d.nodeType===8||d.classList.contains("no-pointer-events")===!0)return;let f=at.length-1;for(;f>=0;){const m=at[f].$;if(m.type.name!=="QDialog")break;if(m.props.seamless!==!0)return;f--}for(let m=Ke.length-1;m>=0;m--){const o=Ke[m];if((o.anchorEl.value===null||o.anchorEl.value.contains(d)===!1)&&(d===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(d)===!1))i.qClickOutside=!0,o.onClickOutside(i);else return}}function Pr(i){Ke.push(i),Ke.length===1&&(document.addEventListener("mousedown",Ct,xt),document.addEventListener("touchstart",Ct,xt))}function Di(i){const d=Ke.findIndex(f=>f===i);d>-1&&(Ke.splice(d,1),Ke.length===0&&(clearTimeout(an),document.removeEventListener("mousedown",Ct,xt),document.removeEventListener("touchstart",Ct,xt)))}let Pi,Ai;function zi(i){const d=i.split(" ");return d.length!==2?!1:["top","center","bottom"].includes(d[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(d[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ar(i){return i?!(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number"):!0}const jt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(i=>{jt[`${i}#ltr`]=i,jt[`${i}#rtl`]=i});function Ei(i,d){const f=i.split(" ");return{vertical:f[0],horizontal:jt[`${f[1]}#${d===!0?"rtl":"ltr"}`]}}function zr(i,d){let{top:f,left:m,right:o,bottom:s,width:c,height:u}=i.getBoundingClientRect();return d!==void 0&&(f-=d[1],m-=d[0],s+=d[1],o+=d[0],c+=d[0],u+=d[1]),{top:f,left:m,right:o,bottom:s,width:c,height:u,middle:m+(o-m)/2,center:f+(s-f)/2}}function Er(i){return{top:0,center:i.offsetHeight/2,bottom:i.offsetHeight,left:0,middle:i.offsetWidth/2,right:i.offsetWidth}}function Vr(i){if(Be.is.ios===!0&&window.visualViewport!==void 0){const u=document.body.style,{offsetLeft:b,offsetTop:h}=window.visualViewport;b!==Pi&&(u.setProperty("--q-pe-left",b+"px"),Pi=b),h!==Ai&&(u.setProperty("--q-pe-top",h+"px"),Ai=h)}let d;const{scrollLeft:f,scrollTop:m}=i.el;if(i.absoluteOffset===void 0)d=zr(i.anchorEl,i.cover===!0?[0,0]:i.offset);else{const{top:u,left:b}=i.anchorEl.getBoundingClientRect(),h=u+i.absoluteOffset.top,w=b+i.absoluteOffset.left;d={top:h,left:w,width:1,height:1,right:w+1,center:h,middle:w,bottom:h+1}}let o={maxHeight:i.maxHeight,maxWidth:i.maxWidth,visibility:"visible"};(i.fit===!0||i.cover===!0)&&(o.minWidth=d.width+"px",i.cover===!0&&(o.minHeight=d.height+"px")),Object.assign(i.el.style,o);const s=Er(i.el),c={top:d[i.anchorOrigin.vertical]-s[i.selfOrigin.vertical],left:d[i.anchorOrigin.horizontal]-s[i.selfOrigin.horizontal]};Mr(c,d,s,i.anchorOrigin,i.selfOrigin),o={top:c.top+"px",left:c.left+"px"},c.maxHeight!==void 0&&(o.maxHeight=c.maxHeight+"px",d.height>c.maxHeight&&(o.minHeight=o.maxHeight)),c.maxWidth!==void 0&&(o.maxWidth=c.maxWidth+"px",d.width>c.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(i.el.style,o),i.el.scrollTop!==m&&(i.el.scrollTop=m),i.el.scrollLeft!==f&&(i.el.scrollLeft=f)}function Mr(i,d,f,m,o){const s=f.bottom,c=f.right,u=vt(),b=window.innerHeight-u,h=document.body.clientWidth;if(i.top<0||i.top+s>b)if(o.vertical==="center")i.top=d[m.vertical]>b/2?Math.max(0,b-s):0,i.maxHeight=Math.min(s,b);else if(d[m.vertical]>b/2){const w=Math.min(b,m.vertical==="center"?d.center:m.vertical===o.vertical?d.bottom:d.top);i.maxHeight=Math.min(s,w),i.top=Math.max(0,w-s)}else i.top=Math.max(0,m.vertical==="center"?d.center:m.vertical===o.vertical?d.top:d.bottom),i.maxHeight=Math.min(s,b-i.top);if(i.left<0||i.left+c>h)if(i.maxWidth=Math.min(c,h),o.horizontal==="middle")i.left=d[m.horizontal]>h/2?Math.max(0,h-c):0;else if(d[m.horizontal]>h/2){const w=Math.min(h,m.horizontal==="middle"?d.middle:m.horizontal===o.horizontal?d.right:d.left);i.maxWidth=Math.min(c,w),i.left=Math.max(0,w-i.maxWidth)}else i.left=Math.max(0,m.horizontal==="middle"?d.middle:m.horizontal===o.horizontal?d.left:d.right),i.maxWidth=Math.min(c,h-i.left)}var $r=De({name:"QMenu",inheritAttrs:!1,props:we(ie(ie(ie(ie({},wr),Zt),Yt),Zi),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:zi},self:{type:String,validator:zi},offset:{type:Array,validator:Ar},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...ei,"click","escape-key"],setup(i,{slots:d,emit:f,attrs:m}){let o=null,s,c,u;const b=Ae(),{proxy:h}=b,{$q:w}=h,P=Y(null),q=Y(!1),g=O(()=>i.persistent!==!0&&i.noRouteDismiss!==!0),T=Gt(i,w),{registerTick:R,removeTick:D}=Ui(),{registerTimeout:le,removeTimeout:L}=ti(),{transition:K,transitionStyle:H}=kr(i,q),{localScrollTarget:E,changeScrollEvent:G,unconfigureScrollTarget:A}=xr(i,ne),{anchorEl:oe,canShow:se}=Sr({showing:q}),{hide:fe}=ii({showing:q,canShow:se,handleShow:x,handleHide:z,hideOnRouteChange:g,processOnMount:!0}),{showPortal:he,hidePortal:j,renderPortal:Se}=Gi(b,P,t),U={anchorEl:oe,innerRef:P,onClickOutside(n){if(i.persistent!==!0&&q.value===!0)return fe(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&$e(n),!0}},k=O(()=>Ei(i.anchor||(i.cover===!0?"center middle":"bottom start"),w.lang.rtl)),ge=O(()=>i.cover===!0?k.value:Ei(i.self||"top start",w.lang.rtl)),ke=O(()=>(i.square===!0?" q-menu--square":"")+(T.value===!0?" q-menu--dark q-dark":"")),xe=O(()=>i.autoClose===!0?{onClick:ce}:{}),Ce=O(()=>q.value===!0&&i.persistent!==!0);ee(Ce,n=>{n===!0?(tn(J),Pr(U)):(St(J),Di(U))});function ye(){Ji(()=>{let n=P.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function x(n){if(D(),L(),o=i.noRefocus===!1?document.activeElement:null,rn(Q),he(),ne(),s=void 0,n!==void 0&&(i.touchPosition||i.contextMenu)){const r=gt(n);if(r.left!==void 0){const{top:a,left:l}=oe.value.getBoundingClientRect();s={left:r.left-l,top:r.top-a}}}c===void 0&&(c=ee(()=>w.screen.width+"|"+w.screen.height+"|"+i.self+"|"+i.anchor+"|"+w.lang.rtl,e)),i.noFocus!==!0&&document.activeElement.blur(),R(()=>{e(),i.noFocus!==!0&&ye()}),le(()=>{w.platform.is.ios===!0&&(u=i.autoClose,P.value.click()),e(),he(!0),f("show",n)},i.transitionDuration)}function z(n){D(),L(),j(),X(!0),o!==null&&(n===void 0||n.qClickOutside!==!0)&&(o.focus(),o=null),le(()=>{j(!0),f("hide",n)},i.transitionDuration)}function X(n){s=void 0,c!==void 0&&(c(),c=void 0),(n===!0||q.value===!0)&&(Wt(Q),A(),Di(U),St(J)),n!==!0&&(o=null)}function ne(){(oe.value!==null||i.scrollTarget!==void 0)&&(E.value=Ri(oe.value,i.scrollTarget),G(E.value,e))}function ce(n){u!==!0?(Cr(h,n),f("click",n)):u=!1}function Q(n){Ce.value===!0&&i.noFocus!==!0&&_i(P.value,n.target)!==!0&&ye()}function J(n){f("escape-key"),fe(n)}function e(){const n=P.value;n===null||oe.value===null||Vr({el:n,offset:i.offset,anchorEl:oe.value,anchorOrigin:k.value,selfOrigin:ge.value,absoluteOffset:s,fit:i.fit,cover:i.cover,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function t(){return W(Rt,{name:K.value,appear:!0},()=>q.value===!0?W("div",ie(we(ie({},m),{ref:P,tabindex:-1,class:["q-menu q-position-engine scroll"+ke.value,m.class],style:[m.style,H.value]}),xe.value),et(d.default)):null)}return Ve(X),Object.assign(h,{focus:ye,updatePosition:e}),Se}});function ln(i,d,f){let m;function o(){m!==void 0&&(mi.remove(m),m=void 0)}return Ve(()=>{i.value===!0&&o()}),{removeFromHistory:o,addToHistory(){m={condition:()=>f.value===!0,handler:d},mi.add(m)}}}function on(){let i;return{preventBodyScroll(d){d!==i&&(i!==void 0||d===!0)&&(i=d,$n(d))}}}let dt=0;const Fr={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Vi={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Tr=De({name:"QDialog",inheritAttrs:!1,props:we(ie(ie({},Zt),Zi),{transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:i=>i==="standard"||["top","bottom","left","right"].includes(i)}}),emits:[...ei,"shake","click","escape-key"],setup(i,{slots:d,emit:f,attrs:m}){const o=Ae(),s=Y(null),c=Y(!1),u=Y(!1),b=Y(!1);let h,w=null,P,q;const g=O(()=>i.persistent!==!0&&i.noRouteDismiss!==!0&&i.seamless!==!0),{preventBodyScroll:T}=on(),{registerTimeout:R,removeTimeout:D}=ti(),{registerTick:le,removeTick:L}=Ui(),{showPortal:K,hidePortal:H,portalIsAccessible:E,renderPortal:G}=Gi(o,s,e,!0),{hide:A}=ii({showing:c,hideOnRouteChange:g,handleShow:xe,handleHide:Ce,processOnMount:!0}),{addToHistory:oe,removeFromHistory:se}=ln(c,A,g),fe=O(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${i.maximized===!0?"maximized":"minimized"} q-dialog__inner--${i.position} ${Fr[i.position]}`+(b.value===!0?" q-dialog__inner--animating":"")+(i.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(i.fullHeight===!0?" q-dialog__inner--fullheight":"")+(i.square===!0?" q-dialog__inner--square":"")),he=O(()=>"q-transition--"+(i.transitionShow===void 0?Vi[i.position][0]:i.transitionShow)),j=O(()=>"q-transition--"+(i.transitionHide===void 0?Vi[i.position][1]:i.transitionHide)),Se=O(()=>u.value===!0?j.value:he.value),U=O(()=>`--q-transition-duration: ${i.transitionDuration}ms`),k=O(()=>c.value===!0&&i.seamless!==!0),ge=O(()=>i.autoClose===!0?{onClick:ce}:{}),ke=O(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${k.value===!0?"modal":"seamless"}`,m.class]);ee(c,t=>{qe(()=>{u.value=t})}),ee(()=>i.maximized,t=>{c.value===!0&&ne(t)}),ee(k,t=>{T(t),t===!0?(rn(J),tn(z)):(Wt(J),St(z))});function xe(t){D(),L(),oe(),w=i.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,ne(i.maximized),K(),b.value=!0,i.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),le(ye)),R(()=>{if(o.proxy.$q.platform.is.ios===!0){if(i.seamless!==!0&&document.activeElement){const{top:n,bottom:r}=document.activeElement.getBoundingClientRect(),{innerHeight:a}=window,l=window.visualViewport!==void 0?window.visualViewport.height:a;n>0&&r>l/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-l,r>=a?1/0:Math.ceil(document.scrollingElement.scrollTop+r-l/2))),document.activeElement.scrollIntoView()}q=!0,s.value.click(),q=!1}K(!0),b.value=!1,f("show",t)},i.transitionDuration)}function Ce(t){D(),L(),se(),X(!0),b.value=!0,H(),w!==null&&(w.focus(),w=null),R(()=>{H(!0),b.value=!1,f("hide",t)},i.transitionDuration)}function ye(t){Ji(()=>{let n=s.value;n===null||n.contains(document.activeElement)===!0||(n=n.querySelector(t||"[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function x(){ye(),f("shake");const t=s.value;t!==null&&(t.classList.remove("q-animate--scale"),t.classList.add("q-animate--scale"),clearTimeout(h),h=setTimeout(()=>{s.value!==null&&(t.classList.remove("q-animate--scale"),ye())},170))}function z(){i.seamless!==!0&&(i.persistent===!0||i.noEscDismiss===!0?i.maximized!==!0&&i.noShake!==!0&&x():(f("escape-key"),A()))}function X(t){clearTimeout(h),(t===!0||c.value===!0)&&(ne(!1),i.seamless!==!0&&(T(!1),Wt(J),St(z))),t!==!0&&(w=null)}function ne(t){t===!0?P!==!0&&(dt<1&&document.body.classList.add("q-body--dialog"),dt++,P=!0):P===!0&&(dt<2&&document.body.classList.remove("q-body--dialog"),dt--,P=!1)}function ce(t){q!==!0&&(A(t),f("click",t))}function Q(t){i.persistent!==!0&&i.noBackdropDismiss!==!0?A(t):i.noShake!==!0&&x()}function J(t){E.value===!0&&_i(s.value,t.target)!==!0&&ye('[tabindex]:not([tabindex="-1"])')}Object.assign(o.proxy,{focus:ye,shake:x,__updateRefocusTarget(t){w=t||null}}),Ve(X);function e(){return W("div",we(ie({},m),{class:ke.value}),[W(Rt,{name:"q-transition--fade",appear:!0},()=>k.value===!0?W("div",{class:"q-dialog__backdrop fixed-full",style:U.value,"aria-hidden":"true",onMousedown:Q}):null),W(Rt,{name:Se.value,appear:!0},()=>c.value===!0?W("div",ie({ref:s,class:fe.value,style:U.value,tabindex:-1},ge.value),et(d.default)):null)])}return G}});const Ee=1e3,Br=["start","center","end","start-force","center-force","end-force"],sn=Array.prototype.filter,Lr=window.getComputedStyle(document.body).overflowAnchor===void 0?Ut:function(i,d){requestAnimationFrame(()=>{if(i===null)return;const f=i.children||[];sn.call(f,o=>o.dataset&&o.dataset.qVsAnchor!==void 0).forEach(o=>{delete o.dataset.qVsAnchor});const m=f[d];m&&m.dataset&&(m.dataset.qVsAnchor="")})};function Ge(i,d){return i+d}function Ft(i,d,f,m,o,s,c,u){const b=i===window?document.scrollingElement||document.documentElement:i,h=o===!0?"offsetWidth":"offsetHeight",w={scrollStart:0,scrollViewSize:-c-u,scrollMaxSize:0,offsetStart:-c,offsetEnd:-u};if(o===!0?(i===window?(w.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,w.scrollViewSize+=document.documentElement.clientWidth):(w.scrollStart=b.scrollLeft,w.scrollViewSize+=b.clientWidth),w.scrollMaxSize=b.scrollWidth,s===!0&&(w.scrollStart=(Ht===!0?w.scrollMaxSize-w.scrollViewSize:0)-w.scrollStart)):(i===window?(w.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,w.scrollViewSize+=document.documentElement.clientHeight):(w.scrollStart=b.scrollTop,w.scrollViewSize+=b.clientHeight),w.scrollMaxSize=b.scrollHeight),f!==null)for(let P=f.previousElementSibling;P!==null;P=P.previousElementSibling)P.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetStart+=P[h]);if(m!==null)for(let P=m.nextElementSibling;P!==null;P=P.nextElementSibling)P.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetEnd+=P[h]);if(d!==i){const P=b.getBoundingClientRect(),q=d.getBoundingClientRect();o===!0?(w.offsetStart+=q.left-P.left,w.offsetEnd-=q.width):(w.offsetStart+=q.top-P.top,w.offsetEnd-=q.height),i!==window&&(w.offsetStart+=w.scrollStart),w.offsetEnd+=w.scrollMaxSize-w.offsetStart}return w}function Mi(i,d,f,m){d==="end"&&(d=(i===window?document.body:i)[f===!0?"scrollWidth":"scrollHeight"]),i===window?f===!0?(m===!0&&(d=(Ht===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-d),window.scrollTo(d,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d):f===!0?(m===!0&&(d=(Ht===!0?i.scrollWidth-i.offsetWidth:0)-d),i.scrollLeft=d):i.scrollTop=d}function rt(i,d,f,m){if(f>=m)return 0;const o=d.length,s=Math.floor(f/Ee),c=Math.floor((m-1)/Ee)+1;let u=i.slice(s,c).reduce(Ge,0);return f%Ee!==0&&(u-=d.slice(s*Ee,f).reduce(Ge,0)),m%Ee!==0&&m!==o&&(u-=d.slice(m,c*Ee).reduce(Ge,0)),u}const Rr={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},_r=ie({virtualScrollHorizontal:Boolean,onVirtualScroll:Function},Rr);function Hr({virtualScrollLength:i,getVirtualScrollTarget:d,getVirtualScrollEl:f,virtualScrollItemSizeComputed:m}){const o=Ae(),{props:s,emit:c,proxy:u}=o,{$q:b}=u;let h,w,P,q=[],g;const T=Y(0),R=Y(0),D=Y({}),le=Y(null),L=Y(null),K=Y(null),H=Y({from:0,to:0}),E=O(()=>s.tableColspan!==void 0?s.tableColspan:100);m===void 0&&(m=O(()=>s.virtualScrollItemSize));const G=O(()=>m.value+";"+s.virtualScrollHorizontal),A=O(()=>G.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);ee(A,()=>{ge()}),ee(G,oe);function oe(){k(w,!0)}function se(x){k(x===void 0?w:x)}function fe(x,z){const X=d();if(X==null||X.nodeType===8)return;const ne=Ft(X,f(),le.value,L.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);P!==ne.scrollViewSize&&ge(ne.scrollViewSize),j(X,ne,Math.min(i.value-1,Math.max(0,parseInt(x,10)||0)),0,Br.indexOf(z)>-1?z:w>-1&&x>w?"end":"start")}function he(){const x=d();if(x==null||x.nodeType===8)return;const z=Ft(x,f(),le.value,L.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),X=i.value-1,ne=z.scrollMaxSize-z.offsetStart-z.offsetEnd-R.value;if(h===z.scrollStart)return;if(z.scrollMaxSize<=0){j(x,z,0,0);return}P!==z.scrollViewSize&&ge(z.scrollViewSize),Se(H.value.from);const ce=Math.floor(z.scrollMaxSize-Math.max(z.scrollViewSize,z.offsetEnd)-Math.min(g[X],z.scrollViewSize/2));if(ce>0&&Math.ceil(z.scrollStart)>=ce){j(x,z,X,z.scrollMaxSize-z.offsetEnd-q.reduce(Ge,0));return}let Q=0,J=z.scrollStart-z.offsetStart,e=J;if(J<=ne&&J+z.scrollViewSize>=T.value)J-=T.value,Q=H.value.from,e=J;else for(let t=0;J>=q[t]&&Q<X;t++)J-=q[t],Q+=Ee;for(;J>0&&Q<X;)J-=g[Q],J>-z.scrollViewSize?(Q++,e=J):e=g[Q]+J;j(x,z,Q,e)}function j(x,z,X,ne,ce){const Q=typeof ce=="string"&&ce.indexOf("-force")>-1,J=Q===!0?ce.replace("-force",""):ce,e=J!==void 0?J:"start";let t=Math.max(0,X-D.value[e]),n=t+D.value.total;n>i.value&&(n=i.value,t=Math.max(0,n-D.value.total)),h=z.scrollStart;const r=t!==H.value.from||n!==H.value.to;if(r===!1&&J===void 0){xe(X);return}const{activeElement:a}=document,l=K.value;r===!0&&l!==null&&l!==a&&l.contains(a)===!0&&(l.addEventListener("focusout",U),setTimeout(()=>{l!==null&&l.removeEventListener("focusout",U)})),Lr(l,X-t);const v=J!==void 0?g.slice(t,X).reduce(Ge,0):0;if(r===!0){const y=n>=H.value.from&&t<=H.value.to?H.value.to:n;H.value={from:t,to:y},T.value=rt(q,g,0,t),R.value=rt(q,g,n,i.value),requestAnimationFrame(()=>{H.value.to!==n&&h===z.scrollStart&&(H.value={from:H.value.from,to:n},R.value=rt(q,g,n,i.value))})}requestAnimationFrame(()=>{if(h!==z.scrollStart)return;r===!0&&Se(t);const y=g.slice(t,X).reduce(Ge,0),I=y+z.offsetStart+T.value,C=I+g[X];let V=I+ne;if(J!==void 0){const F=y-v,M=z.scrollStart+F;V=Q!==!0&&M<I&&C<M+z.scrollViewSize?M:J==="end"?C-z.scrollViewSize:I-(J==="start"?0:Math.round((z.scrollViewSize-g[X])/2))}h=V,Mi(x,V,s.virtualScrollHorizontal,b.lang.rtl),xe(X)})}function Se(x){const z=K.value;if(z){const X=sn.call(z.children,t=>t.classList&&t.classList.contains("q-virtual-scroll--skip")===!1),ne=X.length,ce=s.virtualScrollHorizontal===!0?t=>t.getBoundingClientRect().width:t=>t.offsetHeight;let Q=x,J,e;for(let t=0;t<ne;){for(J=ce(X[t]),t++;t<ne&&X[t].classList.contains("q-virtual-scroll--with-prev")===!0;)J+=ce(X[t]),t++;e=J-g[Q],e!==0&&(g[Q]+=e,q[Math.floor(Q/Ee)]+=e),Q++}}}function U(){K.value!==null&&K.value!==void 0&&K.value.focus()}function k(x,z){const X=1*m.value;(z===!0||Array.isArray(g)===!1)&&(g=[]);const ne=g.length;g.length=i.value;for(let Q=i.value-1;Q>=ne;Q--)g[Q]=X;const ce=Math.floor((i.value-1)/Ee);q=[];for(let Q=0;Q<=ce;Q++){let J=0;const e=Math.min((Q+1)*Ee,i.value);for(let t=Q*Ee;t<e;t++)J+=g[t];q.push(J)}w=-1,h=void 0,T.value=rt(q,g,0,H.value.from),R.value=rt(q,g,H.value.to,i.value),x>=0?(Se(H.value.from),qe(()=>{fe(x)})):Ce()}function ge(x){if(x===void 0&&typeof window!="undefined"){const J=d();J!=null&&J.nodeType!==8&&(x=Ft(J,f(),le.value,L.value,s.virtualScrollHorizontal,b.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}P=x;const z=parseFloat(s.virtualScrollSliceRatioBefore)||0,X=parseFloat(s.virtualScrollSliceRatioAfter)||0,ne=1+z+X,ce=x===void 0||x<=0?1:Math.ceil(x/m.value),Q=Math.max(1,ce,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/ne));D.value={total:Math.ceil(Q*ne),start:Math.ceil(Q*z),center:Math.ceil(Q*(.5+z)),end:Math.ceil(Q*(1+z)),view:ce}}function ke(x,z){const X=s.virtualScrollHorizontal===!0?"width":"height",ne={["--q-virtual-scroll-item-"+X]:m.value+"px"};return[x==="tbody"?W(x,{class:"q-virtual-scroll__padding",key:"before",ref:le},[W("tr",[W("td",{style:ie({[X]:`${T.value}px`},ne),colspan:E.value})])]):W(x,{class:"q-virtual-scroll__padding",key:"before",ref:le,style:ie({[X]:`${T.value}px`},ne)}),W(x,{class:"q-virtual-scroll__content",key:"content",ref:K,tabindex:-1},z.flat()),x==="tbody"?W(x,{class:"q-virtual-scroll__padding",key:"after",ref:L},[W("tr",[W("td",{style:ie({[X]:`${R.value}px`},ne),colspan:E.value})])]):W(x,{class:"q-virtual-scroll__padding",key:"after",ref:L,style:ie({[X]:`${R.value}px`},ne)})]}function xe(x){w!==x&&(s.onVirtualScroll!==void 0&&c("virtual-scroll",{index:x,from:H.value.from,to:H.value.to-1,direction:x<w?"decrease":"increase",ref:u}),w=x)}ge();const Ce=Fn(he,b.platform.is.ios===!0?120:35);Tn(()=>{ge()});let ye=!1;return Bn(()=>{ye=!0}),Ln(()=>{if(ye!==!0)return;const x=d();h!==void 0&&x!==void 0&&x!==null&&x.nodeType!==8?Mi(x,h,s.virtualScrollHorizontal,b.lang.rtl):fe(w)}),Ve(()=>{Ce.cancel()}),Object.assign(u,{scrollTo:fe,reset:oe,refresh:se}),{virtualScrollSliceRange:H,virtualScrollSliceSizeComputed:D,setVirtualScrollSize:ge,onVirtualScrollEvt:Ce,localResetVirtualScroll:k,padVirtualScroll:ke,scrollTo:fe,reset:oe,refresh:se}}const $i=i=>["add","add-unique","toggle"].includes(i),Nr=".*+?^${}()|[]\\",Wr=Object.keys(Xt);var Tt=De({name:"QSelect",inheritAttrs:!1,props:we(ie(ie(ie({},_r),rr),Xt),{modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:$i},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:i=>["default","menu","dialog"].includes(i),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function}),emits:[...Wi,"add","remove","input-value","keyup","keypress","keydown","filter-abort"],setup(i,{slots:d,emit:f}){const{proxy:m}=Ae(),{$q:o}=m,s=Y(!1),c=Y(!1),u=Y(-1),b=Y(""),h=Y(!1),w=Y(!1);let P,q,g,T,R,D,le,L,K;const H=Y(null),E=Y(null),G=Y(null),A=Y(null),oe=Y(null),se=ar(i),fe=lr(ci),he=O(()=>Array.isArray(i.options)?i.options.length:0),j=O(()=>i.virtualScrollItemSize===void 0?i.optionsDense===!0?24:48:i.virtualScrollItemSize),{virtualScrollSliceRange:Se,virtualScrollSliceSizeComputed:U,localResetVirtualScroll:k,padVirtualScroll:ge,onVirtualScrollEvt:ke,reset:xe,scrollTo:Ce,setVirtualScrollSize:ye}=Hr({virtualScrollLength:he,getVirtualScrollTarget:dn,getVirtualScrollEl:si,virtualScrollItemSizeComputed:j}),x=Ki(),z=O(()=>{const p=i.mapOptions===!0&&i.multiple!==!0,_=i.modelValue!==void 0&&(i.modelValue!==null||p===!0)?i.multiple===!0&&Array.isArray(i.modelValue)?i.modelValue:[i.modelValue]:[];if(i.mapOptions===!0&&Array.isArray(i.options)===!0){const B=i.mapOptions===!0&&q!==void 0?q:[],te=_.map(de=>fn(de,B));return i.modelValue===null&&p===!0?te.filter(de=>de!==null):te}return _}),X=O(()=>{const p={};return Wr.forEach(_=>{const B=i[_];B!==void 0&&(p[_]=B)}),p}),ne=O(()=>i.optionsDark===null?x.isDark.value:i.optionsDark),ce=O(()=>Si(z.value)),Q=O(()=>{let p="q-field__input q-placeholder col";return i.hideSelected===!0||z.value.length===0?[p,i.inputClass]:(p+=" q-field__input--padding",i.inputClass===void 0?p:[p,i.inputClass])}),J=O(()=>(i.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(i.popupContentClass?" "+i.popupContentClass:"")),e=O(()=>he.value===0),t=O(()=>z.value.map(p=>$.value(p)).join(", ")),n=O(()=>i.optionsHtml===!0?()=>!0:p=>p!=null&&p.html===!0),r=O(()=>i.displayValueHtml===!0||i.displayValue===void 0&&(i.optionsHtml===!0||z.value.some(n.value))),a=O(()=>x.focused.value===!0?i.tabindex:-1),l=O(()=>({tabindex:i.tabindex,role:"combobox","aria-label":i.label,"aria-autocomplete":i.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-owns":`${x.targetUid.value}_lb`,"aria-controls":`${x.targetUid.value}_lb`})),v=O(()=>{const p={id:`${x.targetUid.value}_lb`,role:"listbox","aria-multiselectable":i.multiple===!0?"true":"false"};return u.value>=0&&(p["aria-activedescendant"]=`${x.targetUid.value}_${u.value}`),p}),y=O(()=>z.value.map((p,_)=>({index:_,opt:p,html:n.value(p),selected:!0,removeAtIndex:Pe,toggleOption:Oe,tabindex:a.value}))),I=O(()=>{if(he.value===0)return[];const{from:p,to:_}=Se.value;return i.options.slice(p,_).map((B,te)=>{const de=S.value(B)===!0,ue=p+te,me={clickable:!0,active:!1,activeClass:F.value,manualFocus:!0,focused:!1,disable:de,tabindex:-1,dense:i.optionsDense,dark:ne.value,role:"option",id:`${x.targetUid.value}_${ue}`,onClick:()=>{Oe(B)}};return de!==!0&&(kt(B)===!0&&(me.active=!0),u.value===ue&&(me.focused=!0),me["aria-selected"]=me.active===!0?"true":"false",o.platform.is.desktop===!0&&(me.onMousemove=()=>{s.value===!0&&be(ue)})),{index:ue,opt:B,html:n.value(B),label:$.value(B),selected:me.active,focused:me.focused,toggleOption:Oe,setOptionIndex:be,itemProps:me}})}),C=O(()=>i.dropdownIcon!==void 0?i.dropdownIcon:o.iconSet.arrow.dropdown),V=O(()=>i.optionsCover===!1&&i.outlined!==!0&&i.standout!==!0&&i.borderless!==!0&&i.rounded!==!0),F=O(()=>i.optionsSelectedClass!==void 0?i.optionsSelectedClass:i.color!==void 0?`text-${i.color}`:""),M=O(()=>It(i.optionValue,"value")),$=O(()=>It(i.optionLabel,"label")),S=O(()=>It(i.optionDisable,"disable")),N=O(()=>z.value.map(p=>M.value(p))),re=O(()=>{const p={onInput:ci,onChange:fe,onKeydown:oi,onKeyup:ai,onKeypress:li,onFocus:ni,onClick(_){g===!0&&Fe(_)}};return p.onCompositionstart=p.onCompositionupdate=p.onCompositionend=fe,p});ee(z,p=>{q=p,i.useInput===!0&&i.fillInput===!0&&i.multiple!==!0&&x.innerLoading.value!==!0&&(c.value!==!0&&s.value!==!0||ce.value!==!0)&&(T!==!0&&Xe(),(c.value===!0||s.value===!0)&&Qe(""))},{immediate:!0}),ee(()=>i.fillInput,Xe),ee(s,Ot),ee(he,In);function ve(p){return i.emitValue===!0?M.value(p):p}function Z(p){if(p>-1&&p<z.value.length)if(i.multiple===!0){const _=i.modelValue.slice();f("remove",{index:p,value:_.splice(p,1)[0]}),f("update:modelValue",_)}else f("update:modelValue",null)}function Pe(p){Z(p),x.focus()}function Le(p,_){const B=ve(p);if(i.multiple!==!0){i.fillInput===!0&&tt($.value(p),!0,!0),f("update:modelValue",B);return}if(z.value.length===0){f("add",{index:0,value:B}),f("update:modelValue",i.multiple===!0?[B]:B);return}if(_===!0&&kt(p)===!0||i.maxValues!==void 0&&i.modelValue.length>=i.maxValues)return;const te=i.modelValue.slice();f("add",{index:te.length,value:B}),te.push(B),f("update:modelValue",te)}function Oe(p,_){if(x.editable.value!==!0||p===void 0||S.value(p)===!0)return;const B=M.value(p);if(i.multiple!==!0){_!==!0&&(tt(i.fillInput===!0?$.value(p):"",!0,!0),Re()),E.value!==null&&E.value.focus(),(z.value.length===0||it(M.value(z.value[0]),B)!==!0)&&f("update:modelValue",i.emitValue===!0?B:p);return}if((g!==!0||h.value===!0)&&x.focus(),ni(),z.value.length===0){const ue=i.emitValue===!0?B:p;f("add",{index:0,value:ue}),f("update:modelValue",i.multiple===!0?[ue]:ue);return}const te=i.modelValue.slice(),de=N.value.findIndex(ue=>it(ue,B));if(de>-1)f("remove",{index:de,value:te.splice(de,1)[0]});else{if(i.maxValues!==void 0&&te.length>=i.maxValues)return;const ue=i.emitValue===!0?B:p;f("add",{index:te.length,value:ue}),te.push(ue)}f("update:modelValue",te)}function be(p){if(o.platform.is.desktop!==!0)return;const _=p>-1&&p<he.value?p:-1;u.value!==_&&(u.value=_)}function Me(p=1,_){if(s.value===!0){let B=u.value;do B=xi(B+p,-1,he.value-1);while(B!==-1&&B!==u.value&&S.value(i.options[B])===!0);u.value!==B&&(be(B),Ce(B),_!==!0&&i.useInput===!0&&i.fillInput===!0&&st(B>=0?$.value(i.options[B]):D))}}function fn(p,_){const B=te=>it(M.value(te),p);return i.options.find(B)||_.find(B)||p}function It(p,_){const B=p!==void 0?p:_;return typeof B=="function"?B:te=>te!==null&&typeof te=="object"&&B in te?te[B]:te}function kt(p){const _=M.value(p);return N.value.find(B=>it(B,_))!==void 0}function ni(p){i.useInput===!0&&E.value!==null&&(p===void 0||E.value===p.target&&p.target.value===t.value)&&E.value.select()}function ri(p){Kt(p,27)===!0&&s.value===!0&&(Fe(p),Re(),Xe()),f("keyup",p)}function ai(p){const{value:_}=p.target;if(p.keyCode!==void 0){ri(p);return}if(p.target.value="",clearTimeout(P),Xe(),typeof _=="string"&&_.length>0){const B=_.toLocaleLowerCase(),te=ue=>{const me=i.options.find(Ie=>ue.value(Ie).toLocaleLowerCase()===B);return me===void 0?!1:(z.value.indexOf(me)===-1?Oe(me):Re(),!0)},de=ue=>{te(M)!==!0&&(te($)===!0||ue===!0||Qe(_,!0,()=>de(!0)))};de()}else x.clearValue(p)}function li(p){f("keypress",p)}function oi(p){if(f("keydown",p),Hn(p)===!0)return;const _=b.value.length>0&&(i.newValueMode!==void 0||i.onNewValue!==void 0),B=p.shiftKey!==!0&&i.multiple!==!0&&(u.value>-1||_===!0);if(p.keyCode===27){Ne(p);return}if(p.keyCode===9&&B===!1){Ue();return}if(p.target===void 0||p.target.id!==x.targetUid.value)return;if(p.keyCode===40&&x.innerLoading.value!==!0&&s.value===!1){$e(p),Je();return}if(p.keyCode===8&&i.hideSelected!==!0&&b.value.length===0){i.multiple===!0&&Array.isArray(i.modelValue)===!0?Z(i.modelValue.length-1):i.multiple!==!0&&i.modelValue!==null&&f("update:modelValue",null);return}(p.keyCode===35||p.keyCode===36)&&(typeof b.value!="string"||b.value.length===0)&&($e(p),u.value=-1,Me(p.keyCode===36?1:-1,i.multiple)),(p.keyCode===33||p.keyCode===34)&&U.value!==void 0&&($e(p),u.value=Math.max(-1,Math.min(he.value,u.value+(p.keyCode===33?-1:1)*U.value.view)),Me(p.keyCode===33?1:-1,i.multiple)),(p.keyCode===38||p.keyCode===40)&&($e(p),Me(p.keyCode===38?-1:1,i.multiple));const te=he.value;if((L===void 0||K<Date.now())&&(L=""),te>0&&i.useInput!==!0&&p.key!==void 0&&p.key.length===1&&p.altKey===p.ctrlKey&&(p.keyCode!==32||L.length>0)){s.value!==!0&&Je(p);const de=p.key.toLocaleLowerCase(),ue=L.length===1&&L[0]===de;K=Date.now()+1500,ue===!1&&($e(p),L+=de);const me=new RegExp("^"+L.split("").map(qt=>Nr.indexOf(qt)>-1?"\\"+qt:qt).join(".*"),"i");let Ie=u.value;if(ue===!0||Ie<0||me.test($.value(i.options[Ie]))!==!0)do Ie=xi(Ie+1,-1,te-1);while(Ie!==u.value&&(S.value(i.options[Ie])===!0||me.test($.value(i.options[Ie]))!==!0));u.value!==Ie&&qe(()=>{be(Ie),Ce(Ie),Ie>=0&&i.useInput===!0&&i.fillInput===!0&&st($.value(i.options[Ie]))});return}if(!(p.keyCode!==13&&(p.keyCode!==32||i.useInput===!0||L!=="")&&(p.keyCode!==9||B===!1))){if(p.keyCode!==9&&$e(p),u.value>-1&&u.value<te){Oe(i.options[u.value]);return}if(_===!0){const de=(ue,me)=>{if(me){if($i(me)!==!0)return}else me=i.newValueMode;if(ue==null)return;tt("",i.multiple!==!0,!0),(me==="toggle"?Oe:Le)(ue,me==="add-unique"),i.multiple!==!0&&(E.value!==null&&E.value.focus(),Re())};if(i.onNewValue!==void 0?f("new-value",b.value,de):de(b.value),i.multiple!==!0)return}s.value===!0?Ue():x.innerLoading.value!==!0&&Je()}}function si(){return g===!0?oe.value:G.value!==null&&G.value.__qPortalInnerRef.value!==null?G.value.__qPortalInnerRef.value:void 0}function dn(){return si()}function hn(){return i.hideSelected===!0?[]:d["selected-item"]!==void 0?y.value.map(p=>d["selected-item"](p)).slice():d.selected!==void 0?[].concat(d.selected()):i.useChips===!0?y.value.map((p,_)=>W(Yi,{key:"option-"+_,removable:x.editable.value===!0&&S.value(p.opt)!==!0,dense:!0,textColor:i.color,tabindex:a.value,onRemove(){p.removeAtIndex(_)}},()=>W("span",{class:"ellipsis",[p.html===!0?"innerHTML":"textContent"]:$.value(p.opt)}))):[W("span",{[r.value===!0?"innerHTML":"textContent"]:i.displayValue!==void 0?i.displayValue:t.value})]}function ui(){if(e.value===!0)return d["no-option"]!==void 0?d["no-option"]({inputValue:b.value}):void 0;const p=d.option!==void 0?d.option:B=>W(Xi,ie({key:B.index},B.itemProps),()=>W(Nt,()=>W(or,()=>W("span",{[B.html===!0?"innerHTML":"textContent"]:B.label}))));let _=ge("div",I.value.map(p));return d["before-options"]!==void 0&&(_=d["before-options"]().concat(_)),Jt(d["after-options"],_)}function vn(p,_){const B=_===!0?ie(ie({},l.value),x.splitAttrs.attributes.value):void 0,te=ie(we(ie({ref:_===!0?E:void 0,key:"i_t",class:Q.value,style:i.inputStyle,value:b.value!==void 0?b.value:"",type:"search"},B),{id:_===!0?x.targetUid.value:void 0,maxlength:i.maxlength,autocomplete:i.autocomplete,"data-autofocus":p!==!0&&i.autofocus===!0||void 0,disabled:i.disable===!0,readonly:i.readonly===!0}),re.value);return p!==!0&&g===!0&&(Array.isArray(te.class)===!0?te.class=[...te.class,"no-pointer-events"]:te.class+=" no-pointer-events"),W("input",te)}function ci(p){clearTimeout(P),!(p&&p.target&&p.target.composing===!0)&&(st(p.target.value||""),T=!0,D=b.value,x.focused.value!==!0&&(g!==!0||h.value===!0)&&x.focus(),i.onFilter!==void 0&&(P=setTimeout(()=>{Qe(b.value)},i.inputDebounce)))}function st(p){b.value!==p&&(b.value=p,f("input-value",p))}function tt(p,_,B){T=B!==!0,i.useInput===!0&&(st(p),(_===!0||B!==!0)&&(D=p),_!==!0&&Qe(p))}function Qe(p,_,B){if(i.onFilter===void 0||_!==!0&&x.focused.value!==!0)return;x.innerLoading.value===!0?f("filter-abort"):(x.innerLoading.value=!0,w.value=!0),p!==""&&i.multiple!==!0&&z.value.length>0&&T!==!0&&p===$.value(z.value[0])&&(p="");const te=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);clearTimeout(R),R=te,f("filter",p,(de,ue)=>{(_===!0||x.focused.value===!0)&&R===te&&(clearTimeout(R),typeof de=="function"&&de(),w.value=!1,qe(()=>{x.innerLoading.value=!1,x.editable.value===!0&&(_===!0?s.value===!0&&Re():s.value===!0?Ot(!0):s.value=!0),typeof ue=="function"&&qe(()=>{ue(m)}),typeof B=="function"&&qe(()=>{B(m)})}))},()=>{x.focused.value===!0&&R===te&&(clearTimeout(R),x.innerLoading.value=!1,w.value=!1),s.value===!0&&(s.value=!1)})}function pn(){return W($r,we(ie({ref:G,class:J.value,style:i.popupContentStyle,modelValue:s.value,fit:i.menuShrink!==!0,cover:i.optionsCover===!0&&e.value!==!0&&i.useInput!==!0,anchor:i.menuAnchor,self:i.menuSelf,offset:i.menuOffset,dark:ne.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:V.value,transitionShow:i.transitionShow,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,separateClosePopup:!0},v.value),{onScrollPassive:ke,onBeforeShow:di,onBeforeHide:yn,onShow:mn}),ui)}function yn(p){hi(p),Ue()}function mn(){ye()}function gn(p){Fe(p),E.value!==null&&E.value.focus(),h.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bn(p){Fe(p),qe(()=>{h.value=!1})}function wn(){const p=[W(gr,we(ie(we(ie({class:`col-auto ${x.fieldClass.value}`},X.value),{for:x.targetUid.value,dark:ne.value,square:!0,loading:w.value,itemAligned:!1,filled:!0,stackLabel:b.value.length>0}),x.splitAttrs.listeners.value),{onFocus:gn,onBlur:bn}),we(ie({},d),{rawControl:()=>x.getControl(!0),before:void 0,after:void 0}))];return s.value===!0&&p.push(W("div",we(ie({ref:oe,class:J.value+" scroll",style:i.popupContentStyle},v.value),{onClick:Ne,onScrollPassive:ke}),ui())),W(Tr,{ref:A,modelValue:c.value,position:i.useInput===!0?"top":void 0,transitionShow:le,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,onBeforeShow:di,onBeforeHide:Sn,onHide:xn,onShow:Cn},()=>W("div",{class:"q-select__dialog"+(ne.value===!0?" q-select__dialog--dark q-dark":"")+(h.value===!0?" q-select__dialog--focused":"")},p))}function Sn(p){hi(p),A.value!==null&&A.value.__updateRefocusTarget(x.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),x.focused.value=!1}function xn(p){Re(),x.focused.value===!1&&f("blur",p),Xe()}function Cn(){const p=document.activeElement;(p===null||p.id!==x.targetUid.value)&&E.value!==null&&E.value!==p&&E.value.focus(),ye()}function Ue(){c.value!==!0&&(u.value=-1,s.value===!0&&(s.value=!1),x.focused.value===!1&&(clearTimeout(R),R=void 0,x.innerLoading.value===!0&&(f("filter-abort"),x.innerLoading.value=!1,w.value=!1)))}function Je(p){x.editable.value===!0&&(g===!0?(x.onControlFocusin(p),c.value=!0,qe(()=>{x.focus()})):x.focus(),i.onFilter!==void 0?Qe(b.value):(e.value!==!0||d["no-option"]!==void 0)&&(s.value=!0))}function Re(){c.value=!1,Ue()}function Xe(){i.useInput===!0&&tt(i.multiple!==!0&&i.fillInput===!0&&z.value.length>0&&$.value(z.value[0])||"",!0,!0)}function Ot(p){let _=-1;if(p===!0){if(z.value.length>0){const B=M.value(z.value[0]);_=i.options.findIndex(te=>it(M.value(te),B))}k(_)}be(_)}function In(){s.value===!0&&x.innerLoading.value===!1&&(xe(),qe(()=>{s.value===!0&&x.innerLoading.value===!1&&Ot(!0)}))}function fi(){c.value===!1&&G.value!==null&&G.value.updatePosition()}function di(p){p!==void 0&&Fe(p),f("popup-show",p),x.hasPopupOpen=!0,x.onControlFocusin(p)}function hi(p){p!==void 0&&Fe(p),f("popup-hide",p),x.hasPopupOpen=!1,x.onControlFocusout(p)}function vi(){g=o.platform.is.mobile!==!0&&i.behavior!=="dialog"?!1:i.behavior!=="menu"&&(i.useInput===!0?d["no-option"]!==void 0||i.onFilter!==void 0||e.value===!1:!0),le=o.platform.is.ios===!0&&g===!0&&i.useInput===!0?"fade":i.transitionShow}return Rn(vi),_n(fi),vi(),Ve(()=>{clearTimeout(P)}),Object.assign(m,{showPopup:Je,hidePopup:Re,removeAtIndex:Z,add:Le,toggleOption:Oe,getOptionIndex:()=>u.value,setOptionIndex:be,moveOptionSelection:Me,filter:Qe,updateMenuPosition:fi,updateInputValue:tt,isOptionSelected:kt,getEmittingOptionValue:ve,isOptionDisabled:(...p)=>S.value.apply(null,p)===!0,getOptionValue:(...p)=>M.value.apply(null,p),getOptionLabel:(...p)=>$.value.apply(null,p)}),Object.assign(x,{innerValue:z,fieldClass:O(()=>`q-select q-field--auto-height q-select--with${i.useInput!==!0?"out":""}-input q-select--with${i.useChips!==!0?"out":""}-chips q-select--${i.multiple===!0?"multiple":"single"}`),inputRef:H,targetRef:E,hasValue:ce,showPopup:Je,floatingLabel:O(()=>(i.hideSelected===!0?b.value.length>0:ce.value===!0)||Si(i.displayValue)),getControlChild:()=>{if(x.editable.value!==!1&&(c.value===!0||e.value!==!0||d["no-option"]!==void 0))return g===!0?wn():pn();x.hasPopupOpen===!0&&(x.hasPopupOpen=!1)},controlEvents:{onFocusin(p){x.onControlFocusin(p)},onFocusout(p){x.onControlFocusout(p,()=>{Xe(),Ue()})},onClick(p){if(Ne(p),g!==!0&&s.value===!0){Ue(),E.value!==null&&E.value.focus();return}Je(p)}},getControl:p=>{const _=hn(),B=p===!0||c.value!==!0||g!==!0;if(i.useInput===!0)_.push(vn(p,B));else if(x.editable.value===!0){const de=B===!0?l.value:void 0;_.push(W("input",we(ie({ref:B===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:B===!0?x.targetUid.value:void 0,readonly:!0},de),{onKeydown:oi,onKeyup:ri,onKeypress:li}))),B===!0&&typeof i.autocomplete=="string"&&i.autocomplete.length>0&&_.push(W("input",{class:"q-select__autocomplete-input",autocomplete:i.autocomplete,onKeyup:ai}))}if(se.value!==void 0&&i.disable!==!0&&N.value.length>0){const de=N.value.map(ue=>W("option",{value:ue,selected:!0}));_.push(W("select",{class:"hidden",name:se.value,multiple:i.multiple},de))}const te=i.useInput===!0||B!==!0?void 0:x.splitAttrs.attributes.value;return W("div",ie({class:"q-field__native row items-center"},te),_)},getInnerAppend:()=>i.loading!==!0&&w.value!==!0&&i.hideDropdownIcon!==!0?[W(yt,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:C.value})]:null}),ji(x)}});function Bt(i,d,f){const m=gt(i);let o,s=m.left-d.event.x,c=m.top-d.event.y,u=Math.abs(s),b=Math.abs(c);const h=d.direction;h.horizontal===!0&&h.vertical!==!0?o=s<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?o=c<0?"up":"down":h.up===!0&&c<0?(o="up",u>b&&(h.left===!0&&s<0?o="left":h.right===!0&&s>0&&(o="right"))):h.down===!0&&c>0?(o="down",u>b&&(h.left===!0&&s<0?o="left":h.right===!0&&s>0&&(o="right"))):h.left===!0&&s<0?(o="left",u<b&&(h.up===!0&&c<0?o="up":h.down===!0&&c>0&&(o="down"))):h.right===!0&&s>0&&(o="right",u<b&&(h.up===!0&&c<0?o="up":h.down===!0&&c>0&&(o="down")));let w=!1;if(o===void 0&&f===!1){if(d.event.isFirst===!0||d.event.lastDir===void 0)return{};o=d.event.lastDir,w=!0,o==="left"||o==="right"?(m.left-=s,u=0,s=0):(m.top-=c,b=0,c=0)}return{synthetic:w,payload:{evt:i,touch:d.event.mouse!==!0,mouse:d.event.mouse===!0,position:m,direction:o,isFirst:d.event.isFirst,isFinal:f===!0,duration:Date.now()-d.event.time,distance:{x:u,y:b},offset:{x:s,y:c},delta:{x:m.left-d.event.lastX,y:m.top-d.event.lastY}}}}let jr=0;var Lt=Nn({name:"touch-pan",beforeMount(i,{value:d,modifiers:f}){if(f.mouse!==!0&&Be.has.touch!==!0)return;function m(s,c){f.mouse===!0&&c===!0?$e(s):(f.stop===!0&&Fe(s),f.prevent===!0&&Ne(s))}const o={uid:"qvtp_"+jr++,handler:d,modifiers:f,direction:Ci(f),noop:Ut,mouseStart(s){Ii(s,o)&&Wn(s)&&(Ye(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(s,!0))},touchStart(s){if(Ii(s,o)){const c=s.target;Ye(o,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),o.start(s)}},start(s,c){if(Be.is.firefox===!0&&Dt(i,!0),o.lastEvt=s,c===!0||f.stop===!0){if(o.direction.all!==!0&&(c!==!0||o.modifiers.mouseAllDir!==!0)){const h=s.type.indexOf("mouse")>-1?new MouseEvent(s.type,s):new TouchEvent(s.type,s);s.defaultPrevented===!0&&Ne(h),s.cancelBubble===!0&&Fe(h),Object.assign(h,{qKeyEvent:s.qKeyEvent,qClickOutside:s.qClickOutside,qAnchorHandled:s.qAnchorHandled,qClonedBy:s.qClonedBy===void 0?[o.uid]:s.qClonedBy.concat(o.uid)}),o.initialEvent={target:s.target,event:h}}Fe(s)}const{left:u,top:b}=gt(s);o.event={x:u,y:b,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:b}},move(s){if(o.event===void 0)return;const c=gt(s),u=c.left-o.event.x,b=c.top-o.event.y;if(u===0&&b===0)return;o.lastEvt=s;const h=o.event.mouse===!0,w=()=>{m(s,h),f.preserveCursor!==!0&&(document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Qi(),o.styleCleanup=g=>{if(o.styleCleanup=void 0,f.preserveCursor!==!0&&(document.documentElement.style.cursor=""),document.body.classList.remove("non-selectable"),h===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{T(),g()},50):T()}else g!==void 0&&g()}};if(o.event.detected===!0){o.event.isFirst!==!0&&m(s,o.event.mouse);const{payload:g,synthetic:T}=Bt(s,o,!1);g!==void 0&&(o.handler(g)===!1?o.end(s):(o.styleCleanup===void 0&&o.event.isFirst===!0&&w(),o.event.lastX=g.position.left,o.event.lastY=g.position.top,o.event.lastDir=T===!0?void 0:g.direction,o.event.isFirst=!1));return}if(o.direction.all===!0||h===!0&&o.modifiers.mouseAllDir===!0){w(),o.event.detected=!0,o.move(s);return}const P=Math.abs(u),q=Math.abs(b);P!==q&&(o.direction.horizontal===!0&&P>q||o.direction.vertical===!0&&P<q||o.direction.up===!0&&P<q&&b<0||o.direction.down===!0&&P<q&&b>0||o.direction.left===!0&&P>q&&u<0||o.direction.right===!0&&P>q&&u>0?(o.event.detected=!0,o.move(s)):o.end(s,!0))},end(s,c){if(o.event!==void 0){if(ht(o,"temp"),Be.is.firefox===!0&&Dt(i,!1),c===!0)o.styleCleanup!==void 0&&o.styleCleanup(),o.event.detected!==!0&&o.initialEvent!==void 0&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(o.event.detected===!0){o.event.isFirst===!0&&o.handler(Bt(s===void 0?o.lastEvt:s,o).payload);const{payload:u}=Bt(s===void 0?o.lastEvt:s,o,!0),b=()=>{o.handler(u)};o.styleCleanup!==void 0?o.styleCleanup(b):b()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};i.__qtouchpan=o,f.mouse===!0&&Ye(o,"main",[[i,"mousedown","mouseStart",`passive${f.mouseCapture===!0?"Capture":""}`]]),Be.has.touch===!0&&Ye(o,"main",[[i,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[i,"touchmove","noop","notPassiveCapture"]])},updated(i,d){const f=i.__qtouchpan;f!==void 0&&(d.oldValue!==d.value&&(typeof value!="function"&&f.end(),f.handler=d.value),f.direction=Ci(d.modifiers))},beforeUnmount(i){const d=i.__qtouchpan;d!==void 0&&(d.event!==void 0&&d.end(),ht(d,"main"),ht(d,"temp"),Be.is.firefox===!0&&Dt(i,!1),d.styleCleanup!==void 0&&d.styleCleanup(),delete i.__qtouchpan)}});const Fi=150;var Kr=De({name:"QDrawer",inheritAttrs:!1,props:we(ie(ie({},Zt),Yt),{side:{type:String,default:"left",validator:i=>["left","right"].includes(i)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:i=>["default","desktop","mobile"].includes(i),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean}),emits:[...ei,"on-layout","mini-state"],setup(i,{slots:d,emit:f,attrs:m}){const o=Ae(),{proxy:{$q:s}}=o,c=Gt(i,s),{preventBodyScroll:u}=on(),{registerTimeout:b}=ti(),h=lt(ot,()=>{console.error("QDrawer needs to be child of QLayout")});let w,P,q;const g=Y(i.behavior==="mobile"||i.behavior!=="desktop"&&h.totalWidth.value<=i.breakpoint),T=O(()=>i.mini===!0&&g.value!==!0),R=O(()=>T.value===!0?i.miniWidth:i.width),D=Y(i.showIfAbove===!0&&g.value===!1?!0:i.modelValue===!0),le=O(()=>i.persistent!==!0&&(g.value===!0||Ce.value===!0));function L(S,N){if(G(),S!==!1&&h.animate(),a(0),g.value===!0){const re=h.instances[k.value];re!==void 0&&re.belowBreakpoint===!0&&re.hide(!1),l(1),h.isContainer.value!==!0&&u(!0)}else l(0),S!==!1&&v(!1);b(()=>{S!==!1&&v(!0),N!==!0&&f("show",S)},Fi)}function K(S,N){A(),S!==!1&&h.animate(),l(0),a(fe.value*R.value),V(),N!==!0&&b(()=>{f("hide",S)},Fi)}const{show:H,hide:E}=ii({showing:D,hideOnRouteChange:le,handleShow:L,handleHide:K}),{addToHistory:G,removeFromHistory:A}=ln(D,E,le),oe={belowBreakpoint:g,hide:E},se=O(()=>i.side==="right"),fe=O(()=>(s.lang.rtl===!0?-1:1)*(se.value===!0?1:-1)),he=Y(0),j=Y(!1),Se=Y(!1),U=Y(R.value*fe.value),k=O(()=>se.value===!0?"left":"right"),ge=O(()=>D.value===!0&&g.value===!1&&i.overlay===!1?i.miniToOverlay===!0?i.miniWidth:R.value:0),ke=O(()=>i.overlay===!0||i.miniToOverlay===!0||h.view.value.indexOf(se.value?"R":"L")>-1||s.platform.is.ios===!0&&h.isContainer.value===!0),xe=O(()=>i.overlay===!1&&D.value===!0&&g.value===!1),Ce=O(()=>i.overlay===!0&&D.value===!0&&g.value===!1),ye=O(()=>"fullscreen q-drawer__backdrop"+(D.value===!1&&j.value===!1?" hidden":"")),x=O(()=>({backgroundColor:`rgba(0,0,0,${he.value*.4})`})),z=O(()=>se.value===!0?h.rows.value.top[2]==="r":h.rows.value.top[0]==="l"),X=O(()=>se.value===!0?h.rows.value.bottom[2]==="r":h.rows.value.bottom[0]==="l"),ne=O(()=>{const S={};return h.header.space===!0&&z.value===!1&&(ke.value===!0?S.top=`${h.header.offset}px`:h.header.space===!0&&(S.top=`${h.header.size}px`)),h.footer.space===!0&&X.value===!1&&(ke.value===!0?S.bottom=`${h.footer.offset}px`:h.footer.space===!0&&(S.bottom=`${h.footer.size}px`)),S}),ce=O(()=>{const S={width:`${R.value}px`,transform:`translateX(${U.value}px)`};return g.value===!0?S:Object.assign(S,ne.value)}),Q=O(()=>"q-drawer__content fit "+(h.isContainer.value!==!0?"scroll":"overflow-auto")),J=O(()=>`q-drawer q-drawer--${i.side}`+(Se.value===!0?" q-drawer--mini-animate":"")+(i.bordered===!0?" q-drawer--bordered":"")+(c.value===!0?" q-drawer--dark q-dark":"")+(j.value===!0?" no-transition":D.value===!0?"":" q-layout--prevent-focus")+(g.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${T.value===!0?"mini":"standard"}`+(ke.value===!0||xe.value!==!0?" fixed":"")+(i.overlay===!0||i.miniToOverlay===!0?" q-drawer--on-top":"")+(z.value===!0?" q-drawer--top-padding":""))),e=O(()=>{const S=s.lang.rtl===!0?i.side:k.value;return[[Lt,I,void 0,{[S]:!0,mouse:!0}]]}),t=O(()=>{const S=s.lang.rtl===!0?k.value:i.side;return[[Lt,C,void 0,{[S]:!0,mouse:!0}]]}),n=O(()=>{const S=s.lang.rtl===!0?k.value:i.side;return[[Lt,C,void 0,{[S]:!0,mouse:!0,mouseAllDir:!0}]]});function r(){M(g,i.behavior==="mobile"||i.behavior!=="desktop"&&h.totalWidth.value<=i.breakpoint)}ee(g,S=>{S===!0?(w=D.value,D.value===!0&&E(!1)):i.overlay===!1&&i.behavior!=="mobile"&&w!==!1&&(D.value===!0?(a(0),l(0),V()):H(!1))}),ee(()=>i.side,(S,N)=>{h.instances[N]===oe&&(h.instances[N]=void 0,h[N].space=!1,h[N].offset=0),h.instances[S]=oe,h[S].size=R.value,h[S].space=xe.value,h[S].offset=ge.value}),ee(h.totalWidth,()=>{(h.isContainer.value===!0||document.qScrollPrevented!==!0)&&r()}),ee(()=>i.behavior+i.breakpoint,r),ee(h.isContainer,S=>{D.value===!0&&u(S!==!0),S===!0&&r()}),ee(h.scrollbarWidth,()=>{a(D.value===!0?0:void 0)}),ee(ge,S=>{F("offset",S)}),ee(xe,S=>{f("on-layout",S),F("space",S)}),ee(se,()=>{a()}),ee(R,S=>{a(),$(i.miniToOverlay,S)}),ee(()=>i.miniToOverlay,S=>{$(S,R.value)}),ee(()=>s.lang.rtl,()=>{a()}),ee(()=>i.mini,()=>{i.modelValue===!0&&(y(),h.animate())}),ee(T,S=>{f("mini-state",S)});function a(S){S===void 0?qe(()=>{S=D.value===!0?0:R.value,a(fe.value*S)}):(h.isContainer.value===!0&&se.value===!0&&(g.value===!0||Math.abs(S)===R.value)&&(S+=fe.value*h.scrollbarWidth.value),U.value=S)}function l(S){he.value=S}function v(S){const N=S===!0?"remove":h.isContainer.value!==!0?"add":"";N!==""&&document.body.classList[N]("q-body--drawer-toggle")}function y(){clearTimeout(P),o.proxy&&o.proxy.$el&&o.proxy.$el.classList.add("q-drawer--mini-animate"),Se.value=!0,P=setTimeout(()=>{Se.value=!1,o&&o.proxy&&o.proxy.$el&&o.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function I(S){if(D.value!==!1)return;const N=R.value,re=ft(S.distance.x,0,N);if(S.isFinal===!0){re>=Math.min(75,N)===!0?H():(h.animate(),l(0),a(fe.value*N)),j.value=!1;return}a((s.lang.rtl===!0?se.value!==!0:se.value)?Math.max(N-re,0):Math.min(0,re-N)),l(ft(re/N,0,1)),S.isFirst===!0&&(j.value=!0)}function C(S){if(D.value!==!0)return;const N=R.value,re=S.direction===i.side,ve=(s.lang.rtl===!0?re!==!0:re)?ft(S.distance.x,0,N):0;if(S.isFinal===!0){Math.abs(ve)<Math.min(75,N)===!0?(h.animate(),l(1),a(0)):E(),j.value=!1;return}a(fe.value*ve),l(ft(1-ve/N,0,1)),S.isFirst===!0&&(j.value=!0)}function V(){u(!1),v(!0)}function F(S,N){h.update(i.side,S,N)}function M(S,N){S.value!==N&&(S.value=N)}function $(S,N){F("size",S===!0?i.miniWidth:N)}return h.instances[i.side]=oe,$(i.miniToOverlay,R.value),F("space",xe.value),F("offset",ge.value),i.showIfAbove===!0&&i.modelValue!==!0&&D.value===!0&&i["onUpdate:modelValue"]!==void 0&&f("update:modelValue",!0),Qt(()=>{f("on-layout",xe.value),f("mini-state",T.value),w=i.showIfAbove===!0;const S=()=>{(D.value===!0?L:K)(!1,!0)};if(h.totalWidth.value!==0){qe(S);return}q=ee(h.totalWidth,()=>{q(),q=void 0,D.value===!1&&i.showIfAbove===!0&&g.value===!1?H(!1):S()})}),Ve(()=>{q!==void 0&&q(),clearTimeout(P),D.value===!0&&V(),h.instances[i.side]===oe&&(h.instances[i.side]=void 0,F("size",0),F("offset",0),F("space",!1))}),()=>{const S=[];g.value===!0&&(i.noSwipeOpen===!1&&S.push(Hi(W("div",{key:"open",class:`q-drawer__opener fixed-${i.side}`,"aria-hidden":"true"}),e.value)),S.push(_t("div",{ref:"backdrop",class:ye.value,style:x.value,"aria-hidden":"true",onClick:E},void 0,"backdrop",i.noSwipeBackdrop!==!0&&D.value===!0,()=>n.value)));const N=T.value===!0&&d.mini!==void 0,re=[W("div",we(ie({},m),{key:""+N,class:[Q.value,m.class]}),N===!0?d.mini():et(d.default))];return i.elevated===!0&&D.value===!0&&re.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S.push(_t("aside",{ref:"content",class:J.value,style:ce.value},re,"contentclose",i.noSwipeClose!==!0&&g.value===!0,()=>t.value)),W("div",{class:"q-drawer-container"},S)}}}),Qr=De({name:"QPageContainer",setup(i,{slots:d}){const{proxy:{$q:f}}=Ae(),m=lt(ot,()=>{console.error("QPageContainer needs to be child of QLayout")});Ni(jn,!0);const o=O(()=>{const s={};return m.header.space===!0&&(s.paddingTop=`${m.header.size}px`),m.right.space===!0&&(s[`padding${f.lang.rtl===!0?"Left":"Right"}`]=`${m.right.size}px`),m.footer.space===!0&&(s.paddingBottom=`${m.footer.size}px`),m.left.space===!0&&(s[`padding${f.lang.rtl===!0?"Right":"Left"}`]=`${m.left.size}px`),s});return()=>W("div",{class:"q-page-container",style:o.value},et(d.default))}});const{passive:Ti}=mt,Ur=["both","horizontal","vertical"];var Jr=De({name:"QScrollObserver",props:{axis:{type:String,validator:i=>Ur.includes(i),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(i,{emit:d}){const f={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let m=null,o,s;ee(()=>i.scrollTarget,()=>{b(),u()});function c(){m!==null&&m();const P=Math.max(0,Kn(o)),q=Qn(o),g={top:P-f.position.top,left:q-f.position.left};if(i.axis==="vertical"&&g.top===0||i.axis==="horizontal"&&g.left===0)return;const T=Math.abs(g.top)>=Math.abs(g.left)?g.top<0?"up":"down":g.left<0?"left":"right";f.position={top:P,left:q},f.directionChanged=f.direction!==T,f.delta=g,f.directionChanged===!0&&(f.direction=T,f.inflectionPoint=f.position),d("scroll",ie({},f))}function u(){o=Ri(s,i.scrollTarget),o.addEventListener("scroll",h,Ti),h(!0)}function b(){o!==void 0&&(o.removeEventListener("scroll",h,Ti),o=void 0)}function h(P){if(P===!0||i.debounce===0||i.debounce==="0")c();else if(m===null){const[q,g]=i.debounce?[setTimeout(c,i.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];m=()=>{g(q),m=null}}}const w=Ae();return Qt(()=>{s=w.proxy.$el.parentNode,u()}),Ve(()=>{m!==null&&m(),b()}),Object.assign(w.proxy,{trigger:h,getPosition:()=>f}),Ut}}),Xr=De({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:i=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(i.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(i,{slots:d,emit:f}){const{proxy:{$q:m}}=Ae(),o=Y(null),s=Y(m.screen.height),c=Y(i.container===!0?0:m.screen.width),u=Y({position:0,direction:"down",inflectionPoint:0}),b=Y(0),h=Y(Bi.value===!0?0:vt()),w=O(()=>"q-layout q-layout--"+(i.container===!0?"containerized":"standard")),P=O(()=>i.container===!1?{minHeight:m.screen.height+"px"}:null),q=O(()=>h.value!==0?{[m.lang.rtl===!0?"left":"right"]:`${h.value}px`}:null),g=O(()=>h.value!==0?{[m.lang.rtl===!0?"right":"left"]:0,[m.lang.rtl===!0?"left":"right"]:`-${h.value}px`,width:`calc(100% + ${h.value}px)`}:null);function T(H){if(i.container===!0||document.qScrollPrevented!==!0){const E={position:H.position.top,direction:H.direction,directionChanged:H.directionChanged,inflectionPoint:H.inflectionPoint.top,delta:H.delta.top};u.value=E,i.onScroll!==void 0&&f("scroll",E)}}function R(H){const{height:E,width:G}=H;let A=!1;s.value!==E&&(A=!0,s.value=E,i.onScrollHeight!==void 0&&f("scroll-height",E),le()),c.value!==G&&(A=!0,c.value=G),A===!0&&i.onResize!==void 0&&f("resize",H)}function D({height:H}){b.value!==H&&(b.value=H,le())}function le(){if(i.container===!0){const H=s.value>b.value?vt():0;h.value!==H&&(h.value=H)}}let L;const K={instances:{},view:O(()=>i.view),isContainer:O(()=>i.container),rootRef:o,height:s,containerHeight:b,scrollbarWidth:h,totalWidth:O(()=>c.value+h.value),rows:O(()=>{const H=i.view.toLowerCase().split(" ");return{top:H[0].split(""),middle:H[1].split(""),bottom:H[2].split("")}}),header:ut({size:0,offset:0,space:!1}),right:ut({size:300,offset:0,space:!1}),footer:ut({size:0,offset:0,space:!1}),left:ut({size:300,offset:0,space:!1}),scroll:u,animate(){L!==void 0?clearTimeout(L):document.body.classList.add("q-body--layout-animate"),L=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),L=void 0},155)},update(H,E,G){K[H][E]=G}};if(Ni(ot,K),vt()>0){let G=function(){H=null,E.classList.remove("hide-scrollbar")},A=function(){if(H===null){if(E.scrollHeight>m.screen.height)return;E.classList.add("hide-scrollbar")}else clearTimeout(H);H=setTimeout(G,300)},oe=function(se){H!==null&&se==="remove"&&(clearTimeout(H),G()),window[`${se}EventListener`]("resize",A)},H=null;const E=document.body;ee(()=>i.container!==!0?"add":"remove",oe),i.container!==!0&&oe("add"),Li(()=>{oe("remove")})}return()=>{const H=Jt(d.default,[W(Jr,{onScroll:T}),W(wt,{onResize:R})]),E=W("div",{class:w.value,style:P.value,ref:i.container===!0?void 0:o,tabindex:-1},H);return i.container===!0?W("div",{class:"q-layout-container overflow-hidden",ref:o},[W(wt,{onResize:D}),W("div",{class:"absolute-full",style:q.value},[W("div",{class:"scroll",style:g.value},[E])])]):E}}}),He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Yr(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var un={exports:{}},cn={exports:{}};(function(i,d){(function(f,m){i.exports=m()})(He,function(){return function(){function f(o,s){if(this.app="loki",this.options=s||{},typeof o!="undefined"&&(this.app=o),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}f.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},f.prototype.checkAvailability=function(){return!!(typeof indexedDB!="undefined"&&indexedDB)},f.prototype.loadDatabase=function(o,s){var c=this.app,u=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(b){u.catalog=b,u.loadDatabase(o,s)});return}this.catalog.getAppKey(c,o,function(b){if(typeof s=="function"){if(b.id===0){s(null);return}s(b.val)}else console.log(b.val)})},f.prototype.loadKey=f.prototype.loadDatabase,f.prototype.saveDatabase=function(o,s,c){var u=this.app,b=this;function h(w){w&&w.success===!0?c(null):c(new Error("Error saving database")),b.options.closeAfterSave&&b.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(w){b.saveDatabase(o,s,h)});return}this.catalog.setAppKey(u,o,s,h)},f.prototype.saveKey=f.prototype.saveDatabase,f.prototype.deleteDatabase=function(o,s){var c=this.app,u=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(b){u.catalog=b,u.deleteDatabase(o,s)});return}this.catalog.getAppKey(c,o,function(b){var h=b.id;h!==0?u.catalog.deleteAppKey(h,s):typeof s=="function"&&s({success:!0})})},f.prototype.deleteKey=f.prototype.deleteDatabase,f.prototype.deleteDatabasePartitions=function(o){var s=this;this.getDatabaseList(function(c){c.forEach(function(u){u.startsWith(o)&&s.deleteDatabase(u)})})},f.prototype.getDatabaseList=function(o){var s=this.app,c=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(u){c.catalog=u,c.getDatabaseList(o)});return}this.catalog.getAppKeys(s,function(u){for(var b=[],h=0;h<u.length;h++)b.push(u[h].key);typeof o=="function"?o(b):b.forEach(function(w){console.log(w)})})},f.prototype.getKeyList=f.prototype.getDatabaseList,f.prototype.getCatalogSummary=function(o){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new m(function(c){s.catalog=c,s.getCatalogSummary(o)});return}this.catalog.getAllKeys(function(c){for(var u=[],b,h,w,P,q,g=0;g<c.length;g++)b=c[g],w=b.app||"",P=b.key||"",q=b.val||"",h=w.length*2+P.length*2+q.length+1,u.push({app:b.app,key:b.key,size:h});typeof o=="function"?o(u):u.forEach(function(T){console.log(T)})})};function m(o){this.db=null,this.initializeLokiCatalog(o)}return m.prototype.initializeLokiCatalog=function(o){var s=indexedDB.open("LokiCatalog",1),c=this;s.onupgradeneeded=function(u){var b=u.target.result;if(b.objectStoreNames.contains("LokiAKV")&&b.deleteObjectStore("LokiAKV"),!b.objectStoreNames.contains("LokiAKV")){var h=b.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});h.createIndex("app","app",{unique:!1}),h.createIndex("key","key",{unique:!1}),h.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(u){c.db=u.target.result,typeof o=="function"&&o(c)},s.onerror=function(u){throw u}},m.prototype.getAppKey=function(o,s,c){var u=this.db.transaction(["LokiAKV"],"readonly"),b=u.objectStore("LokiAKV"),h=b.index("appkey"),w=o+","+s,P=h.get(w);P.onsuccess=function(q){return function(g){var T=g.target.result;(T===null||typeof T=="undefined")&&(T={id:0,success:!1}),typeof q=="function"?q(T):console.log(T)}}(c),P.onerror=function(q){return function(g){if(typeof q=="function")q({id:0,success:!1});else throw g}}(c)},m.prototype.getAppKeyById=function(o,s,c){var u=this.db.transaction(["LokiAKV"],"readonly"),b=u.objectStore("LokiAKV"),h=b.get(o);h.onsuccess=function(w,P){return function(q){typeof P=="function"?P(q.target.result,w):console.log(q.target.result)}}(c,s)},m.prototype.setAppKey=function(o,s,c,u){var b=this.db.transaction(["LokiAKV"],"readwrite"),h=b.objectStore("LokiAKV"),w=h.index("appkey"),P=o+","+s,q=w.get(P);q.onsuccess=function(g){var T=g.target.result;T==null?T={app:o,key:s,appkey:o+","+s,val:c}:T.val=c;var R=h.put(T);R.onerror=function(D){return function(le){typeof D=="function"?D({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(q.error))}}(u),R.onsuccess=function(D){return function(le){typeof D=="function"&&D({success:!0})}}(u)},q.onerror=function(g){return function(T){typeof g=="function"?g({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(q.error))}}(u)},m.prototype.deleteAppKey=function(o,s){var c=this.db.transaction(["LokiAKV"],"readwrite"),u=c.objectStore("LokiAKV"),b=u.delete(o);b.onsuccess=function(h){return function(w){typeof h=="function"&&h({success:!0})}}(s),b.onerror=function(h){return function(w){typeof h=="function"?h({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(b.error))}}(s)},m.prototype.getAppKeys=function(o,s){var c=this.db.transaction(["LokiAKV"],"readonly"),u=c.objectStore("LokiAKV"),b=u.index("app"),h=IDBKeyRange.only(o),w=b.openCursor(h),P=[];w.onsuccess=function(q,g){return function(T){var R=T.target.result;if(R){var D=R.value;q.push(D),R.continue()}else typeof g=="function"?g(q):console.log(q)}}(P,s),w.onerror=function(q){return function(g){typeof q=="function"?q(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(g))}}(s)},m.prototype.getAllKeys=function(o){var s=this.db.transaction(["LokiAKV"],"readonly"),c=s.objectStore("LokiAKV"),u=c.openCursor(),b=[];u.onsuccess=function(h,w){return function(P){var q=P.target.result;if(q){var g=q.value;h.push(g),q.continue()}else typeof w=="function"?w(h):console.log(h)}}(b,o),u.onerror=function(h){return function(w){typeof h=="function"&&h(null)}}(o)},f}()})})(cn);(function(i,d){(function(f,m){i.exports=m()})(He,function(){return function(){var f=Object.prototype.hasOwnProperty;function m(e){var t,n;if(Array.isArray(e)){for(n=0;n<e.length;n++)m(e[n]);o(e)}else if(e!==null&&typeof e=="object"){for(t in e)e.hasOwnProperty(t)&&m(e[t]);o(e)}}function o(e){Object.isFrozen(e)||Object.freeze(e)}function s(e){return Object.isFrozen(e)?K(e,"shallow"):e}var c={copyProperties:function(e,t){var n;for(n in e)t[n]=e[n]},resolveTransformObject:function(e,t,n){var r,a;if(typeof n!="number"&&(n=0),++n>=10)return e;for(r in e)typeof e[r]=="string"&&e[r].indexOf("[%lktxp]")===0?(a=e[r].substring(8),t.hasOwnProperty(a)&&(e[r]=t[a])):typeof e[r]=="object"&&(e[r]=c.resolveTransformObject(e[r],t,n));return e},resolveTransformParams:function(e,t){var n,r,a=[];if(typeof t=="undefined")return e;for(n=0;n<e.length;n++)r=K(e[n],"shallow-recurse-objects"),a.push(c.resolveTransformObject(r,t));return a},getIn:function(e,t,n){if(e!=null){if(!n)return e[t];if(typeof t=="string"&&(t=t.split(".")),!Array.isArray(t))throw new Error("path must be a string or array. Found "+typeof t);for(var r=0,a=t.length;e!=null&&r<a;)e=e[t[r++]];return r&&r==a?e:void 0}}},u={aeq:b,lt:h,gt:w};function b(e,t){var n,r,a,l;if(e===t)return!0;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:a=1;break;case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=e===e?9:0;break}switch(t){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=t===t?9:0;break}if(a!==9||l!==9)return a===l}return n=Number(e),r=Number(t),n===n||r===r?n===r:(n=e.toString(),r=t.toString(),n==r)}function h(e,t,n){var r,a,l,v;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=e===e?9:0;break}switch(t){case void 0:v=1;break;case null:v=1;break;case!1:v=3;break;case!0:v=4;break;case"":v=5;break;default:v=t===t?9:0;break}if(l!==9||v!==9)return l===v?n:l<v}return r=Number(e),a=Number(t),r===r&&a===a?r<a?!0:r>a?!1:n:r===r&&a!==a?!0:a===a&&r!==r?!1:e<t?!0:e>t?!1:e==t?n:(r=e.toString(),a=t.toString(),r<a?!0:r==a?n:!1)}function w(e,t,n){var r,a,l,v;if(!e||!t||e===!0||t===!0||e!==e||t!==t){switch(e){case void 0:l=1;break;case null:l=1;break;case!1:l=3;break;case!0:l=4;break;case"":l=5;break;default:l=e===e?9:0;break}switch(t){case void 0:v=1;break;case null:v=1;break;case!1:v=3;break;case!0:v=4;break;case"":v=5;break;default:v=t===t?9:0;break}if(l!==9||v!==9)return l===v?n:l>v}return r=Number(e),a=Number(t),r===r&&a===a?r>a?!0:r<a?!1:n:r===r&&a!==a?!1:a===a&&r!==r||e>t?!0:e<t?!1:e==t?n:(r=e.toString(),a=t.toString(),r>a?!0:r==a?n:!1)}function P(e,t,n){return u.aeq(e,t)?0:u.lt(e,t,!1)?n?1:-1:u.gt(e,t,!1)?n?-1:1:0}function q(e,t,n){for(var r=0,a,l,v,y,I,C=0,V=e.length;C<V;C++)if(a=e[C],l=a[0],~l.indexOf(".")?(I=l.split("."),v=c.getIn(t,I,!0),y=c.getIn(n,I,!0)):(v=t[l],y=n[l]),r=P(v,y,a[1]),r!==0)return r;return 0}function g(e,t,n,r,a,l){var v=l||0,y=t[v],I=!1,C;if(typeof e=="object"&&y in e&&(C=e[y]),v+1>=t.length)I=n(C,r,a);else if(Array.isArray(C))for(var V=0,F=C.length;V<F&&(I=g(C[V],t,n,r,a,v+1),I!==!0);V+=1);else I=g(C,t,n,r,a,v+1);return I}function T(e){return typeof e=="string"||Array.isArray(e)?function(t){return e.indexOf(t)!==-1}:typeof e=="object"&&e!==null?function(t){return f.call(e,t)}:null}function R(e,t,n){for(var r in t)if(f.call(t,r))return D[r](e,t[r],n);return!1}var D={$eq:function(e,t){return e===t},$aeq:function(e,t){return e==t},$ne:function(e,t){return t!==t?e===e:e!==t},$dteq:function(e,t){return u.aeq(e,t)},$gt:function(e,t){return u.gt(e,t,!1)},$gte:function(e,t){return u.gt(e,t,!0)},$lt:function(e,t){return u.lt(e,t,!1)},$lte:function(e,t){return u.lt(e,t,!0)},$jgt:function(e,t){return e>t},$jgte:function(e,t){return e>=t},$jlt:function(e,t){return e<t},$jlte:function(e,t){return e<=t},$between:function(e,t){return e==null?!1:u.gt(e,t[0],!0)&&u.lt(e,t[1],!0)},$jbetween:function(e,t){return e==null?!1:e>=t[0]&&e<=t[1]},$in:function(e,t){return t.indexOf(e)!==-1},$inSet:function(e,t){return t.has(e)},$nin:function(e,t){return t.indexOf(e)===-1},$keyin:function(e,t){return e in t},$nkeyin:function(e,t){return!(e in t)},$definedin:function(e,t){return t[e]!==void 0},$undefinedin:function(e,t){return t[e]===void 0},$regex:function(e,t){return t.test(e)},$containsString:function(e,t){return typeof e=="string"&&e.indexOf(t)!==-1},$containsNone:function(e,t){return!D.$containsAny(e,t)},$containsAny:function(e,t){var n=T(e);return n!==null?Array.isArray(t)?t.some(n):n(t):!1},$contains:function(e,t){var n=T(e);return n!==null?Array.isArray(t)?t.every(n):n(t):!1},$elemMatch:function(e,t){return Array.isArray(e)?e.some(function(n){return Object.keys(t).every(function(r){var a=t[r];return typeof a=="object"&&a||(a={$eq:a}),r.indexOf(".")!==-1?g(n,r.split("."),R,t[r],n):R(n[r],a,n)})}):!1},$type:function(e,t,n){var r=typeof e;return r==="object"&&(Array.isArray(e)?r="array":e instanceof Date&&(r="date")),typeof t!="object"?r===t:R(r,t,n)},$finite:function(e,t){return t===isFinite(e)},$size:function(e,t,n){return Array.isArray(e)?typeof t!="object"?e.length===t:R(e.length,t,n):!1},$len:function(e,t,n){return typeof e=="string"?typeof t!="object"?e.length===t:R(e.length,t,n):!1},$where:function(e,t){return t(e)===!0},$not:function(e,t,n){return!R(e,t,n)},$and:function(e,t,n){for(var r=0,a=t.length;r<a;r+=1)if(!R(e,t[r],n))return!1;return!0},$or:function(e,t,n){for(var r=0,a=t.length;r<a;r+=1)if(R(e,t[r],n))return!0;return!1},$exists:function(e,t){return t?e!==void 0:e===void 0}},le=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];le.forEach(function(e){var t=D[e];D["$"+e]=function(n,r,a){if(typeof r=="string")return t(n,a[r]);if(typeof r=="function")return t(n,r(a));throw new Error("Invalid argument to $$ matcher")}});var L={$eq:D.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function K(e,t){if(e==null)return null;var n=t||"parse-stringify",r;switch(n){case"parse-stringify":r=JSON.parse(JSON.stringify(e));break;case"jquery-extend-deep":r=jQuery.extend(!0,{},e);break;case"shallow":r=Object.create(e.constructor.prototype),Object.keys(e).map(function(l){r[l]=e[l]});break;case"shallow-assign":r=Object.create(e.constructor.prototype),Object.assign(r,e);break;case"shallow-recurse-objects":r=K(e,"shallow");var a=Object.keys(e);a.forEach(function(l){typeof e[l]=="object"&&e[l].constructor.name==="Object"?r[l]=K(e[l],"shallow-recurse-objects"):Array.isArray(e[l])&&(r[l]=H(e[l],"shallow-recurse-objects"))});break}return r}function H(e,t){if(t=="parse-stringify")return K(e,t);for(var n=[],r=0,a=e.length;r<a;r++)n[r]=K(e[r],t);return n}function E(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function G(){}G.prototype.events={},G.prototype.asyncListeners=!1,G.prototype.on=function(e,t){var n,r=this;return Array.isArray(e)?(e.forEach(function(a){r.on(a,t)}),t):(n=this.events[e],n||(n=this.events[e]=[]),n.push(t),t)},G.prototype.emit=function(e){var t=this,n;if(e&&this.events[e])this.events[e].length&&(n=Array.prototype.slice.call(arguments,1),this.events[e].forEach(function(r){t.asyncListeners?setTimeout(function(){r.apply(t,n)},1):r.apply(t,n)}));else throw new Error("No event "+e+" defined")},G.prototype.addListener=G.prototype.on,G.prototype.removeListener=function(e,t){var n=this;if(Array.isArray(e)){e.forEach(function(a){n.removeListener(a,t)});return}if(this.events[e]){var r=this.events[e];r.splice(r.indexOf(t),1)}};function A(e,t){this.filename=e||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=t&&t.hasOwnProperty("verbose")?t.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var n=function(){return typeof He!="undefined"&&(He.android||He.NSObject)?"NATIVESCRIPT":typeof window=="undefined"||typeof He!="undefined"&&He.window&&typeof process!="undefined"?"NODEJS":typeof document!="undefined"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};t&&t.hasOwnProperty("env")?this.ENV=t.env:this.ENV=n(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(t,!0),this.on("init",this.clearChanges)}A.prototype=new G,A.prototype.constructor=A,A.prototype.getIndexedAdapter=function(){var e;return typeof Yr=="function"&&(e=cn.exports),e},A.prototype.configureOptions=function(e,t){var n={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},r={fs:fe,localStorage:he,memory:oe};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof e!="undefined"){if(this.options=e,this.options.hasOwnProperty("persistenceMethod")&&typeof r[e.persistenceMethod]=="function"&&(this.persistenceMethod=e.persistenceMethod,this.persistenceAdapter=new r[e.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=e.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),e.autoload&&t){var a=this;setTimeout(function(){a.loadDatabase(e,e.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(e,e.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=n[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new r[this.persistenceMethod]))},A.prototype.copy=function(e){var t=new A(this.filename,{env:"NA"}),n,r;if(e=e||{},t.loadJSONObject(this,{retainDirtyFlags:!0}),e.hasOwnProperty("removeNonSerializable")&&e.removeNonSerializable===!0)for(t.autosaveHandle=null,t.persistenceAdapter=null,n=t.collections.length,r=0;r<n;r++)t.collections[r].constraints=null,t.collections[r].ttl=null;return t},A.prototype.addCollection=function(e,t){var n,r=this.collections.length;if(t&&t.disableMeta===!0){if(t.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(t.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof t.ttl=="number"&&t.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(n=0;n<r;n+=1)if(this.collections[n].name===e)return this.collections[n];var a=new k(e,t);return a.isIncremental=this.isIncremental,this.collections.push(a),this.verbose&&(a.lokiConsoleWrapper=console),a},A.prototype.loadCollection=function(e){if(!e.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(e)},A.prototype.getCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e)return this.collections[t];return this.emit("warning","collection "+e+" not found"),null},A.prototype.renameCollection=function(e,t){var n=this.getCollection(e);return n&&(n.name=t),n},A.prototype.listCollections=function(){for(var e=this.collections.length,t=[];e--;)t.push({name:this.collections[e].name,type:this.collections[e].objType,count:this.collections[e].data.length});return t},A.prototype.removeCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e){var r=new k(e,{}),a=this.collections[t];for(var l in a)a.hasOwnProperty(l)&&r.hasOwnProperty(l)&&(a[l]=r[l]);this.collections.splice(t,1);return}},A.prototype.getName=function(){return this.name},A.prototype.serializeReplacer=function(e,t){switch(e){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return t}},A.prototype.serialize=function(e){switch(e=e||{},e.hasOwnProperty("serializationMethod")||(e.serializationMethod=this.options.serializationMethod),e.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},A.prototype.toJson=A.prototype.serialize,A.prototype.serializeDestructured=function(e){var t,n,r,a,l=[],v;if(e=e||{},e.hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),e.partitioned===!0&&e.hasOwnProperty("partition")&&e.partition>=0)return this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:e.partition});for(v=new A(this.filename),v.loadJSONObject(this),t=0;t<v.collections.length;t++)v.collections[t].data=[];if(e.partitioned===!0&&e.partition===-1)return v.serialize({serializationMethod:"normal"});for(l.push(v.serialize({serializationMethod:"normal"})),v=null,t=0;t<this.collections.length;t++)if(r=this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:t}),e.partitioned===!1&&e.delimited===!1){if(!Array.isArray(r))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(a=r.length,n=0;n<a;n++)l.push(r[n]),r[n]=null;l.push("")}else l.push(r);return e.partitioned?(e.delimited,l):e.delimited?(l.push(""),l.join(e.delimiter)):(l.push(""),l)},A.prototype.serializeCollection=function(e){var t,n,r=[];if(e=e||{},e.hasOwnProperty("delimited")||(e.delimited=!0),!e.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(t=this.collections[e.collectionIndex].data.length,r=[],n=0;n<t;n++)r.push(JSON.stringify(this.collections[e.collectionIndex].data[n]));return e.delimited?(r.push(""),r.join(e.delimiter)):r},A.prototype.deserializeDestructured=function(e,t){var n=[],r,a,l=0,v,y=1,I=!1,C;if(t=t||{},t.hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.partitioned){if(t.hasOwnProperty("partition"))return t.partition===-1?(a=JSON.parse(e[0]),a):this.deserializeCollection(e[t.partition+1],t);for(a=JSON.parse(e[0]),v=a.collections.length,l=0;l<v;l++)a.collections[l].data=this.deserializeCollection(e[l+1],t);return a}if(t.delimited){if(n=e.split(t.delimiter),e=null,r=n.length,r===0)return null}else n=e;for(a=JSON.parse(n[0]),v=a.collections.length,n[0]=null;!I;)n[y]===""?++l>v&&(I=!0):(C=JSON.parse(n[y]),a.collections[l].data.push(C)),n[y++]=null;return a},A.prototype.deserializeCollection=function(e,t){var n=[],r,a;for(t=t||{},t.hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.delimited?(n=e.split(t.delimiter),n.pop()):n=e,a=n.length,r=0;r<a;r++)n[r]=JSON.parse(n[r]);return n},A.prototype.loadJSON=function(e,t){var n;if(e.length===0)n={};else switch(this.options.serializationMethod){case"normal":case"pretty":n=JSON.parse(e);break;case"destructured":n=this.deserializeDestructured(e);break;default:n=JSON.parse(e);break}this.loadJSONObject(n,t)},A.prototype.loadJSONObject=function(e,t){var n=0,r=e.collections?e.collections.length:0,a,l,v,y,I,C;this.name=e.name,e.hasOwnProperty("throttledSaves")&&t&&!t.hasOwnProperty("throttledSaves")&&(this.throttledSaves=e.throttledSaves),this.collections=[];function V(S){var N=t[S.name],re;return N.proto?(re=N.inflate||c.copyProperties,function(ve){var Z=new N.proto;return re(ve,Z),Z}):N.inflate}for(n;n<r;n+=1){if(a=e.collections[n],l=this.addCollection(a.name,{disableChangesApi:a.disableChangesApi,disableDeltaChangesApi:a.disableDeltaChangesApi,disableMeta:a.disableMeta,disableFreeze:a.hasOwnProperty("disableFreeze")?a.disableFreeze:!0}),l.adaptiveBinaryIndices=a.hasOwnProperty("adaptiveBinaryIndices")?a.adaptiveBinaryIndices===!0:!1,l.transactional=a.transactional,l.asyncListeners=a.asyncListeners,l.cloneObjects=a.cloneObjects,l.cloneMethod=a.cloneMethod||"parse-stringify",l.autoupdate=a.autoupdate,l.changes=a.changes,l.dirtyIds=a.dirtyIds||[],t&&t.retainDirtyFlags===!0?l.dirty=a.dirty:l.dirty=!1,v=a.data.length,y=0,t&&t.hasOwnProperty(a.name))for(I=V(a),y;y<v;y++)C=I(a.data[y]),l.data[y]=C,l.addAutoUpdateObserver(C),l.disableFreeze||m(l.data[y]);else for(y;y<v;y++)l.data[y]=a.data[y],l.addAutoUpdateObserver(l.data[y]),l.disableFreeze||m(l.data[y]);if(l.maxId=typeof a.maxId=="undefined"?0:a.maxId,typeof a.binaryIndices!="undefined"&&(l.binaryIndices=a.binaryIndices),typeof a.transforms!="undefined"&&(l.transforms=a.transforms),l.uniqueNames=[],a.hasOwnProperty("uniqueNames")&&(l.uniqueNames=a.uniqueNames),typeof a.DynamicViews!="undefined"){for(var F=0;F<a.DynamicViews.length;F++){var M=a.DynamicViews[F],$=l.addDynamicView(M.name,M.options);$.resultdata=M.resultdata,$.resultsdirty=M.resultsdirty,$.filterPipeline=M.filterPipeline,$.sortCriteriaSimple=M.sortCriteriaSimple,$.sortCriteria=M.sortCriteria,$.sortFunction=null,$.sortDirty=M.sortDirty,l.disableFreeze||(m($.filterPipeline),$.sortCriteriaSimple?m($.sortCriteriaSimple):$.sortCriteria&&m($.sortCriteria)),$.resultset.filteredrows=M.resultset.filteredrows,$.resultset.filterInitialized=M.resultset.filterInitialized,$.rematerialize({removeWhereFilters:!0})}e.databaseVersion<1.5&&(l.ensureAllIndexes(!0),l.dirty=!0)}}},A.prototype.close=function(e){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(e),e=void 0)),e&&this.on("close",e),this.emit("close")},A.prototype.generateChangesNotification=function(e){function t(a){return a.name}var n=[],r=e||this.collections.map(t);return this.collections.forEach(function(a){r.indexOf(t(a))!==-1&&(n=n.concat(a.getChanges()))}),n},A.prototype.serializeChanges=function(e){return JSON.stringify(this.generateChangesNotification(e))},A.prototype.clearChanges=function(){this.collections.forEach(function(e){e.flushChanges&&e.flushChanges()})};function oe(e){this.hashStore={},this.options=e||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}oe.prototype.loadDatabase=function(e,t){var n=this;this.options.asyncResponses?setTimeout(function(){n.hashStore.hasOwnProperty(e)?t(n.hashStore[e].value):t(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(e)?t(this.hashStore[e].value):t(null)},oe.prototype.saveDatabase=function(e,t,n){var r=this,a;this.options.asyncResponses?setTimeout(function(){a=r.hashStore.hasOwnProperty(e)?r.hashStore[e].savecount:0,r.hashStore[e]={savecount:a+1,lastsave:new Date,value:t},n()},this.options.asyncTimeout):(a=this.hashStore.hasOwnProperty(e)?this.hashStore[e].savecount:0,this.hashStore[e]={savecount:a+1,lastsave:new Date,value:t},n())},oe.prototype.deleteDatabase=function(e,t){this.hashStore.hasOwnProperty(e)&&delete this.hashStore[e],typeof t=="function"&&t()};function se(e,t){if(this.mode="reference",this.adapter=null,this.options=t||{},this.dbref=null,this.dbname="",this.pageIterator={},e){if(e.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=e}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}se.prototype.loadDatabase=function(e,t){var n=this;this.dbname=e,this.dbref=new A(e),this.adapter.loadDatabase(e,function(r){if(!r){t(r);return}typeof r!="string"&&t(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var a=JSON.parse(r);if(n.dbref.loadJSONObject(a),a=null,n.dbref.collections.length,n.dbref.collections.length===0){t(n.dbref);return}n.pageIterator={collection:0,pageIndex:0},n.loadNextPartition(0,function(){t(n.dbref)})})},se.prototype.loadNextPartition=function(e,t){var n=this.dbname+"."+e,r=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(t);return}this.adapter.loadDatabase(n,function(a){var l=r.dbref.deserializeCollection(a,{delimited:!0,collectionIndex:e});r.dbref.collections[e].data=l,++e<r.dbref.collections.length?r.loadNextPartition(e,t):t()})},se.prototype.loadNextPage=function(e){var t=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,n=this;this.adapter.loadDatabase(t,function(r){var a=r.split(n.options.delimiter);r="";var l=a.length,v,y=a[l-1]==="";for(y&&(a.pop(),l=a.length,a[l-1]===""&&l===1&&(a.pop(),l=a.length)),v=0;v<l;v++)n.dbref.collections[n.pageIterator.collection].data.push(JSON.parse(a[v])),a[v]=null;a=[],y?++n.pageIterator.collection<n.dbref.collections.length?n.loadNextPartition(n.pageIterator.collection,e):e():(n.pageIterator.pageIndex++,n.loadNextPage(e))})},se.prototype.exportDatabase=function(e,t,n){var r,a=t.collections.length;for(this.dbref=t,this.dbname=e,this.dirtyPartitions=[-1],r=0;r<a;r++)t.collections[r].dirty&&this.dirtyPartitions.push(r);this.saveNextPartition(function(l){n(l)})},se.prototype.saveNextPartition=function(e){var t=this,n=this.dirtyPartitions.shift(),r=this.dbname+(n===-1?"":"."+n);if(this.options.paging&&n!==-1){this.pageIterator={collection:n,docIndex:0,pageIndex:0},this.saveNextPage(function(l){t.dirtyPartitions.length===0?e(l):t.saveNextPartition(e)});return}var a=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:n});this.adapter.saveDatabase(r,a,function(l){if(l){e(l);return}t.dirtyPartitions.length===0?e(null):t.saveNextPartition(e)})},se.prototype.saveNextPage=function(e){var t=this,n=this.dbref.collections[this.pageIterator.collection],r=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,a=0,l=n.data.length,v=this.options.delimiter.length,y="",I="",C=!1,V=!1,F=function(M){I="",M&&e(M),C?e(null):(t.pageIterator.pageIndex++,t.saveNextPage(e))};for(n.data.length===0&&(C=!0);;)if(C||(y=JSON.stringify(n.data[this.pageIterator.docIndex]),I+=y,a+=y.length,++this.pageIterator.docIndex>=l&&(C=!0)),a>=this.options.pageSize&&(V=!0),(!V||C)&&(I+=this.options.delimiter,a+=v),C||V){this.adapter.saveDatabase(r,I,F);return}};function fe(){try{this.fs=require("fs")}catch{this.fs=null}}fe.prototype.loadDatabase=function(t,n){var r=this;this.fs.stat(t,function(a,l){!a&&l.isFile()?r.fs.readFile(t,{encoding:"utf8"},function(y,I){n(y?new Error(y):I)}):n(null)})},fe.prototype.saveDatabase=function(t,n,r){var a=this,l=t+"~";this.fs.writeFile(l,n,function(y){y?r(new Error(y)):a.fs.rename(l,t,r)})},fe.prototype.deleteDatabase=function(t,n){this.fs.unlink(t,function(a){a?n(new Error(a)):n()})};function he(){}he.prototype.loadDatabase=function(t,n){E()?n(localStorage.getItem(t)):n(new Error("localStorage is not available"))},he.prototype.saveDatabase=function(t,n,r){E()?(localStorage.setItem(t,n),r(null)):r(new Error("localStorage is not available"))},he.prototype.deleteDatabase=function(t,n){E()?(localStorage.removeItem(t),n(null)):n(new Error("localStorage is not available"))},A.prototype.throttledSaveDrain=function(e,t){var n=this,r=new Date().getTime();if(this.throttledSaves||e(!0),t=t||{},t.hasOwnProperty("recursiveWait")||(t.recursiveWait=!0),t.hasOwnProperty("recursiveWaitLimit")||(t.recursiveWaitLimit=!1),t.hasOwnProperty("recursiveWaitLimitDuration")||(t.recursiveWaitLimitDuration=2e3),t.hasOwnProperty("started")||(t.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(t.recursiveWait)this.throttledCallbacks.push(function(){if(n.throttledSavePending){if(t.recursiveWaitLimit&&r-t.started>t.recursiveWaitLimitDuration){e(!1);return}n.throttledSaveDrain(e,t);return}else{e(!0);return}});else{this.throttledCallbacks.push(e);return}else e(!0)},A.prototype.loadDatabaseInternal=function(e,t){var n=t||function(a,l){if(a)throw a},r=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(l){if(typeof l=="string"){var v=!1;try{r.loadJSON(l,e||{}),v=!0}catch(y){n(y)}v&&(n(null),r.emit("loaded","database "+r.filename+" loaded"))}else{if(!l){n(null),r.emit("loaded","empty database "+r.filename+" loaded");return}if(l instanceof Error){n(l);return}if(typeof l=="object"){r.loadJSONObject(l,e||{}),n(null),r.emit("loaded","database "+r.filename+" loaded");return}n("unexpected adapter response : "+l)}}):n(new Error("persistenceAdapter not configured"))},A.prototype.loadDatabase=function(e,t){var n=this;if(!this.throttledSaves){this.loadDatabaseInternal(e,t);return}this.throttledSaveDrain(function(r){if(r){n.throttledSavePending=!0,n.loadDatabaseInternal(e,function(a){n.throttledCallbacks.length===0?n.throttledSavePending=!1:n.saveDatabase(),typeof t=="function"&&t(a)});return}else typeof t=="function"&&t(new Error("Unable to pause save throttling long enough to read database"))},e)},A.prototype.saveDatabaseInternal=function(e){var t=e||function(a){if(a)throw a},n=this;if(!this.persistenceAdapter){t(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var r;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(n.ignoreAutosave=!1,r){t(new Error("adapter error - getLokiCopy called more than once"));return}var l=n.copy({removeNonSerializable:!0});return r=n.collections.map(function(v){return[v.dirty,v.dirtyIds]}),n.collections.forEach(function(v){v.dirty=!1,v.dirtyIds=[]}),l},function(l){n.ignoreAutosave=!1,l&&r&&n.collections.forEach(function(v,y){var I=r[y];v.dirty=v.dirty||I[0],v.dirtyIds=v.dirtyIds.concat(I[1])}),t(l)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(l){n.autosaveClearFlags(),t(l)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(l){t(l)}))},A.prototype.saveDatabase=function(e){if(!this.throttledSaves){this.saveDatabaseInternal(e);return}if(this.throttledSavePending){this.throttledCallbacks.push(e);return}var t=this.throttledCallbacks;this.throttledCallbacks=[],t.unshift(e),this.throttledSavePending=!0;var n=this;this.saveDatabaseInternal(function(r){n.throttledSavePending=!1,t.forEach(function(a){typeof a=="function"&&setTimeout(function(){a(r)},1)}),n.throttledCallbacks.length>0&&n.saveDatabase()})},A.prototype.save=A.prototype.saveDatabase,A.prototype.deleteDatabase=function(e,t){var n=t||function(r,a){if(r)throw r};typeof e=="function"&&!t&&(n=e),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(a){n(a)}):n(new Error("persistenceAdapter not configured"))},A.prototype.autosaveDirty=function(){for(var e=0;e<this.collections.length;e++)if(this.collections[e].dirty)return!0;return!1},A.prototype.autosaveClearFlags=function(){for(var e=0;e<this.collections.length;e++)this.collections[e].dirty=!1},A.prototype.autosaveEnable=function(e,t){this.autosave=!0;var n=5e3,r=this;typeof this.autosaveInterval!="undefined"&&this.autosaveInterval!==null&&(n=this.autosaveInterval),this.autosaveHandle=setInterval(function(){r.autosaveDirty()&&!r.ignoreAutosave&&r.saveDatabase(t)},n)},A.prototype.autosaveDisable=function(){typeof this.autosaveHandle!="undefined"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function j(e,t){return this.collection=e,this.filteredrows=[],this.filterInitialized=!1,this}j.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},j.prototype.toJSON=function(){var e=this.copy();return e.collection=null,e},j.prototype.limit=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=new j(this.collection);return t.filteredrows=this.filteredrows.slice(0,e),t.filterInitialized=!0,t},j.prototype.offset=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=new j(this.collection);return t.filteredrows=this.filteredrows.slice(e),t.filterInitialized=!0,t},j.prototype.copy=function(){var e=new j(this.collection);return this.filteredrows.length>0&&(e.filteredrows=this.filteredrows.slice()),e.filterInitialized=this.filterInitialized,e},j.prototype.branch=j.prototype.copy,j.prototype.transform=function(e,t){var n,r,a=this;if(typeof e=="string"&&this.collection.transforms.hasOwnProperty(e)&&(e=this.collection.transforms[e]),typeof e!="object"||!Array.isArray(e))throw new Error("Invalid transform");for(typeof t!="undefined"&&(e=c.resolveTransformParams(e,t)),n=0;n<e.length;n++)switch(r=e[n],r.type){case"find":a.find(r.value);break;case"where":a.where(r.value);break;case"simplesort":a.simplesort(r.property,r.desc||r.options);break;case"compoundsort":a.compoundsort(r.value);break;case"sort":a.sort(r.value);break;case"limit":a=a.limit(r.value);break;case"offset":a=a.offset(r.value);break;case"map":a=a.map(r.value,r.dataOptions);break;case"eqJoin":a=a.eqJoin(r.joinData,r.leftJoinKey,r.rightJoinKey,r.mapFun,r.dataOptions);break;case"mapReduce":a=a.mapReduce(r.mapFunction,r.reduceFunction);break;case"update":a.update(r.value);break;case"remove":a.remove();break}return a},j.prototype.sort=function(e){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var t=function(n,r){return function(a,l){return n(r[a],r[l])}}(e,this.collection.data);return this.filteredrows.sort(t),this},j.prototype.simplesort=function(e,t){var n,r=10,a=this.collection.data.length,l=this.filteredrows.length,v=this.collection.binaryIndices.hasOwnProperty(e);if((typeof t=="undefined"||t===!1)&&(t={desc:!1}),t===!0&&(t={desc:!0}),l===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(e))return this.collection.ensureIndex(e),this.filteredrows=this.collection.binaryIndices[e].values.slice(0),t.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!t.disableIndexIntersect&&v&&(n=a/l,t.useJavascriptSorting&&(r=6),n<=r||t.forceIndexIntersect)){var y,I=this.filteredrows,C={};for(y=0;y<l;y++)C[I[y]]=!0;var V=this.collection.binaryIndices[e].values;return this.filteredrows=V.filter(function(M){return C[M]}),t.desc&&this.filteredrows.reverse(),this}if(t.useJavascriptSorting)return this.sort(function(M,$){if(M[e]===$[e])return 0;if(M[e]>$[e])return 1;if(M[e]<$[e])return-1});var F=function(M,$,S){var N,re,ve;return function(Z,Pe){return~M.indexOf(".")?(ve=M.split("."),N=c.getIn(S[Z],ve,!0),re=c.getIn(S[Pe],ve,!0)):(N=S[Z][M],re=S[Pe][M]),P(N,re,$)}}(e,t.desc,this.collection.data);return this.filteredrows.sort(F),this},j.prototype.compoundsort=function(e){if(e.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var t;if(e.length===1)return t=e[0],Array.isArray(t)?this.simplesort(t[0],t[1]):this.simplesort(t,!1);for(var n=0,r=e.length;n<r;n+=1)t=e[n],Array.isArray(t)||(e[n]=[t,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var a=function(l,v){return function(y,I){return q(l,v[y],v[I])}}(e,this.collection.data);return this.filteredrows.sort(a),this},j.prototype.findOr=function(e){var t=null,n=0,r=0,a=[],l=[],v=0;this.count();for(var y=0,I=e.length;y<I;y++)for(t=this.branch().find(e[y]).filteredrows,r=t.length,n=0;n<r;n++)v=t[n],l[v]===void 0&&(l[v]=!0,a.push(v));return this.filteredrows=a,this.filterInitialized=!0,this},j.prototype.$or=j.prototype.findOr;function Se(e,t){if(e==="$regex")Array.isArray(t)?t=new RegExp(t[0],t[1]):t instanceof RegExp||(t=new RegExp(t));else if(typeof t=="object")for(var n in t)(n==="$regex"||typeof t[n]=="object")&&(t[n]=Se(n,t[n]));return t}j.prototype.findAnd=function(e){for(var t=0,n=e.length;t<n;t++){if(this.count()===0)return this;this.find(e[t])}return this},j.prototype.$and=j.prototype.findAnd,j.prototype.find=function(e,t){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var n=e||"getAll",r,a,l,v,y,I,C,V=!1,F=[],M=[],$=null;if(t=t||!1,typeof n=="object"){for(r in n)v={},v[r]=n[r],M.push(v),f.call(n,r)&&(a=r,l=n[r]);if(M.length>1)return this.find({$and:M},t)}if(!a||n==="getAll")return t&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(a==="$and"||a==="$or")return this[a](l),t&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(l===null||typeof l!="object"||l instanceof Date)y="$eq",I=l;else if(typeof l=="object"){for(C in l)if(f.call(l,C)){y=C,I=l[C];break}}else throw new Error("Do not know what you want to do.");(y==="$regex"||typeof I=="object")&&(I=Se(y,I));var S=a.indexOf(".")!==-1,N=!this.filterInitialized;N&&this.collection.binaryIndices[a]&&L[y]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(a),V=!0,$=this.collection.binaryIndices[a]),!V&&y==="$in"&&Array.isArray(I)&&typeof Set!="undefined"&&(I=new Set(I),y="$inSet");var re=D[y],ve=this.collection.data,Z=0,Pe=0,Le,Oe=0,be;if(this.filterInitialized){if(Le=this.filteredrows,Pe=Le.length,S){for(a=a.split("."),Z=0;Z<Pe;Z++)if(Oe=Le[Z],be=ve[Oe],g(be,a,re,I,be)&&(F.push(Oe),t))return this.filteredrows=F,this}else for(Z=0;Z<Pe;Z++)if(Oe=Le[Z],be=ve[Oe],re(be[a],I,be)&&(F.push(Oe),t))return this.filteredrows=F,this}else if(V){var Me=this.collection.calculateRange(y,a,I);if(y!=="$in"){for(Z=Me[0];Z<=Me[1];Z++)if(L[y]!==!0){if(L[y](c.getIn(ve[$.values[Z]],a,S),I)&&(F.push($.values[Z]),t))return this.filteredrows=F,this.filterInitialized=!0,this}else if(F.push($.values[Z]),t)return this.filteredrows=F,this.filterInitialized=!0,this}else for(Z=0,Pe=Me.length;Z<Pe;Z++)if(F.push($.values[Me[Z]]),t)return this.filteredrows=F,this.filterInitialized=!0,this}else if(Pe=ve.length,S){for(a=a.split("."),Z=0;Z<Pe;Z++)if(be=ve[Z],g(be,a,re,I,be)&&(F.push(Z),t))return this.filteredrows=F,this.filterInitialized=!0,this}else for(Z=0;Z<Pe;Z++)if(be=ve[Z],re(be[a],I,be)&&(F.push(Z),t))return this.filteredrows=F,this.filterInitialized=!0,this;return this.filteredrows=F,this.filterInitialized=!0,this},j.prototype.where=function(e){var t,n=[];if(typeof e=="function")t=e;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)t(this.collection.data[this.filteredrows[r]])===!0&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}else{for(var a=this.collection.data.length;a--;)t(this.collection.data[a])===!0&&n.push(a);return this.filteredrows=n,this.filterInitialized=!0,this}}catch(l){throw l}},j.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},j.prototype.data=function(e){var t=[],n=this.collection.data,r,a,l,v;if(e=e||{},e.removeMeta&&!e.forceClones&&(e.forceClones=!0,e.forceCloneMethod=e.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(e.forceClones=!0,e.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||e.forceClones){for(a=n.length,v=e.forceCloneMethod||this.collection.cloneMethod,l=0;l<a;l++)r=K(n[l],v),e.removeMeta&&(delete r.$loki,delete r.meta),t.push(r);return t}else return n.slice();else this.filterInitialized=!0;var y=this.filteredrows;if(a=y.length,this.collection.cloneObjects||e.forceClones)for(v=e.forceCloneMethod||this.collection.cloneMethod,l=0;l<a;l++)r=K(n[y[l]],v),e.removeMeta&&(delete r.$loki,delete r.meta),t.push(r);else for(l=0;l<a;l++)t.push(n[y[l]]);return t},j.prototype.update=function(e){if(typeof e!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var t,n=this.filteredrows.length,r=this.collection.data,a=0;a<n;a++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(t=K(r[this.filteredrows[a]],this.collection.cloneMethod),e(t),this.collection.update(t)):(e(r[this.filteredrows[a]]),this.collection.update(r[this.filteredrows[a]]));return this},j.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},j.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(n){throw n}},j.prototype.eqJoin=function(e,t,n,r,a){var l=[],v,y=[],I,C,V=[],F=typeof t=="function",M=typeof n=="function",$={};if(l=this.data(a),v=l.length,e instanceof k)y=e.chain().data(a);else if(e instanceof j)y=e.data(a);else if(Array.isArray(e))y=e;else throw new TypeError("joinData needs to be an array or result set");I=y.length;for(var S=0;S<I;S++)C=M?n(y[S]):y[S][n],$[C]=y[S];r||(r=function(re,ve){return{left:re,right:ve}});for(var N=0;N<v;N++)C=F?t(l[N]):l[N][t],V.push(r(l[N],$[C]||{}));return this.collection=new k("joinData"),this.collection.insert(V),this.filteredrows=[],this.filterInitialized=!1,this},j.prototype.map=function(e,t){var n=this.data(t).map(e);return this.collection=new k("mappedData"),this.collection.insert(n),this.filteredrows=[],this.filterInitialized=!1,this};function U(e,t,n){this.collection=e,this.name=t,this.rebuildPending=!1,this.options=n||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new j(e),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}U.prototype=new G,U.prototype.constructor=U,U.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},U.prototype.rematerialize=function(e){var t,n,r;e=e||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new j(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var a=Object.isFrozen(this.filterPipeline);if(e.hasOwnProperty("removeWhereFilters"))for(a&&(this.filterPipeline=this.filterPipeline.slice()),t=this.filterPipeline.length,n=t;n--;)this.filterPipeline[n].type==="where"&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var l=this.filterPipeline;for(this.filterPipeline=[],t=l.length,r=0;r<t;r++)this.applyFind(l[r].val,l[r].uid);return a&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},U.prototype.branchResultset=function(e,t){var n=this.resultset.branch();return typeof e=="undefined"?n:n.transform(e,t)},U.prototype.toJSON=function(){var e=new U(this.collection,this.name,this.options);return e.resultset=this.resultset,e.resultdata=[],e.resultsdirty=!0,e.filterPipeline=this.filterPipeline,e.sortFunction=this.sortFunction,e.sortCriteria=this.sortCriteria,e.sortCriteriaSimple=this.sortCriteriaSimple||null,e.sortDirty=this.sortDirty,e.collection=null,e},U.prototype.removeFilters=function(e){e=e||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var t=Object.isFrozen(this.filterPipeline),n=this.filterPipeline.length>0;this.filterPipeline=[],t&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,e.queueSortPhase===!0&&this.queueSortPhase(),n&&this.emit("filter")},U.prototype.applySort=function(e){return this.sortFunction=e,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.applySimpleSort=function(e,t){return this.sortCriteriaSimple={propname:e,options:t||!1},this.collection.disableFreeze||m(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.applySortCriteria=function(e){return this.sortCriteria=e,this.collection.disableFreeze||m(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},U.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},U.prototype.commit=function(){return this.cachedresultset=null,this},U.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},U.prototype._indexOfFilterWithId=function(e){if(typeof e=="string"||typeof e=="number"){for(var t=0,n=this.filterPipeline.length;t<n;t+=1)if(e===this.filterPipeline[t].uid)return t}return-1},U.prototype._addFilter=function(e){var t=Object.isFrozen(this.filterPipeline);t&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||m(e),this.filterPipeline.push(e),t&&Object.freeze(this.filterPipeline),this.resultset[e.type](e.val)},U.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var e=this.filterPipeline,t=Object.isFrozen(e);this.filterPipeline=[];for(var n=0,r=e.length;n<r;n+=1)this._addFilter(e[n]);return t&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},U.prototype.applyFilter=function(e){var t=this._indexOfFilterWithId(e.uid);if(t>=0){var n=Object.isFrozen(this.filterPipeline);return n&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[t]=e,n&&(o(e),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(e),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},U.prototype.applyFind=function(e,t){return this.applyFilter({type:"find",val:e,uid:t}),this},U.prototype.applyWhere=function(e,t){return this.applyFilter({type:"where",val:e,uid:t}),this},U.prototype.removeFilter=function(e){var t=this._indexOfFilterWithId(e);if(t<0)throw new Error("Dynamic view does not contain a filter with ID: "+e);var n=Object.isFrozen(this.filterPipeline);return n&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(t,1),n&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},U.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},U.prototype.data=function(e){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(e)},U.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var e=this;setTimeout(function(){e.rebuildPending&&(e.rebuildPending=!1,e.emit("rebuild",e))},this.options.minRebuildInterval)}},U.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var e=this;this.options.sortPriority==="active"?setTimeout(function(){e.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},U.prototype.performSortPhase=function(e){!this.sortDirty&&!this.resultsdirty||(e=e||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),e.suppressRebuildEvent||this.emit("rebuild",this))},U.prototype.evaluateDocument=function(e,t){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var n=this.resultset.filteredrows,r=t?-1:n.indexOf(+e),a=n.length,l=new j(this.collection);l.filteredrows=[e],l.filterInitialized=!0;for(var v,y=0,I=this.filterPipeline.length;y<I;y++)v=this.filterPipeline[y],l[v.type](v.val);var C=l.filteredrows.length===0?-1:0;if(!(r===-1&&C===-1)){if(r===-1&&C!==-1){n.push(e),this.options.persistent&&this.resultdata.push(this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(r!==-1&&C===-1){r<a-1?(n.splice(r,1),this.options.persistent&&this.resultdata.splice(r,1)):(n.length=a-1,this.options.persistent&&(this.resultdata.length=a-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(r!==-1&&C!==-1){this.options.persistent&&(this.resultdata[r]=this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},U.prototype.removeDocument=function(e){var t,n,r,a={},l={},v=[],y=this.resultset,I=this.resultset.filteredrows,C=I.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray(e)||(e=[e]),r=e.length,n=0;n<r;n++)a[e[n]]=!0;for(t=0;t<C;t++)a[I[t]]&&(l[t]=!0);Object.keys(l).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(F,M){return!l[M]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(F,M){return!l[M]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var V=function(F){return function(M){return M<y.filteredrows[F]}};for(C=y.filteredrows.length,t=0;t<C;t++)v=e.filter(V(t)),y.filteredrows[t]-=v.length},U.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(n){throw n}};function k(e,t){this.name=e,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=e,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var n=this;t=t||{},t.hasOwnProperty("unique")&&(Array.isArray(t.unique)||(t.unique=[t.unique]),t.unique.forEach(function(C){n.uniqueNames.push(C)})),t.hasOwnProperty("exact")&&t.exact.forEach(function(C){n.constraints.exact[C]=new J(C)}),this.adaptiveBinaryIndices=t.hasOwnProperty("adaptiveBinaryIndices")?t.adaptiveBinaryIndices:!0,this.transactional=t.hasOwnProperty("transactional")?t.transactional:!1,this.cloneObjects=t.hasOwnProperty("clone")?t.clone:!1,this.cloneMethod=t.hasOwnProperty("cloneMethod")?t.cloneMethod:"parse-stringify",this.asyncListeners=t.hasOwnProperty("asyncListeners")?t.asyncListeners:!1,this.disableMeta=t.hasOwnProperty("disableMeta")?t.disableMeta:!1,this.disableChangesApi=t.hasOwnProperty("disableChangesApi")?t.disableChangesApi:!0,this.disableDeltaChangesApi=t.hasOwnProperty("disableDeltaChangesApi")?t.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=t.hasOwnProperty("autoupdate")?t.autoupdate:!1,this.serializableIndices=t.hasOwnProperty("serializableIndices")?t.serializableIndices:!0,this.disableFreeze=t.hasOwnProperty("disableFreeze")?t.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(t.ttl||-1,t.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var r=[];if(t&&t.indices)if(Object.prototype.toString.call(t.indices)==="[object Array]")r=t.indices;else if(typeof t.indices=="string")r=[t.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var a=0;a<r.length;a++)this.ensureIndex(r[a]);function l(C){var V=typeof Set=="function"?new Set:[];V.add||(V.add=function(F){return this.indexOf(F)===-1&&this.push(F),this}),C.forEach(function(F){V.add(F.object)}),V.forEach(function(F){if(!f.call(F,"$loki"))return n.removeAutoUpdateObserver(F);try{n.update(F)}catch{}})}this.observerCallback=l;function v(C,V){return V?y(V,C):JSON.parse(JSON.stringify(C))}this.getChangeDelta=v;function y(C,V){var F=V!==null&&typeof V=="object"?Object.keys(V):null;if(F&&F.length&&["string","boolean","number"].indexOf(typeof V)<0){for(var M={},$=0;$<F.length;$++){var S=F[$];if(V.hasOwnProperty(S))if(!C.hasOwnProperty(S)||n.uniqueNames.indexOf(S)>=0||S=="$loki"||S=="meta")M[S]=V[S];else{var N=y(C[S],V[S]);typeof N!="undefined"&&N!={}&&(M[S]=N)}}return Object.keys(M).length===0?void 0:M}else return C===V?void 0:V}this.getObjectDelta=y;function I(){n.changes=[]}this.getChanges=function(){return n.changes},this.flushChanges=I,this.setChangesApi=function(C){n.disableChangesApi=!C,C||(n.disableDeltaChangesApi=!1)},this.on("delete",function(V){n.disableChangesApi||n.createChange(n.name,"R",V)}),this.on("warning",function(C){n.lokiConsoleWrapper.warn(C)}),I()}k.prototype=new G,k.prototype.contructor=k,k.prototype.createChange=function(e,t,n,r){this.changes.push({name:e,operation:t,obj:t=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(n,r):JSON.parse(JSON.stringify(n))})},k.prototype.insertMeta=function(e){var t,n;if(!(this.disableMeta||!e)){if(Array.isArray(e)){for(t=e.length,n=0;n<t;n++)e[n].hasOwnProperty("meta")||(e[n].meta={}),e[n].meta.created=new Date().getTime(),e[n].meta.revision=0;return}e.meta||(e.meta={}),e.meta.created=new Date().getTime(),e.meta.revision=0}},k.prototype.updateMeta=function(e){return this.disableMeta||!e||(this.disableFreeze||(e=s(e),e.meta=s(e.meta)),e.meta.updated=new Date().getTime(),e.meta.revision+=1),e},k.prototype.createInsertChange=function(e){this.createChange(this.name,"I",e)},k.prototype.createUpdateChange=function(e,t){this.createChange(this.name,"U",e,t)},k.prototype.insertMetaWithChange=function(e){this.insertMeta(e),this.createInsertChange(e)},k.prototype.updateMetaWithChange=function(e,t,n){return e=this.updateMeta(e,n),this.createUpdateChange(e,t),e},k.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},k.prototype.addAutoUpdateObserver=function(e){!this.autoupdate||typeof Object.observe!="function"||Object.observe(e,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},k.prototype.removeAutoUpdateObserver=function(e){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve(e,this.observerCallback)},k.prototype.addTransform=function(e,t){if(this.transforms.hasOwnProperty(e))throw new Error("a transform by that name already exists");this.transforms[e]=t},k.prototype.getTransform=function(e){return this.transforms[e]},k.prototype.setTransform=function(e,t){this.transforms[e]=t},k.prototype.removeTransform=function(e){delete this.transforms[e]},k.prototype.byExample=function(e){var t,n,r;r=[];for(t in e)!e.hasOwnProperty(t)||r.push((n={},n[t]=e[t],n));return{$and:r}},k.prototype.findObject=function(e){return this.findOne(this.byExample(e))},k.prototype.findObjects=function(e){return this.find(this.byExample(e))},k.prototype.ttlDaemonFuncGen=function(){var e=this,t=this.ttl.age;return function(){var r=Date.now(),a=e.chain().where(function(v){var y=v.meta.updated||v.meta.created,I=r-y;return t<I});a.remove()}},k.prototype.setTTL=function(e,t){e<0?clearInterval(this.ttl.daemon):(this.ttl.age=e,this.ttl.ttlInterval=t,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),t))},k.prototype.prepareFullDocIndex=function(){for(var e=this.data.length,t=new Array(e),n=0;n<e;n+=1)t[n]=n;return t},k.prototype.configureOptions=function(e){e=e||{},e.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=e.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},k.prototype.ensureIndex=function(e,t){if(typeof t=="undefined"&&(t=!1),e==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[e]&&!t&&!this.binaryIndices[e].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty(e)&&!t)){var n={name:e,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[e]=n;var r=function(a,l){var v,y,I=~a.indexOf(".")?a.split("."):!1;return function(C,V){if(I?(v=c.getIn(l[C],I,!0),y=c.getIn(l[V],I,!0)):(v=l[C][a],y=l[V][a]),v!==y){if(u.lt(v,y,!1))return-1;if(u.gt(v,y,!1))return 1}return 0}}(e,this.data);n.values.sort(r),n.dirty=!1,this.dirty=!0}},k.prototype.checkAllIndexes=function(e){var t,n=this.binaryIndices,r=[],a;for(t in n)f.call(n,t)&&(a=this.checkIndex(t,e),a||r.push(t));return r},k.prototype.checkIndex=function(e,t){t=t||{},t.randomSamplingFactor&&t.randomSampling!==!1&&(t.randomSampling=!0),t.randomSamplingFactor=t.randomSamplingFactor||.1,(t.randomSamplingFactor<0||t.randomSamplingFactor>1)&&(t.randomSamplingFactor=.1);var n=!0,r,a,l,v,y;if(!this.binaryIndices.hasOwnProperty(e))throw new Error("called checkIndex on property without an index: "+e);if(this.adaptiveBinaryIndices||this.ensureIndex(e),y=this.binaryIndices[e].values,v=y.length,v!==this.data.length)return t.repair&&this.ensureIndex(e,!0),!1;if(v===0)return!0;var I=e.indexOf(".")!==-1;if(v===1)n=y[0]===0;else if(t.randomSampling){if(D.$lte(c.getIn(this.data[y[0]],e,I),c.getIn(this.data[y[1]],e,I))||(n=!1),D.$lte(c.getIn(this.data[y[v-2]],e,I),c.getIn(this.data[y[v-1]],e,I))||(n=!1),n){for(a=Math.floor((v-1)*t.randomSamplingFactor),r=0;r<a-1;r++)if(l=Math.floor(Math.random()*(v-1)),!D.$lte(c.getIn(this.data[y[l]],e,I),c.getIn(this.data[y[l+1]],e,I))){n=!1;break}}}else for(r=0;r<v-1;r++)if(!D.$lte(c.getIn(this.data[y[r]],e,I),c.getIn(this.data[y[r+1]],e,I))){n=!1;break}return!n&&t.repair&&this.ensureIndex(e,!0),n},k.prototype.getBinaryIndexValues=function(e){var t,n=this.binaryIndices[e].values,r=[];for(t=0;t<n.length;t++)r.push(c.getIn(this.data[n[t]],e,!0));return r},k.prototype.getUniqueIndex=function(e,t){var n=this.constraints.unique[e];return!n&&t?this.ensureUniqueIndex(e):n},k.prototype.ensureUniqueIndex=function(e){var t=this.constraints.unique[e];return t||this.uniqueNames.indexOf(e)==-1&&this.uniqueNames.push(e),this.constraints.unique[e]=t=new Q(e),this.data.forEach(function(n){t.set(n)}),t},k.prototype.ensureAllIndexes=function(e){var t,n=this.binaryIndices;for(t in n)f.call(n,t)&&this.ensureIndex(t,e)},k.prototype.flagBinaryIndexesDirty=function(){var e,t=this.binaryIndices;for(e in t)f.call(t,e)&&(t[e].dirty=!0)},k.prototype.flagBinaryIndexDirty=function(e){this.binaryIndices[e]&&(this.binaryIndices[e].dirty=!0)},k.prototype.count=function(e){return e?this.chain().find(e).filteredrows.length:this.data.length},k.prototype.ensureId=function(){if(!this.idIndex){var e=this.data,t=0,n=e.length,r=new Array(n);for(t;t<n;t++)r[t]=e[t].$loki;this.idIndex=r}},k.prototype.ensureIdAsync=function(e){this.async(function(){this.ensureId()},e)},k.prototype.addDynamicView=function(e,t){var n=new U(this,e,t);return this.DynamicViews.push(n),n},k.prototype.removeDynamicView=function(e){this.DynamicViews=this.DynamicViews.filter(function(t){return t.name!==e})},k.prototype.getDynamicView=function(e){for(var t=0;t<this.DynamicViews.length;t++)if(this.DynamicViews[t].name===e)return this.DynamicViews[t];return null},k.prototype.findAndUpdate=function(e,t){typeof e=="function"?this.updateWhere(e,t):this.chain().find(e).update(t)},k.prototype.findAndRemove=function(e){this.chain().find(e).remove()},k.prototype.insert=function(e,t){if(!Array.isArray(e))return this.insertOne(e);var n,r=[],a=t&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;a&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",e);for(var l=0,v=e.length;l<v;l++){if(n=this.insertOne(e[l],!0),!n)return;r.push(n)}}finally{a&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",r),r=this.cloneObjects?K(r,this.cloneMethod):r,r.length===1?r[0]:r},k.prototype.insertOne=function(e,t){var n=null,r;if(typeof e!="object"?n=new TypeError("Document needs to be an object"):e===null&&(n=new TypeError("Object cannot be null")),n!==null)throw this.emit("error",n),n;var a=this.cloneObjects?K(e,this.cloneMethod):e;if(this.disableFreeze||(a=s(a)),this.disableMeta||(typeof a.meta=="undefined"?a.meta={revision:0,created:0}:this.disableFreeze||(a.meta=s(a.meta))),t||this.emit("pre-insert",a),!!this.add(a))return this.disableChangesApi?this.insertMeta(a):this.insertMetaWithChange(a),this.disableFreeze||m(a),r=this.cloneObjects?K(a,this.cloneMethod):a,t||this.emit("insert",r),this.addAutoUpdateObserver(r),r},k.prototype.clear=function(e){var t=this;if(e=e||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},e.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var n=Object.keys(this.binaryIndices);n.forEach(function(r){t.binaryIndices[r].dirty=!1,t.binaryIndices[r].values=[]})}},k.prototype.update=function(e){var t,n,r;if(Array.isArray(e)){r=e.length,t=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,t&&(this.adaptiveBinaryIndices=!1);try{for(n=0;n<r;n+=1)this.update(e[n])}finally{t&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!f.call(e,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var a=this.get(e.$loki,!0),l,v,y,I=this;if(!a)throw new Error("Trying to update a document not in collection.");l=a[0],y=a[1],v=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?K(e,this.cloneMethod):e,this.emit("pre-update",e),this.uniqueNames.forEach(function($){I.getUniqueIndex($,!0).update(l,v)}),this.data[y]=v,v!==e&&this.addAutoUpdateObserver(e);for(var C=0;C<this.DynamicViews.length;C++)this.DynamicViews[C].evaluateDocument(y,!1);var V;if(this.adaptiveBinaryIndices){var F=this.binaryIndices;for(V in F)this.adaptiveBinaryIndexUpdate(y,V)}else this.flagBinaryIndexesDirty();this.idIndex[y]=v.$loki,this.isIncremental&&this.dirtyIds.push(v.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?v=this.updateMeta(v):v=this.updateMetaWithChange(v,l),this.disableFreeze||m(v);var M;return this.cloneObjects?M=K(v,this.cloneMethod):M=v,this.emit("update",M,l),M}catch($){throw this.rollback(),this.lokiConsoleWrapper.error($.message),this.emit("error",$),$}},k.prototype.add=function(e){if(typeof e!="object")throw new TypeError("Object being added needs to be an object");if(typeof e.$loki!="undefined")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var t=this.maxId;e.$loki=t,this.disableMeta||(e.meta.version=0);for(var n=0,r=this.uniqueNames.length;n<r;n++)this.getUniqueIndex(this.uniqueNames[n],!0).set(e);this.idIndex&&this.idIndex.push(t),this.isIncremental&&this.dirtyIds.push(t),this.data.push(e);var a=this.data.length-1,l=this.DynamicViews.length;for(n=0;n<l;n++)this.DynamicViews[n].evaluateDocument(a,!0);if(this.adaptiveBinaryIndices){var v=this.binaryIndices;for(var y in v)this.adaptiveBinaryIndexInsert(a,y)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?K(e,this.cloneMethod):e}catch(I){throw this.rollback(),this.lokiConsoleWrapper.error(I.message),this.emit("error",I),I}},k.prototype.updateWhere=function(e,t){var n=this.where(e),r=0,a;try{for(r;r<n.length;r++)a=t(n[r]),this.update(a)}catch(l){this.rollback(),this.lokiConsoleWrapper.error(l.message)}},k.prototype.removeWhere=function(e){var t;typeof e=="function"?(t=this.data.filter(e),this.remove(t)):this.chain().find(e).remove()},k.prototype.removeDataOnly=function(){this.remove(this.data.slice())},k.prototype.removeBatchByPositions=function(e){var t=e.length,n={},r,a,l,v=Object.keys(this.binaryIndices).length,y=Object.keys(this.constraints.unique).length,I=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,C,V=this;try{for(this.startTransaction(),this.ensureId(),l=0;l<t;l++)n[this.idIndex[e[l]]]=!0;if(r=this.DynamicViews.length,r>0||v>0||y>0){if(r>0)for(a=0;a<r;a++)this.DynamicViews[a].removeDocument(e);if(this.adaptiveBinaryIndices&&!I){var F,M=this.binaryIndices;for(F in M)this.adaptiveBinaryIndexRemove(e,F)}else this.flagBinaryIndexesDirty();y&&this.uniqueNames.forEach(function($){var S=V.getUniqueIndex($);if(S)for(l=0;l<t;l++)C=V.data[e[l]],C[$]!==null&&C[$]!==void 0&&S.remove(C[$])})}if(!this.disableChangesApi||this.events.delete.length>1)for(l=0;l<t;l++)this.emit("delete",this.data[e[l]]);if(this.data=this.data.filter(function($){return!n[$.$loki]}),this.isIncremental)for(l=0;l<t;l++)this.dirtyIds.push(this.idIndex[e[l]]);this.idIndex=this.idIndex.filter(function($){return!n[$]}),this.adaptiveBinaryIndices&&I&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch($){return this.rollback(),I&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error($.message),this.emit("error",$),null}},k.prototype.removeBatch=function(e){var t=e.length,n=this.data.length,r,a={},l=[];for(r=0;r<n;r++)a[this.data[r].$loki]=r;for(r=0;r<t;r++)typeof e[r]=="object"?l.push(a[e[r].$loki]):l.push(a[e[r]]);this.removeBatchByPositions(l)},k.prototype.remove=function(e){if(typeof e=="number"&&(e=this.get(e)),typeof e!="object")throw new Error("Parameter is not an object");if(Array.isArray(e)){this.removeBatch(e);return}if(!f.call(e,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var t=this.get(e.$loki,!0),n=t[1],r=this;this.uniqueNames.forEach(function(y){if(e[y]!==null&&typeof e[y]!="undefined"){var I=r.getUniqueIndex(y);I&&I.remove(e[y])}});for(var a=0;a<this.DynamicViews.length;a++)this.DynamicViews[a].removeDocument(n);if(this.adaptiveBinaryIndices){var l,v=this.binaryIndices;for(l in v)this.adaptiveBinaryIndexRemove(n,l)}else this.flagBinaryIndexesDirty();return this.data.splice(n,1),this.removeAutoUpdateObserver(e),this.idIndex.splice(n,1),this.isIncremental&&this.dirtyIds.push(e.$loki),this.commit(),this.dirty=!0,this.emit("delete",t[0]),this.disableFreeze||(e=s(e)),delete e.$loki,delete e.meta,this.disableFreeze||o(e),e}catch(y){return this.rollback(),this.lokiConsoleWrapper.error(y.message),this.emit("error",y),null}},k.prototype.get=function(e,t){this.idIndex||this.ensureId();var n=t||!1,r=this.idIndex,a=r.length-1,l=0,v=l+a>>1;if(e=typeof e=="number"?e:parseInt(e,10),isNaN(e))throw new TypeError("Passed id is not an integer");for(;r[l]<r[a];)v=l+a>>1,r[v]<e?l=v+1:a=v;return a===l&&r[l]===e?n?[this.data[l],l]:this.data[l]:null},k.prototype.getBinaryIndexPosition=function(e,t){var n=c.getIn(this.data[e],t,!0),r=this.binaryIndices[t].values,a=this.calculateRange("$eq",t,n);if(a[0]===0&&a[1]===-1)return null;for(var l=a[0],v=a[1],y=l;y<=v;y++)if(r[y]===e)return y;return null},k.prototype.adaptiveBinaryIndexInsert=function(e,t){var n=t.indexOf(".")!==-1,r=this.binaryIndices[t].values,a=c.getIn(this.data[e],t,n);this.serializableIndices===!0&&a instanceof Date&&(this.data[e][t]=a.getTime(),a=c.getIn(this.data[e],t));var l=r.length===0?0:this.calculateRangeStart(t,a,!0,n);this.binaryIndices[t].values.splice(l,0,e)},k.prototype.adaptiveBinaryIndexUpdate=function(e,t){var n,r=this.binaryIndices[t].values,a=r.length;for(n=0;n<a&&r[n]!==e;n++);this.binaryIndices[t].values.splice(n,1),this.adaptiveBinaryIndexInsert(e,t)},k.prototype.adaptiveBinaryIndexRemove=function(e,t,n){var r=this.binaryIndices[t],a,l,v,y,I={},C,V,F;if(Array.isArray(e))if(y=e.length,y===1)e=e[0];else{for(v=0;v<y;v++)I[e[v]]=!0;if(r.values=r.values.filter(function($){return!I[$]}),n===!0)return;var M=e.slice();for(M.sort(function($,S){return $-S}),a=r.values.length,l=0;l<a;l++){for(C=r.values[l],V=0,v=0;v<y&&C>M[v];v++)V++;r.values[l]-=V}return}if(F=this.getBinaryIndexPosition(e,t),F===null)return null;if(r.values.splice(F,1),n!==!0)for(a=r.values.length,l=0;l<a;l++)r.values[l]>e&&r.values[l]--},k.prototype.calculateRangeStart=function(e,t,n,r){var a=this.data,l=this.binaryIndices[e].values,v=0,y=l.length-1,I=0;if(l.length===0)return-1;for(c.getIn(a[l[v]],e,r),c.getIn(a[l[y]],e,r);v<y;)I=v+y>>1,u.lt(c.getIn(a[l[I]],e,r),t,!1)?v=I+1:y=I;var C=v;return u.aeq(t,c.getIn(a[l[C]],e,r))?C:u.lt(t,c.getIn(a[l[C]],e,r),!1)?n?C:C-1:n?C+1:C},k.prototype.calculateRangeEnd=function(e,t,n){var r=this.data,a=this.binaryIndices[e].values,l=0,v=a.length-1,y=0;if(a.length===0)return-1;for(c.getIn(r[a[l]],e,n),c.getIn(r[a[v]],e,n);l<v;)y=l+v>>1,u.lt(t,c.getIn(r[a[y]],e,n),!1)?v=y:l=y+1;var I=v;return u.aeq(t,c.getIn(r[a[I]],e,n))?I:u.gt(t,c.getIn(r[a[I]],e,n),!1)?I+1:u.aeq(t,c.getIn(r[a[I-1]],e,n))?I-1:I},k.prototype.calculateRange=function(e,t,n){var r=this.data,a=this.binaryIndices[t].values,l=0,v=a.length-1,y,I,C;if(r.length===0)return[0,-1];var V=t.indexOf(".")!==-1,F=c.getIn(r[a[l]],t,V),M=c.getIn(r[a[v]],t,V);switch(e){case"$eq":case"$aeq":if(u.lt(n,F,!1)||u.gt(n,M,!1))return[0,-1];break;case"$dteq":if(u.lt(n,F,!1)||u.gt(n,M,!1))return[0,-1];break;case"$gt":if(u.gt(n,M,!0))return[0,-1];if(u.gt(F,n,!1))return[l,v];break;case"$gte":if(u.gt(n,M,!1))return[0,-1];if(u.gt(F,n,!0))return[l,v];break;case"$lt":if(u.lt(n,F,!0))return[0,-1];if(u.lt(M,n,!1))return[l,v];break;case"$lte":if(u.lt(n,F,!1))return[0,-1];if(u.lt(M,n,!0))return[l,v];break;case"$between":return u.gt(n[0],M,!1)?[0,-1]:u.lt(n[1],F,!1)?[0,-1]:(y=this.calculateRangeStart(t,n[0],!1,V),C=this.calculateRangeEnd(t,n[1],V),y<0&&y++,C>v&&C--,u.gt(c.getIn(r[a[y]],t,V),n[0],!0)||y++,u.lt(c.getIn(r[a[C]],t,V),n[1],!0)||C--,C<y?[0,-1]:[y,C]);case"$in":for(var $=[],S=[],N=0,re=n.length;N<re;N++)for(var ve=this.calculateRange("$eq",t,n[N]),Z=ve[0];Z<=ve[1];Z++)$[Z]===void 0&&($[Z]=!0,S.push(Z));return S}switch(e){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":y=this.calculateRangeStart(t,n,!1,V),I=c.getIn(r[a[y]],t,V);break}switch(e){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":C=this.calculateRangeEnd(t,n,V),c.getIn(r[a[C]],t,V);break}switch(e){case"$eq":case"$aeq":case"$dteq":return u.aeq(I,n)?[y,C]:[0,-1];case"$gt":return u.aeq(c.getIn(r[a[C]],t,V),n)?[C+1,v]:[C,v];case"$gte":return u.aeq(c.getIn(r[a[y]],t,V),n)?[y,v]:[y+1,v];case"$lt":return u.aeq(c.getIn(r[a[y]],t,V),n)?[l,y-1]:[l,y];case"$lte":return u.aeq(c.getIn(r[a[C]],t,V),n)?[l,C]:[l,C-1];default:return[0,r.length-1]}},k.prototype.by=function(e,t){var n;if(t===void 0)return n=this,function(a){return n.by(e,a)};var r=this.getUniqueIndex(e,!0).get(t);return this.cloneObjects?K(r,this.cloneMethod):r},k.prototype.findOne=function(e){e=e||{};var t=this.chain().find(e,!0).data();return Array.isArray(t)&&t.length===0?null:this.cloneObjects?K(t[0],this.cloneMethod):t[0]},k.prototype.chain=function(e,t){var n=new j(this);return typeof e=="undefined"?n:n.transform(e,t)},k.prototype.find=function(e){return this.chain().find(e).data()},k.prototype.findOneUnindexed=function(e,t){for(var n=this.data.length,r;n--;)if(c.getIn(this.data[n],e,!0)===t)return r=this.data[n],r;return null},k.prototype.startTransaction=function(){if(this.transactional){this.cachedData=K(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].startTransaction()}},k.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].commit()}},k.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].rollback()}},k.prototype.async=function(e,t){setTimeout(function(){if(typeof e=="function")e(),t();else throw new TypeError("Argument passed for async execution is not a function")},0)},k.prototype.where=function(e){return this.chain().where(e).data()},k.prototype.mapReduce=function(e,t){try{return t(this.data.map(e))}catch(n){throw n}},k.prototype.eqJoin=function(e,t,n,r,a){return new j(this).eqJoin(e,t,n,r,a)},k.prototype.stages={},k.prototype.getStage=function(e){return this.stages[e]||(this.stages[e]={}),this.stages[e]},k.prototype.commitLog=[],k.prototype.stage=function(e,t){var n=JSON.parse(JSON.stringify(t));return this.getStage(e)[t.$loki]=n,n},k.prototype.commitStage=function(e,t){var n=this.getStage(e),r,a=new Date().getTime();for(r in n)this.update(n[r]),this.commitLog.push({timestamp:a,message:t,data:JSON.parse(JSON.stringify(n[r]))});this.stages[e]={}},k.prototype.no_op=function(){},k.prototype.extract=function(e){var t=0,n=this.data.length,r=ge(e),a=[];for(t;t<n;t+=1)a.push(z(this.data[t],e,r));return a},k.prototype.max=function(e){return Math.max.apply(null,this.extract(e))},k.prototype.min=function(e){return Math.min.apply(null,this.extract(e))},k.prototype.maxRecord=function(e){var t=0,n=this.data.length,r=ge(e),a={index:0,value:void 0},l;for(t;t<n;t+=1)l!==void 0?l<z(this.data[t],e,r)&&(l=z(this.data[t],e,r),a.index=this.data[t].$loki):(l=z(this.data[t],e,r),a.index=this.data[t].$loki);return a.value=l,a},k.prototype.minRecord=function(e){var t=0,n=this.data.length,r=ge(e),a={index:0,value:void 0},l;for(t;t<n;t+=1)l!==void 0?l>z(this.data[t],e,r)&&(l=z(this.data[t],e,r),a.index=this.data[t].$loki):(l=z(this.data[t],e,r),a.index=this.data[t].$loki);return a.value=l,a},k.prototype.extractNumerical=function(e){return this.extract(e).map(ke).filter(Number).filter(function(t){return!isNaN(t)})},k.prototype.avg=function(e){return ye(this.extractNumerical(e))},k.prototype.stdDev=function(e){return x(this.extractNumerical(e))},k.prototype.mode=function(e){var t={},n=this.extract(e);n.forEach(function(v){t[v]?t[v]+=1:t[v]=1});var r,a,l;for(a in t)r?r<t[a]&&(l=a):(l=a,r=t[a]);return l},k.prototype.median=function(e){var t=this.extractNumerical(e);t.sort(Ce);var n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2};function ge(e){return e.indexOf(".")!==-1}function ke(e){return parseFloat(e,10)}function xe(e,t){return e+t}function Ce(e,t){return e-t}function ye(e){return e.reduce(xe,0)/e.length}function x(e){var t=ye(e),n=e.map(function(l){var v=l-t,y=v*v;return y}),r=ye(n),a=Math.sqrt(r);return a}function z(e,t,n){if(n===!1)return e[t];for(var r=t.split("."),a=e;r.length>0;)a=a[r.shift()];return a}function X(e,t,n){for(var r=0,a=e.length,l,v;r<a;){if(v=r+a>>1,l=n.apply(null,[t,e[v]]),l===0)return{found:!0,index:v};l<0?a=v:r=v+1}return{found:!1,index:a}}function ne(e){return function(t,n){return X(t,n,e)}}function ce(){}ce.prototype={keys:[],values:[],sort:function(e,t){return e<t?-1:e>t?1:0},setSort:function(e){this.bs=new ne(e)},bs:function(){return new ne(this.sort)},set:function(e,t){var n=this.bs(this.keys,e);n.found?this.values[n.index]=t:(this.keys.splice(n.index,0,e),this.values.splice(n.index,0,t))},get:function(e){return this.values[X(this.keys,e,this.sort).index]}};function Q(e){this.field=e,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}Q.prototype.keyMap={},Q.prototype.lokiMap={},Q.prototype.set=function(e){var t=e[this.field];if(t!==null&&typeof t!="undefined"){if(this.keyMap[t])throw new Error("Duplicate key for property "+this.field+": "+t);this.keyMap[t]=e,this.lokiMap[e.$loki]=t}},Q.prototype.get=function(e){return this.keyMap[e]},Q.prototype.byId=function(e){return this.keyMap[this.lokiMap[e]]},Q.prototype.update=function(e,t){if(this.lokiMap[e.$loki]!==t[this.field]){var n=this.lokiMap[e.$loki];this.set(t),this.keyMap[n]=void 0}else this.keyMap[e[this.field]]=t},Q.prototype.remove=function(e){var t=this.keyMap[e];if(t!==null&&typeof t!="undefined")this.keyMap[e]=void 0,this.lokiMap[t.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},Q.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function J(e){this.index=Object.create(null),this.field=e}return J.prototype={set:function(t,n){this.index[t]?this.index[t].push(n):this.index[t]=[n]},remove:function(t,n){var r=this.index[t];for(var a in r)r[a]==n&&r.splice(a,1);r.length<1&&(this.index[t]=void 0)},get:function(t){return this.index[t]},clear:function(t){this.index={}}},A.deepFreeze=m,A.freeze=o,A.unFreeze=s,A.LokiOps=D,A.Collection=k,A.DynamicView=U,A.Resultset=j,A.KeyValueStore=ce,A.LokiMemoryAdapter=oe,A.LokiPartitioningAdapter=se,A.LokiLocalStorageAdapter=he,A.LokiFsAdapter=fe,A.persistenceAdapters={fs:fe,localStorage:he},A.aeq=b,A.lt=h,A.gt=w,A.Comparators=u,A}()})})(un);var Gr=un.exports;function Zr(){return lt(Un)}const _e=[{color:"teal-3",label:"Type",type:"categorical",categories:[{label:"Audio"},{label:"Computer Vision"},{label:"Multimodal"},{label:"Natural Language Processing"},{label:"Reinforcement Learning"},{label:"Structured"}]},{color:"lime-3",label:"Task",type:"categorical",categories:[{label:"Audio Classification"},{label:"Audio To Audio"},{label:"Automatic Speech Recognition"},{label:"Conversational"},{label:"Feature Extraction"},{label:"Fill Mask"},{label:"Image Classification"},{label:"Image Segmentation"},{label:"Image To Image"},{label:"Image To Text"},{label:"Object Detection"},{label:"Question Answering"},{label:"Reinforcement Learning"},{label:"Sentence Similarity"},{label:"Summarization"},{label:"Table Question Answering"},{label:"Tabular Classification"},{label:"Text Classification"},{label:"Text Generation"},{label:"Text To Image"},{label:"Text To Speech"},{label:"Text2text Generation"},{label:"Token Classification"},{label:"Translation"},{label:"Unconditional Image Generation"},{label:"Voice Activity Detection"},{label:"Zero Shot Classification"},{label:"Zero Shot Image Classification"}]},{color:"purple-3",label:"Training Data",type:"string"},{color:"brown-3",label:"Hyperparameters",type:"metric",metrics:[{label:"learning_rate",type:"number"},{label:"batch_size",type:"number"},{label:"seed",type:"number"},{label:"total_train_batch_size",type:"number"},{label:"optimizer",type:"string"},{label:"num_epochs",type:"number"}]},{color:"indigo-3",label:"Evaluation Results",type:"metric",metrics:[{label:"accuracy",type:"number"},{label:"bertscore",type:"number"},{label:"bleu",type:"number"},{label:"bleurt",type:"number"},{label:"cer",type:"number"},{label:"chrf",type:"number"},{label:"code_eval",type:"number"},{label:"comet",type:"number"},{label:"competition_math",type:"number"},{label:"coval",type:"number"},{label:"cuad",type:"number"},{label:"exact_match",type:"number"},{label:"f1",type:"number"},{label:"frugalscore",type:"number"},{label:"glue",type:"number"},{label:"google_bleu",type:"number"},{label:"indic_glue",type:"number"},{label:"mae",type:"number"},{label:"mahalanobis",type:"number"},{label:"matthews_correlation",type:"number"},{label:"mauve",type:"number"},{label:"mean_iou",type:"number"},{label:"meteor",type:"number"},{label:"mse",type:"number"},{label:"pearsonr",type:"number"},{label:"perplexity",type:"number"},{label:"precision",type:"number"},{label:"recall",type:"number"},{label:"roc_auc",type:"number"},{label:"rouge",type:"number"},{label:"sacrebleu",type:"number"},{label:"sari",type:"number"},{label:"seqeval",type:"number"},{label:"spearmanr",type:"number"},{label:"squad",type:"number"},{label:"squad_v2",type:"number"},{label:"super_glue",type:"number"},{label:"ter",type:"number"},{label:"wer",type:"number"},{label:"wiki_split",type:"number"},{label:"xnli",type:"number"},{label:"xtreme_s",type:"number"}]}],ea=Xn({name:"MainLayout",components:{IndexPage:sr},data(){return{attributeModels:Object.assign({},..._e.map(i=>({[i.label]:null}))),attributeModelValues:Object.assign({},..._e.map(i=>({[i.label]:null}))),attributeModelSigns:Object.assign({},..._e.map(i=>({[i.label]:null}))),attributeExpanderStates:_e.map(i=>({[i.label]:!1})),activeFilters:[],flag:!0,attrList:_e}},computed:{console:()=>console},methods:{removeFilter(i){this.activeFilters=this.activeFilters.filter(d=>d!==i)},showDocumentation(){this.flag=!0,this.activeFilters=[]},showHome(){this.flag=!1,this.activeFilters=[]},getColor(i){var d;return this.attributes.forEach(f=>{f.label==i&&(d=f.color)}),d},closeExpanders(i,d){this.$refs.expanders.forEach((f,m)=>{m!=i&&f.hide()})},submitFilter(i){var d=this;qe(function(){var f;((f=d.attributeModels[i])==null?void 0:f.type)=="string"&&(d.attributeModelSigns[i]="\u2287"),d.activeFilters.push({attribute:i,keyword:d.attributeModels[i].label==null?d.attributeModels[i]:d.attributeModels[i].label,value:d.attributeModelValues[i],sign:d.attributeModelSigns[i]}),d.attributeModels[i]=null,d.attributeModelValues[i]=null})},setModel(i,d){this.attributeModels[i]={label:d,type:"string"}}},mounted(){var i=this;Yn(()=>import("./dump.2bf9f761.js"),[]).then(d=>{this.loaded=!0,this.models.insert(JSON.parse(JSON.stringify(d)).default),i.$q.loading.hide()})},setup(){const i=Zr();i.loading.show({delay:100});const d=Y(!1);var f=new Gr("mlhub.db"),m=f.addCollection("models");return{models:m,original:_e,attributes:_e,$q:i,leftDrawerOpen:d,toggleLeftDrawer(){d.value=!d.value}}}}),ta=pt(" ML Model Search "),ia={class:"cursor-pointer non-selectable"},na=bt("p",{class:"q-pa-lg q-mb-none text-h6 text-uppercase"},"Search Filters",-1),ra={key:0,style:{display:"table"}},aa=bt("p",{class:"q-pa-lg q-mb-none text-h6 text-uppercase"},"Selected Filters",-1);function la(i,d,f,m,o,s){const c=Gn("IndexPage");return ze(),Te(Xr,{view:"lHh Lpr lFf"},{default:pe(()=>[ae(yr,{reveal:"",elevated:""},{default:pe(()=>[ae(qi,null,{default:pe(()=>[ae(Oi,null,{default:pe(()=>[ta]),_:1}),ae(pr),bt("div",ia,[ae(zt,{flat:"",clickable:"",icon:"home",onClick:i.showHome},null,8,["onClick"]),ae(zt,{flat:"",clickable:"",label:"Documentation",onClick:i.showDocumentation},null,8,["onClick"])]),bt("div",null,"Quasar v"+nt(i.$q.version),1)]),_:1})]),_:1}),ae(mr,{bordered:"",class:"bg-white text-primary"},{default:pe(()=>[ae(qi,null,{default:pe(()=>[ae(Oi),ae(ki,{fit:"scale-down",style:{height:"50px","max-width":"100px"},src:"TU_P1_full-color.png"}),ae(ki,{fit:"scale-down",style:{height:"50px","max-width":"100px"},src:"cognizant-logo.png"})]),_:1})]),_:1}),ae(Kr,{modelValue:i.leftDrawerOpen,"onUpdate:modelValue":d[0]||(d[0]=u=>i.leftDrawerOpen=u),"show-if-above":"",bordered:"",class:"bg-white",width:300,"mini-width":100,breakpoint:200},{default:pe(()=>[ae(ur,null,{default:pe(()=>[na,(ze(!0),Pt(bi,null,gi(i.attributes,(u,b)=>(ze(),Te(Xi,{key:u.label,dense:"",clickable:""},{default:pe(()=>[ae(fr,{ref_for:!0,ref:"expanders",icon:"square",id:u,onShow:h=>{this.closeExpanders(b,h),i.attributeModelSigns[u.label]=">"},"expand-icon-class":i.getColor(u.label),modelValue:i.attributeExpanderStates[u.label],"onUpdate:modelValue":h=>i.attributeExpanderStates[u.label]=h,style:{width:"100%"},dense:"",label:u.label},{header:pe(()=>[ae(Nt,{avatar:""},{default:pe(()=>[ae(dr,{icon:"square","text-color":i.getColor(u.label)},null,8,["text-color"])]),_:2},1024),ae(Nt,null,{default:pe(()=>[pt(nt(u.label),1)]),_:2},1024)]),default:pe(()=>[u.type=="string"?(ze(),Te(Et,{key:0},{default:pe(()=>[ae(Vt,null,{default:pe(()=>[ae(Mt,{onSubmit:h=>{this.closeExpanders(),this.submitFilter(u.label)}},{default:pe(()=>[ae($t,{filled:"",modelValue:i.attributeModels[u.label],"onUpdate:modelValue":h=>i.attributeModels[u.label]=h,label:"Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)):ct("",!0),u.type=="categorical"?(ze(),Te(Et,{key:1},{default:pe(()=>[ae(Vt,null,{default:pe(()=>[ae(Mt,{ref_for:!0,ref:"form"},{default:pe(()=>[ae(Tt,{filled:"","onUpdate:modelValue":[h=>{this.closeExpanders(),this.submitFilter(u.label)},h=>i.attributeModels[u.label]=h],modelValue:i.attributeModels[u.label],options:u.categories,label:"Type"},null,8,["onUpdate:modelValue","modelValue","options"])]),_:2},1536)]),_:2},1024)]),_:2},1024)):ct("",!0),u.type=="metric"?(ze(),Te(Et,{key:2},{default:pe(()=>[ae(Vt,null,{default:pe(()=>[ae(Mt,{onSubmit:h=>{this.closeExpanders(),this.submitFilter(u.label)}},{default:pe(()=>{var h;return[ae(Tt,{filled:"","use-input":"","fill-input":"","input-debounce":"0","hide-selected":"",onInputValue:w=>i.setModel(u.label,w),modelValue:i.attributeModels[u.label],"onUpdate:modelValue":w=>i.attributeModels[u.label]=w,options:u.metrics,label:"Metric"},null,8,["onInputValue","modelValue","onUpdate:modelValue","options"]),((h=i.attributeModels[u.label])==null?void 0:h.type)=="number"?(ze(),Pt("div",ra,[ae(Tt,{filled:"",style:{width:"25%",display:"table-cell"},modelValue:i.attributeModelSigns[u.label],"onUpdate:modelValue":w=>i.attributeModelSigns[u.label]=w,options:[">","=","<","~","\u2287"],label:"Sign"},null,8,["modelValue","onUpdate:modelValue"]),ae($t,{filled:"",style:{width:"50%",display:"table-cell"},modelValue:i.attributeModelValues[u.label],"onUpdate:modelValue":w=>i.attributeModelValues[u.label]=w,label:"Value"},null,8,["modelValue","onUpdate:modelValue"])])):(ze(),Te($t,{key:1,filled:"",modelValue:i.attributeModelValues[u.label],"onUpdate:modelValue":w=>i.attributeModelValues[u.label]=w,label:"Contains"},null,8,["modelValue","onUpdate:modelValue"])),Hi(ae(zt,{label:"Submit",type:"submit"},null,512),[[Zn,!1]])]}),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)):ct("",!0)]),_:2},1032,["id","onShow","expand-icon-class","modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128))]),_:1}),ae(cr),aa,(ze(!0),Pt(bi,null,gi(this.activeFilters,u=>(ze(),Te(Yi,{removable:"",key:u.keyword,color:i.getColor(u.attribute),onRemove:b=>this.removeFilter(u),square:""},{default:pe(()=>[pt(nt(u.keyword)+" ",1),u.value?(ze(),Te(hr,{key:0,color:"grey"},{default:pe(()=>[pt(nt(u.sign)+" "+nt(u.value),1)]),_:2},1024)):ct("",!0)]),_:2},1032,["color","onRemove"]))),128))]),_:1},8,["modelValue"]),ae(Qr,null,{default:pe(()=>[ae(c,{ref:"results",filters:this.activeFilters,models:this.models,flag:this.flag,attrList:i.attrList},null,8,["filters","models","flag","attrList"])]),_:1})]),_:1})}var fa=Jn(ea,[["render",la]]);export{fa as default};
